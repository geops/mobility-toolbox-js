[
  {
    "__docId__": 1,
    "kind": "external",
    "name": "Infinity",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Infinity",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 2,
    "kind": "external",
    "name": "NaN",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~NaN",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 3,
    "kind": "external",
    "name": "undefined",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~undefined",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 4,
    "kind": "external",
    "name": "null",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~null",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 5,
    "kind": "external",
    "name": "Object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Object",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 6,
    "kind": "external",
    "name": "object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~object",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 7,
    "kind": "external",
    "name": "Function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Function",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 8,
    "kind": "external",
    "name": "function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~function",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 9,
    "kind": "external",
    "name": "Boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Boolean",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 10,
    "kind": "external",
    "name": "boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~boolean",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 11,
    "kind": "external",
    "name": "Symbol",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Symbol",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 12,
    "kind": "external",
    "name": "Error",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Error",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 13,
    "kind": "external",
    "name": "EvalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~EvalError",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 14,
    "kind": "external",
    "name": "InternalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/InternalError",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~InternalError",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 15,
    "kind": "external",
    "name": "RangeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~RangeError",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 16,
    "kind": "external",
    "name": "ReferenceError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~ReferenceError",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 17,
    "kind": "external",
    "name": "SyntaxError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~SyntaxError",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 18,
    "kind": "external",
    "name": "TypeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~TypeError",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 19,
    "kind": "external",
    "name": "URIError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~URIError",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 20,
    "kind": "external",
    "name": "Number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Number",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 21,
    "kind": "external",
    "name": "number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~number",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 22,
    "kind": "external",
    "name": "Date",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Date",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 23,
    "kind": "external",
    "name": "String",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~String",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 24,
    "kind": "external",
    "name": "string",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~string",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 25,
    "kind": "external",
    "name": "RegExp",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~RegExp",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 26,
    "kind": "external",
    "name": "Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Array",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 27,
    "kind": "external",
    "name": "Int8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Int8Array",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 28,
    "kind": "external",
    "name": "Uint8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Uint8Array",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 29,
    "kind": "external",
    "name": "Uint8ClampedArray",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Uint8ClampedArray",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 30,
    "kind": "external",
    "name": "Int16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Int16Array",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 31,
    "kind": "external",
    "name": "Uint16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Uint16Array",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 32,
    "kind": "external",
    "name": "Int32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Int32Array",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 33,
    "kind": "external",
    "name": "Uint32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Uint32Array",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 34,
    "kind": "external",
    "name": "Float32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Float32Array",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 35,
    "kind": "external",
    "name": "Float64Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Float64Array",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 36,
    "kind": "external",
    "name": "Map",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Map",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 37,
    "kind": "external",
    "name": "Set",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Set",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 38,
    "kind": "external",
    "name": "WeakMap",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~WeakMap",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 39,
    "kind": "external",
    "name": "WeakSet",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~WeakSet",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 40,
    "kind": "external",
    "name": "ArrayBuffer",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~ArrayBuffer",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 41,
    "kind": "external",
    "name": "DataView",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~DataView",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 42,
    "kind": "external",
    "name": "JSON",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~JSON",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 43,
    "kind": "external",
    "name": "Promise",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Promise",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 44,
    "kind": "external",
    "name": "Generator",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Generator",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 45,
    "kind": "external",
    "name": "GeneratorFunction",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~GeneratorFunction",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 46,
    "kind": "external",
    "name": "Reflect",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Reflect",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 47,
    "kind": "external",
    "name": "Proxy",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy",
    "memberof": "build/.external-ecmascript.js",
    "static": true,
    "longname": "build/.external-ecmascript.js~Proxy",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 49,
    "kind": "external",
    "name": "ol/Observable~Observable",
    "externalLink": "https://openlayers.org/en/latest/apidoc/module-ol_Observable-Observable.html",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~ol/Observable~Observable",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 50,
    "kind": "external",
    "name": "ol/Map~Map",
    "externalLink": "https://openlayers.org/en/latest/apidoc/module-ol_Map-Map.html",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~ol/Map~Map",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 51,
    "kind": "external",
    "name": "ol/coordinate~Coordinate",
    "externalLink": "https://openlayers.org/en/latest/apidoc/module-ol_coordinate.html#~Coordinate",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~ol/coordinate~Coordinate",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 52,
    "kind": "external",
    "name": "ol/layer/Layer~Layer",
    "externalLink": "https://openlayers.org/en/latest/apidoc/module-ol_layer_Layer-Layer.html",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~ol/layer/Layer~Layer",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 53,
    "kind": "external",
    "name": "ol/Feature~Feature",
    "externalLink": "https://openlayers.org/en/latest/apidoc/module-ol_Feature-Feature.html",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~ol/Feature~Feature",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 54,
    "kind": "external",
    "name": "ol/geom/Point~Point",
    "externalLink": "https://openlayers.org/en/latest/apidoc/module-ol_geom_Point-Point.html",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~ol/geom/Point~Point",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 55,
    "kind": "external",
    "name": "ol/geom/LineString~LineString",
    "externalLink": "https://openlayers.org/en/latest/apidoc/module-ol_geom_LineString-LineString.html",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~ol/geom/LineString~LineString",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 56,
    "kind": "external",
    "name": "ol/geom/MultiLineString~MultiLineString",
    "externalLink": "https://openlayers.org/en/latest/apidoc/module-ol_geom_MultiLineString-MultiLineString.html",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~ol/geom/MultiLineString~MultiLineString",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 57,
    "kind": "external",
    "name": "ol/format/GeoJSON",
    "externalLink": "https://openlayers.org/en/latest/apidoc/module-ol_format_GeoJSON-GeoJSON.html",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~ol/format/GeoJSON",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 58,
    "kind": "external",
    "name": "ol/MapEvent~MapEvent",
    "externalLink": "https://openlayers.org/en/latest/apidoc/module-ol_MapEvent-MapEvent.html",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~ol/MapEvent~MapEvent",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 59,
    "kind": "external",
    "name": "ol/events~EventsKey",
    "externalLink": "https://openlayers.org/en/latest/apidoc/module-ol_events.html#~EventsKey",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~ol/events~EventsKey",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 60,
    "kind": "external",
    "name": "ol/Object~BaseObject",
    "externalLink": "https://openlayers.org/en/latest/apidoc/module-ol_Object-BaseObject.html",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~ol/Object~BaseObject",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 61,
    "kind": "external",
    "name": "ol/control/Control~Control",
    "externalLink": "https://openlayers.org/en/latest",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~ol/control/Control~Control",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 62,
    "kind": "external",
    "name": "maplibregl.CustomLayerInterface",
    "externalLink": "https://maplibre.org/maplibre-gl-js/docs/API/interfaces/CustomLayerInterface/",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~maplibregl.CustomLayerInterface",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 63,
    "kind": "external",
    "name": "maplibregl.Evented",
    "externalLink": "https://maplibre.org/maplibre-gl-js/docs/API/classes/maplibregl.Evented/",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~maplibregl.Evented",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 64,
    "kind": "external",
    "name": "maplibregl.Map",
    "externalLink": "https://maplibre.org/maplibre-gl-js/docs/API/classes/maplibregl.Map/",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~maplibregl.Map",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 65,
    "kind": "external",
    "name": "maplibregl.MapOptions",
    "externalLink": "https://maplibre.org/maplibre-gl-js/docs/API/types/maplibregl.MapOptions/",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~maplibregl.MapOptions",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 66,
    "kind": "external",
    "name": "maplibregl.QueryRenderedFeaturesOptions",
    "externalLink": "https://maplibre.org/maplibre-gl-js/docs/API/types/maplibregl.QueryRenderedFeaturesOptions/",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~maplibregl.QueryRenderedFeaturesOptions",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 67,
    "kind": "external",
    "name": "maplibregl.SourceSpecification",
    "externalLink": "https://maplibre.org/maplibre-style-spec/sources/",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~maplibregl.SourceSpecification",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 68,
    "kind": "external",
    "name": "maplibregl.AddLayerObject",
    "externalLink": "https://maplibre.org/maplibre-gl-js/docs/API/type-aliases/AddLayerObject",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~maplibregl.AddLayerObject",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 69,
    "kind": "external",
    "name": "maplibregl.IControl",
    "externalLink": "https://maplibre.org/maplibre-gl-js/docs/API/interfaces/IControl/",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~maplibregl.IControl",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 70,
    "kind": "external",
    "name": "AbortController",
    "externalLink": "https://developer.mozilla.org/fr/docs/Web/API/AbortController",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~AbortController",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 71,
    "kind": "external",
    "name": "GeoJSONPoint",
    "externalLink": "https://tools.ietf.org/html/rfc7946#section-3.1.2",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~GeoJSONPoint",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 72,
    "kind": "external",
    "name": "GeoJSONFeature",
    "externalLink": "https://tools.ietf.org/html/rfc7946#section-3.2",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~GeoJSONFeature",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 73,
    "kind": "external",
    "name": "GeoJSONFeatureCollection",
    "externalLink": "https://tools.ietf.org/html/rfc7946#section-3.3",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~GeoJSONFeatureCollection",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 74,
    "kind": "external",
    "name": "Canvas",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~Canvas",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 75,
    "kind": "external",
    "name": "CanvasRenderingContext2D",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~CanvasRenderingContext2D",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 76,
    "kind": "external",
    "name": "GetTrajectoriesParams",
    "externalLink": "https://developer.geops.io/apis/5dcbd5c9a256d90001cf1360/#/default/get_trajectories",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~GetTrajectoriesParams",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 77,
    "kind": "external",
    "name": "GetTrajectoryByIdParams",
    "externalLink": "https://developer.geops.io/apis/5dcbd5c9a256d90001cf1360/#/default/get_trajectorybyid",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~GetTrajectoryByIdParams",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 78,
    "kind": "external",
    "name": "TrajservTrajectory",
    "externalLink": "https://developer.geops.io/apis/5dcbd5c9a256d90001cf1360/#model-single_trajectory",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~TrajservTrajectory",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 79,
    "kind": "external",
    "name": "GetTrajectoryStationsParams",
    "externalLink": "https://developer.geops.io/apis/5dcbd5c9a256d90001cf1360/#/default/get_trajstations",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~GetTrajectoryStationsParams",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 80,
    "kind": "external",
    "name": "HTMLElement",
    "externalLink": "https://developer.mozilla.org/fr/docs/Web/API/HTMLElement",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~HTMLElement",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 81,
    "kind": "external",
    "name": "FetchOptions",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/fetch#options",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~FetchOptions",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 82,
    "kind": "external",
    "name": "StopsParameters",
    "externalLink": "https://developer.geops.io/apis/stops",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~StopsParameters",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 83,
    "kind": "external",
    "name": "StopsResponse",
    "externalLink": "https://developer.geops.io/apis/stops",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~StopsResponse",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 84,
    "kind": "external",
    "name": "RealtimeFullTrajectory",
    "externalLink": "https://developer.geops.io/apis/realtime#model-FullTrajectory",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~RealtimeFullTrajectory",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 85,
    "kind": "external",
    "name": "RealtimeStation",
    "externalLink": "https://developer.geops.io/apis/realtime",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~RealtimeStation",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 86,
    "kind": "external",
    "name": "RealtimeNews",
    "externalLink": "https://developer.geops.io/apis/realtime",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~RealtimeNews",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 87,
    "kind": "external",
    "name": "RealtimeStopSequence",
    "externalLink": "https://developer.geops.io/apis/realtime#model-StopSequence",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~RealtimeStopSequence",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 88,
    "kind": "external",
    "name": "RealtimeTrajectory",
    "externalLink": "https://developer.geops.io/apis/realtime#model-TrackerTrajectory",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~RealtimeTrajectory",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 89,
    "kind": "external",
    "name": "RealtimeDeparture",
    "externalLink": "https://developer.geops.io/apis/realtime#model-Departure",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~RealtimeDeparture",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 90,
    "kind": "external",
    "name": "RealtimeStationId",
    "externalLink": "https://developer.geops.io/apis/realtime",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~RealtimeStationId",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 91,
    "kind": "external",
    "name": "RealtimeTenant",
    "externalLink": "https://developer.geops.io/apis/realtime",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~RealtimeTenant",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 92,
    "kind": "external",
    "name": "RoutingParameters",
    "externalLink": "https://developer.geops.io/apis/routing",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~RoutingParameters",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 93,
    "kind": "external",
    "name": "RoutingResponse",
    "externalLink": "https://developer.geops.io/apis/routing",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~RoutingResponse",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 94,
    "kind": "external",
    "name": "geoblocks/ol-maplibre-layer/MapLibreLayer",
    "externalLink": "https://geoblocks.github.io/ol-maplibre-layer/api/modules/MapLibreLayer.html",
    "memberof": "build/.externals.js",
    "static": true,
    "longname": "build/.externals.js~geoblocks/ol-maplibre-layer/MapLibreLayer",
    "access": "private",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 95,
    "kind": "file",
    "name": "build/api/HttpAPI.js",
    "content": "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport getUrlWithParams from '../common/utils/getUrlWithParams';\n/**\n * Common class to access to a geOps api using http.\n * @private\n */\nclass HttpAPI {\n    constructor(options) {\n        this.url = options.url;\n        this.apiKey = options.apiKey;\n    }\n    /**\n     * Append the apiKey before sending the request.\n     *\n     * @private\n     */\n    fetch(path, params, config) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.url) {\n                throw new Error(`No url defined for request to ${this.url}/${path}`);\n            }\n            if (!this.url && !this.apiKey && !this.url.includes('key=')) {\n                // eslint-disable-next-line no-console\n                throw new Error(`No apiKey defined for request to ${this.url}`);\n            }\n            // Clean requets parameters, removing undefined and null values.\n            const searchParams = params || {};\n            const url = getUrlWithParams(`${this.url}${path || ''}`, Object.assign({ key: this.apiKey }, searchParams));\n            const response = yield fetch(url.toString(), config);\n            const data = yield response.json();\n            if (data.error) {\n                throw new Error(data.error);\n            }\n            return data;\n        });\n    }\n}\nexport default HttpAPI;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/api/HttpAPI.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 96,
    "kind": "variable",
    "name": "__awaiter",
    "memberof": "build/api/HttpAPI.js",
    "static": true,
    "longname": "build/api/HttpAPI.js~__awaiter",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/api/HttpAPI.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 97,
    "kind": "class",
    "name": "HttpAPI",
    "memberof": "build/api/HttpAPI.js",
    "static": true,
    "longname": "build/api/HttpAPI.js~HttpAPI",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/api/HttpAPI.js",
    "importStyle": "HttpAPI",
    "description": "Common class to access to a geOps api using http.",
    "lineNumber": 15,
    "interface": false
  },
  {
    "__docId__": 98,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "build/api/HttpAPI.js~HttpAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/HttpAPI.js~HttpAPI#constructor",
    "access": "private",
    "description": null,
    "lineNumber": 16,
    "undocument": true
  },
  {
    "__docId__": 99,
    "kind": "member",
    "name": "url",
    "memberof": "build/api/HttpAPI.js~HttpAPI",
    "static": false,
    "longname": "build/api/HttpAPI.js~HttpAPI#url",
    "access": "private",
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 100,
    "kind": "member",
    "name": "apiKey",
    "memberof": "build/api/HttpAPI.js~HttpAPI",
    "static": false,
    "longname": "build/api/HttpAPI.js~HttpAPI#apiKey",
    "access": "private",
    "description": null,
    "lineNumber": 18,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 101,
    "kind": "method",
    "name": "fetch",
    "memberof": "build/api/HttpAPI.js~HttpAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/HttpAPI.js~HttpAPI#fetch",
    "access": "private",
    "description": "Append the apiKey before sending the request.",
    "lineNumber": 25,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "params",
        "types": [
          "*"
        ]
      },
      {
        "name": "config",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 102,
    "kind": "file",
    "name": "build/api/RealtimeAPI.js",
    "content": "/* eslint-disable no-underscore-dangle */\nimport debounceWebsocketMessages from '../common/utils/debounceWebsocketMessages';\nimport getModeSuffix from '../common/utils/getRealtimeModeSuffix';\n/* eslint-disable class-methods-use-this */\nimport WebSocketAPI from './WebSocketAPI';\n/**\n * Enum for Realtime modes.\n * @readonly\n * @typedef {string} RealtimeMode\n * @property {string} RAW \"raw\"\n * @property {string} SCHEMATIC \"schematic\"\n * @property {string} TOPOGRAPHIC \"topographic\"\n * @enum {RealtimeMode}\n * @public\n */\nexport const RealtimeModes = {\n    RAW: 'raw',\n    SCHEMATIC: 'schematic',\n    TOPOGRAPHIC: 'topographic',\n};\n/**\n * This class provides convenience methods to use to the [geOps Realtime API](https://developer.geops.io/apis/realtime/).\n *\n * @example\n * import { RealtimeAPI } from 'mobility-toolbox-js/api';\n *\n * const api = new RealtimeAPI({\n *   apiKey: \"yourApiKey\",\n *   bbox: [782001, 5888803, 923410, 5923660, 11, \"mots=rail\"],\n *   // url: \"wss://api.geops.io/tracker-ws/v1/\",\n * });\n *\n * // Open the websocket connection\n * api.open();\n *\n * // Subscribe to channel\n * api.subscribeTrajectory('topographic', (data) => {\n *    console.log('Log trajectories:', JSON.stringify(data.content));\n * });\n *\n * // Close the websocket connection\n * api.close();\n *\n * @public\n */\nclass RealtimeAPI {\n    /**\n     * This callback type is called `requestCallback` and is displayed as a global symbol.\n     *\n     * @callback onFullTrajectoryMessageCallback\n     * @param {number} responseCode\n     * @param {string} responseMessage\n     */\n    /**\n     * The bounding box to receive data from.\\\n     * Example: [minX, minY, maxX, maxY, zoom, mots , gen_level, tenant, ...]\\\n     * &nbsp;\\\n     * Where:\n     * - **minX**: a string representation of an integer (not a float) representing the minimal X coordinate (in EPSG:3857) of a bounding box\\\n     * &nbsp;\n     * - **minY**: a string representation of an integer (not a float) representing the minimal Y coordinate (in EPSG:3857) of a bounding box\\\n     * &nbsp;\n     * - **maxX**: a string representation of an integer (not a float) representing the maximal X coordinate (in EPSG:3857) of a bounding box\\\n     * &nbsp;\n     * - **maxY**: a string representation of an integer (not a float) representing the maximal Y coordinate (in EPSG:3857) of a bounding box\\\n     * &nbsp;\n     * - **zoom**: a string representation of an integer representing the zoom level (from 4 to 22). When zoom < 8 only the trains are displayed for performance reasons.\\\n     * &nbsp;\n     * - **mots**: A comma separated list of modes of transport. **Optional**.\\\n     *         Example: \"mots=rail,subway\".\\\n     * &nbsp;\n     * - **gen_level**: An integer representing the generalization level. **Optional**.\\\n     *              Example: \"gen_level=5\"\\\n     * &nbsp;\n     * - **tenant**: A string representing the tenant. **Optional**.\\\n     *           Example: \"tenant=sbb\"\\\n     * &nbsp;\n     * - ...: Any other values added to the bbox will be send to the server\n     *\n     * @type {string[]}\n     *\n     * @public\n     */\n    get bbox() {\n        return this._bbox;\n    }\n    set bbox(newBbox) {\n        if (JSON.stringify(newBbox) !== JSON.stringify(this._bbox)) {\n            this._bbox = newBbox;\n            if (this.wsApi && this._bbox) {\n                this.wsApi.send(`BBOX ${this._bbox.join(' ')}`);\n            }\n        }\n    }\n    get buffer() {\n        return this._buffer;\n    }\n    set buffer(newBuffer) {\n        if (JSON.stringify(newBuffer) !== JSON.stringify(this._buffer)) {\n            this._buffer = newBuffer;\n            if (this.wsApi && this._buffer) {\n                this.wsApi.send(`BUFFER ${this._buffer.join(' ')}`);\n            }\n        }\n    }\n    get url() {\n        return this._url;\n    }\n    set url(newUrl) {\n        if (this._url !== newUrl) {\n            this._url = newUrl;\n            // Update the websocket only if the url has changed and the websocket is already open or is opening.\n            if (this.wsApi.open || this.wsApi.connecting) {\n                this.open();\n            }\n        }\n    }\n    /**\n     * Constructor\n     *\n     * @param {Object} options Options.\n     * @param {string} options.apiKey Access key for [geOps apis](https://developer.geops.io/).\n     * @param {string[]} options.bbox The bounding box to receive data from.\n     * @param {string} [options.url='wss://api.geops.io/tracker-ws/v1/'] Url of the [geOps Realtime API](https://developer.geops.io/apis/realtime/).\n     * @public\n     */\n    constructor(options = {}) {\n        this.version = '2';\n        let opt = options;\n        if (typeof options === 'string') {\n            opt = { url: options };\n        }\n        const { apiKey } = opt;\n        const { url } = opt;\n        const wsApi = new WebSocketAPI();\n        let suffix = '';\n        if (apiKey && !(url === null || url === void 0 ? void 0 : url.includes('key='))) {\n            suffix = `?key=${apiKey}`;\n        }\n        this._url = (url || 'wss://api.geops.io/tracker-ws/v1/') + suffix;\n        this._buffer = opt.buffer || [100, 100];\n        this._bbox = opt.bbox;\n        this.version = opt.version || '2';\n        /**\n         * Interval between PING request in ms.\n         * If equal to 0,  no PING request are sent.\n         * @type {number}\n         */\n        this.pingIntervalMs = opt.pingIntervalMs || 10000;\n        /**\n         * Timeout in ms after an automatic reconnection when the websoscket has been closed by the server.\n         * @type {number}\n         */\n        this.reconnectTimeoutMs = opt.reconnectTimeoutMs || 100;\n        /**\n         * The websocket helper class to connect the websocket.\n         */\n        this.wsApi = wsApi;\n    }\n    /**\n     * Close the websocket connection without reconnection.\n     *\n     * @public\n     */\n    close() {\n        this.wsApi.close();\n    }\n    /**\n     * Send GET to a channel.\n     *\n     * @param {string | WebSocketAPIParameters} channelOrParams Name of the websocket channel to send GET or an object representing parameters to send\n     * @return {Promise<WebSocketAPIMessageEventData<?>>} A websocket response.\n     * @public\n     */\n    get(channelOrParams) {\n        let params = channelOrParams;\n        if (typeof channelOrParams === 'string') {\n            params = { channel: channelOrParams };\n        }\n        return new Promise((resolve, reject) => {\n            this.wsApi.get(params, resolve, reject);\n        });\n    }\n    /**\n     * Get a full trajectory of a vehicule .\n     *\n     * @param {string} id A vehicle id.\n     * @param {RealtimeMode} mode Realtime mode.\n     * @param {string} generalizationLevel The generalization level to request. Can be one of 5 (more generalized), 10, 30, 100, undefined (less generalized).\n     * @return {Promise<{data: { content: RealtimeFullTrajectory }}>} Return a full trajectory.\n     * @public\n     */\n    getFullTrajectory(id, mode, generalizationLevel) {\n        let suffix = '';\n        if (this.version === '1') {\n            suffix = getModeSuffix(mode, RealtimeModes);\n        }\n        const channel = [`full_trajectory${suffix}`];\n        if (id) {\n            channel.push(id);\n        }\n        if ((!mode || mode === RealtimeModes.TOPOGRAPHIC) && generalizationLevel) {\n            channel.push(`gen${generalizationLevel}`);\n        }\n        return this.get(channel.join('_'));\n    }\n    /**\n     * Return a station with a given uic number and a mode.\n     *\n     * @param {number} uic UIC of the station.\n     * @param {RealtimeMode} mode Realtime mode.\n     * @return {Promise<{data: { content: RealtimeStation }}>} A station.\n     * @public\n     */\n    getStation(uic, mode) {\n        const params = {\n            args: uic,\n            channel: `station${getModeSuffix(mode, RealtimeModes)}`,\n        };\n        return this.get(params);\n    }\n    /**\n     * Get the list of ststions available for a specifc mode. The promise is resolved every 100ms\n     * @param {RealtimeMode} mode Realtime mode.\n     * @param {number} timeout = 100 Duration in ms between each promise resolve calls.\n     * @return {Promise<RealtimeStation[]>} An array of stations.\n     * @public\n     */\n    getStations(mode, timeout = 100) {\n        return new Promise((resolve) => {\n            this.get(`station${getModeSuffix(mode, RealtimeModes)}`).then(debounceWebsocketMessages(resolve, undefined, timeout));\n        });\n    }\n    /**\n     * Get the list of stops for this vehicle.\n     *\n     * @param {string} id A vehicle id.\n     * @return {Promise<{data: { content: RealtimeStopSequence[] }}>} Returns a stop sequence object.\n     * @public\n     */\n    getStopSequence(id) {\n        return this.get(`stopsequence_${id}`);\n    }\n    /**\n     * Return a partial trajectory with a given id and a mode.\n     *\n     * @param {number} id The identifier of a trajectory.\n     * @param {RealtimeMode} mode Realtime mode.\n     * @return {Promise<{data: { content: RealtimeTrajectory }}>} A trajectory.\n     * @public\n     */\n    getTrajectory(id, mode) {\n        return this.get(`partial_trajectory${getModeSuffix(mode, RealtimeModes)}_${id}`);\n    }\n    /**\n     * Callback when the websocket is closed by the server.\n     * It auto reconnects after a timeout.\n     * @private\n     */\n    onClose() {\n        window.clearTimeout(this.pingInterval);\n        window.clearTimeout(this.reconnectTimeout);\n        if (this.reconnectTimeoutMs) {\n            this.reconnectTimeout = window.setTimeout(() => this.open(), this.reconnectTimeoutMs);\n        }\n    }\n    /**\n     * Callback when the websocket is opened and ready.\n     * It applies the bbox and the projection.\n     * @private\n     */\n    onOpen() {\n        if (this.bbox) {\n            this.wsApi.send(`BBOX ${this.bbox.join(' ')}`);\n        }\n        if (this.buffer) {\n            this.wsApi.send(`BUFFER ${this.buffer.join(' ')}`);\n        }\n        /**\n         * Keep websocket alive\n         */\n        if (this.pingIntervalMs) {\n            window.clearInterval(this.pingInterval);\n            this.pingInterval = window.setInterval(() => {\n                this.wsApi.send('PING');\n            }, this.pingIntervalMs);\n        }\n    }\n    /**\n     * Open the websocket connection.\n     *\n     * @public\n     */\n    open() {\n        this.wsApi.connect(this.url, this.onOpen.bind(this));\n        // Register reconnection on close.\n        if (this.wsApi.websocket) {\n            this.wsApi.websocket.onclose = () => {\n                this.onClose();\n            };\n        }\n    }\n    /**\n     * Unsubscribe trajectory and deleted_vehicles channels. To resubscribe you have to set a new BBOX.\n     */\n    reset() {\n        this.wsApi.send('RESET');\n    }\n    /**\n     * Subscribe to a channel.\n     *\n     * @param {string} channel Name of the websocket channel to subscribe.\n     * @param {function} onSuccess Callback when the subscription succeeds.\n     * @param {function} onError Callback when the subscription fails.\n     * @param {boolean} [quiet=false] If true avoid to store the subscription in the subscriptions list.\n     * @public\n     */\n    subscribe(channel, onSuccess, onError = () => { }, quiet = false) {\n        if (!channel || !onSuccess) {\n            return;\n        }\n        this.wsApi.subscribe({ channel }, onSuccess, onError, quiet);\n    }\n    /**\n     * Subscribe to deleted_vhicles channel.\n     *\n     * @param {RealtimeMode} mode Realtime mode.\n     * @param {function(data: { content: RealtimeTrainId })} onMessage Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed.\n     * @param {function} onError Callback when the subscription fails.\n     * @param {boolean} [quiet=false] If true avoid to store the subscription in the subscriptions list.\n     * @public\n     */\n    subscribeDeletedVehicles(mode, onMessage, onError = () => { }, quiet = false) {\n        this.unsubscribeDeletedVehicles(onMessage);\n        let suffix = '';\n        if (this.version === '1') {\n            suffix = getModeSuffix(mode, RealtimeModes);\n        }\n        this.subscribe(`deleted_vehicles${suffix}`, onMessage, onError, quiet);\n    }\n    /**\n     * Subscribe to departures channel of a given station.\n     *\n     * @param {number} stationId UIC of the station.\n     * @param {function(departures: RealtimeDeparture[])} onMessage Function called on each message of the channel.\n     * @param {function} onError Callback when the subscription fails.\n     * @param {boolean} [quiet=false] If true avoid to store the subscription in the subscriptions list.\n     * @deprecated Use subscribeTimetable instead.\n     */\n    subscribeDepartures(stationId, onMessage, onError = () => { }, quiet = false) {\n        this.subscribeTimetable(stationId, onMessage, onError, quiet);\n    }\n    /**\n     * Subscribe to the disruptions channel for tenant.\n     *\n     * @param {RealtimeTenant} tenant Tenant's id\n     * @param {function(data: { content: RealtimeNews[] })} onMessage Function called on each message of the channel.\n     * @param {function} onError Callback when the subscription fails.\n     * @param {boolean} [quiet=false] If true avoid to store the subscription in the subscriptions list.\n     * @deprecated Use subscribeNewsticker instead.\n     */\n    subscribeDisruptions(tenant, onMessage, onError = () => { }, quiet = false) {\n        this.subscribeNewsticker(tenant, onMessage, onError, quiet);\n    }\n    /**\n     * Subscribe to extra_geoms channel.\n     *\n     * @param {function(data: { content: RealtimeExtraGeom })} onMessage Function called on each message of the channel.\n     * @param {function} onError Callback when the subscription fails.\n     * @param {boolean} [quiet=false] If true avoid to store the subscription in the subscriptions list.\n     */\n    subscribeExtraGeoms(onMessage, onError = () => { }, quiet = false) {\n        this.subscribe('extra_geoms', onMessage, onError, quiet);\n    }\n    /**\n     * Subscribe to full_trajectory channel of a given vehicle.\n     *\n     * @param {string} id A vehicle id.\n     * @param {RealtimeMode} mode Realtime mode.\n     * @param {function(data:{content: RealtimeFullTrajectory})} onMessage Function called on each message of the channel.\n     * @param {function} onError Callback when the subscription fails.\n     * @param {boolean} [quiet=false] If true avoid to store the subscription in the subscriptions list.\n     * @public\n     */\n    subscribeFullTrajectory(id, mode, onMessage, onError = () => { }, quiet = false) {\n        let suffix = '';\n        if (this.version === '1') {\n            suffix = getModeSuffix(mode, RealtimeModes);\n        }\n        this.subscribe(`full_trajectory${suffix}_${id}`, onMessage, onError, quiet);\n    }\n    /**\n     * Subscribe to healthcheck channel.\n     * @param {function(data: { content: string })} onMessage Callback when the subscribe to healthcheck channel succeeds.\n     * @param {function} onError Callback when the subscription fails.\n     * @param {boolean} [quiet=false] If true avoid to store the subscription in the subscriptions list.\n     */\n    subscribeHealthCheck(onMessage, onError = () => { }, quiet = false) {\n        this.subscribe('healthcheck', onMessage, onError, quiet);\n    }\n    /**\n     * Subscribe to the newsticker channel for tenant.\n     *\n     * @param {RealtimeTenant} tenant Tenant's id\n     * @param {function(data: { content: RealtimeNews[] })} onMessage Function called on each message of the channel.\n     * @param {function} onError Callback when the subscription fails.\n     * @param {boolean} [quiet=false] If true avoid to store the subscription in the subscriptions list.\n     * @public\n     */\n    subscribeNewsticker(tenant, onMessage, onError = () => { }, quiet = false) {\n        this.subscribe(`${tenant}_newsticker`, onMessage, onError, quiet);\n    }\n    /**\n     * Subscribe to stations channel.\n     * One message pro station.\n     *\n     * @param {RealtimeMode} mode Realtime mode.\n     * @param {function(data: { content: RealtimeStation })} onMessage Function called on each message of the channel.\n     * @param {function} onError Callback when the subscription fails.\n     * @param {boolean} [quiet=false] If true avoid to store the subscription in the subscriptions list.\n     * @public\n     */\n    subscribeStations(mode, onMessage, onError = () => { }, quiet = false) {\n        this.subscribe(`station${getModeSuffix(mode, RealtimeModes)}`, onMessage, onError, quiet);\n    }\n    /**\n     * Subscribe to stopsequence channel of a given vehicle.\n     *\n     * @param {string} id A vehicle id.\n     * @param {function(data: { content: RealtimeStopSequence[] })} onMessage Function called on each message of the channel.\n     * @param {function} onError Callback when the subscription fails.\n     * @param {boolean} [quiet=false] If true avoid to store the subscription in the subscriptions list.\n     * @public\n     */\n    subscribeStopSequence(id, onMessage, onError = () => { }, quiet = false) {\n        this.subscribe(`stopsequence_${id}`, onMessage, onError, quiet);\n    }\n    /**\n     * Subscribe to timetable channel of a given station.\n     *\n     * @param {number} stationId UIC of the station.\n     * @param {function(departures: RealtimeDeparture[])} onMessage Function called on each message of the channel.\n     * @param {function} onError Callback when the subscription fails.\n     * @param {boolean} [quiet=false] If true avoid to store the subscription in the subscriptions list.\n     * @public\n     */\n    subscribeTimetable(stationId, onMessage, onError = () => { }, quiet = false) {\n        this.subscribe(`timetable_${stationId}`, onMessage, onError, quiet);\n    }\n    /**\n     * Subscribe to trajectory channel.\n     *\n     * @param {RealtimeMode} mode Realtime mode.\n     * @param {function(data: { content: RealtimeTrajectory })} onMessage Function called on each message of the channel.\n     * @param {function} onError Callback when the subscription fails.\n     * @param {boolean} [quiet=false] If true avoid to store the subscription in the subscriptions list.\n     * @public\n     */\n    subscribeTrajectory(mode, onMessage, onError = () => { }, quiet = false) {\n        this.unsubscribeTrajectory(onMessage);\n        let suffix = '';\n        if (this.version === '1') {\n            suffix = getModeSuffix(mode, RealtimeModes);\n        }\n        this.subscribe(`trajectory${suffix}`, onMessage, onError, quiet);\n    }\n    /**\n     * Unsubscribe both modes of a channel.\n     *\n     * @param {string} channel Name of the websocket channel to unsubscribe.\n     * @param {string} suffix Suffix to add to the channel name.\n     * @param {function} onMessage Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed.\n     * @public\n     */\n    unsubscribe(channel, suffix = '', onMessage) {\n        const suffixSchenatic = getModeSuffix(RealtimeModes.SCHEMATIC, RealtimeModes);\n        const suffixTopographic = getModeSuffix(RealtimeModes.TOPOGRAPHIC, RealtimeModes);\n        this.wsApi.unsubscribe(`${channel}${suffixSchenatic}${suffix || ''}`, onMessage);\n        this.wsApi.unsubscribe(`${channel}${suffixTopographic}${suffix || ''}`, onMessage);\n    }\n    /**\n     * Unsubscribe to deleted_vhicles channels.\n     * @param {function(data: { content: RealtimeTrainId })} onMessage Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed.\n     * @public\n     */\n    unsubscribeDeletedVehicles(onMessage) {\n        this.unsubscribe('deleted_vehicles', '', onMessage);\n    }\n    /**\n     * Unsubscribe from current departures channel.\n     * @param {number} stationId UIC of the station.\n     * @param {function(data: { content: RealtimeDeparture[] })} onMessage Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed.\n     * @deprecated Use RealtimeAPI.unsubscribeTimetabe instead.\n     */\n    unsubscribeDepartures(stationId, onMessage) {\n        this.unsubscribeTimetable(stationId, onMessage);\n    }\n    /**\n     * Unsubscribe disruptions.\n     * @param {RealtimeTenant} tenant Tenant's id\n     * @param {Function(data: { content: RealtimeNews[] })} onMessage Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed.\n     * @deprecated Use unsubscribeNewsticker instead.\n     */\n    unsubscribeDisruptions(tenant, onMessage) {\n        this.unsubscribeNewsticker(tenant, onMessage);\n    }\n    /**\n     * Unsubscribe to extra_geoms channel.\n     * @param {function(data: { content: RealtimeExtraGeom })} onMessage Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed.\n     */\n    unsubscribeExtraGeoms(onMessage) {\n        this.unsubscribe('extra_geoms', '', onMessage);\n    }\n    /**\n     * Unsubscribe from full_trajectory channel\n     *\n     * @param {string} id A vehicle id.\n     * @param {onFullTrajectoryMessageCallback} onMessage Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed.\n     * @public\n     */\n    unsubscribeFullTrajectory(id, onMessage) {\n        this.unsubscribe('full_trajectory', `_${id}`, onMessage);\n    }\n    /**\n     * Unsubscribe to healthcheck channel.\n     * @param {function(data: { content: string })} onMessage Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed.\n     */\n    unsubscribeHealthCheck(onMessage) {\n        this.unsubscribe('healthcheck', '', onMessage);\n    }\n    /**\n     * Unsubscribe disruptions.\n     * @param {RealtimeTenant} tenant Tenant's id\n     * @param {Function(data: { content: RealtimeNews[] })} onMessage Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed.\n     * @public\n     */\n    unsubscribeNewsticker(tenant, onMessage) {\n        this.unsubscribe(`${tenant}_newsticker`, '', onMessage);\n    }\n    /**\n     * Unsubscribe to stations channel.\n     * @param {function(data: { content: RealtimeStation })} onMessage The listener callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribe.\n     * @public\n     */\n    unsubscribeStations(onMessage) {\n        this.unsubscribe('station', '', onMessage);\n    }\n    /**\n     * Unsubscribe from stopsequence channel\n     *\n     * @param {string} id A vehicle id.\n     * @param {function(data: { content: RealtimeStopSequence[] })} onMessage Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed.\n     * @public\n     */\n    unsubscribeStopSequence(id, onMessage) {\n        this.unsubscribe(`stopsequence`, `_${id}`, onMessage);\n    }\n    /**\n     * Unsubscribe from current departures channel.\n     * @param {number} stationId UIC of the station.\n     * @param {function(data: { content: RealtimeDeparture[] })} onMessage Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed.\n     * @public\n     */\n    unsubscribeTimetable(stationId, onMessage) {\n        this.unsubscribe(`timetable_${stationId}`, '', onMessage);\n    }\n    /**\n     * Unsubscribe to trajectory channels.\n     * @param {function(data: { content: RealtimeTrajectory })} onMessage Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed.\n     * @public\n     */\n    unsubscribeTrajectory(onMessage) {\n        this.unsubscribe(`trajectory`, '', onMessage);\n    }\n}\nexport default RealtimeAPI;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/api/RealtimeAPI.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 103,
    "kind": "typedef",
    "name": "RealtimeMode",
    "memberof": "build/api/RealtimeAPI.js",
    "static": true,
    "longname": "build/api/RealtimeAPI.js~RealtimeMode",
    "access": "public",
    "description": "Enum for Realtime modes.",
    "lineNumber": 16,
    "unknown": [
      {
        "tagName": "@readonly",
        "tagValue": ""
      },
      {
        "tagName": "@enum",
        "tagValue": "{RealtimeMode}"
      }
    ],
    "properties": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "RAW",
        "description": "\"raw\""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "SCHEMATIC",
        "description": "\"schematic\""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "TOPOGRAPHIC",
        "description": "\"topographic\""
      }
    ],
    "type": {
      "types": [
        "string"
      ],
      "optional": false,
      "name": "RealtimeMode"
    }
  },
  {
    "__docId__": 104,
    "kind": "class",
    "name": "RealtimeAPI",
    "memberof": "build/api/RealtimeAPI.js",
    "static": true,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI",
    "access": "public",
    "export": true,
    "importPath": "mobility-toolbox-js/build/api/RealtimeAPI.js",
    "importStyle": "RealtimeAPI",
    "description": "This class provides convenience methods to use to the [geOps Realtime API](https://developer.geops.io/apis/realtime/).",
    "examples": [
      "import { RealtimeAPI } from 'mobility-toolbox-js/api';\n\nconst api = new RealtimeAPI({\n  apiKey: \"yourApiKey\",\n  bbox: [782001, 5888803, 923410, 5923660, 11, \"mots=rail\"],\n  // url: \"wss://api.geops.io/tracker-ws/v1/\",\n});\n\n// Open the websocket connection\napi.open();\n\n// Subscribe to channel\napi.subscribeTrajectory('topographic', (data) => {\n   console.log('Log trajectories:', JSON.stringify(data.content));\n});\n\n// Close the websocket connection\napi.close();"
    ],
    "lineNumber": 46,
    "interface": false
  },
  {
    "__docId__": 105,
    "kind": "get",
    "name": "bbox",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#bbox",
    "access": "public",
    "description": "The bounding box to receive data from.\\\nExample: [minX, minY, maxX, maxY, zoom, mots , gen_level, tenant, ...]\\\n&nbsp;\\\nWhere:\n- **minX**: a string representation of an integer (not a float) representing the minimal X coordinate (in EPSG:3857) of a bounding box\\\n&nbsp;\n- **minY**: a string representation of an integer (not a float) representing the minimal Y coordinate (in EPSG:3857) of a bounding box\\\n&nbsp;\n- **maxX**: a string representation of an integer (not a float) representing the maximal X coordinate (in EPSG:3857) of a bounding box\\\n&nbsp;\n- **maxY**: a string representation of an integer (not a float) representing the maximal Y coordinate (in EPSG:3857) of a bounding box\\\n&nbsp;\n- **zoom**: a string representation of an integer representing the zoom level (from 4 to 22). When zoom < 8 only the trains are displayed for performance reasons.\\\n&nbsp;\n- **mots**: A comma separated list of modes of transport. **Optional**.\\\n        Example: \"mots=rail,subway\".\\\n&nbsp;\n- **gen_level**: An integer representing the generalization level. **Optional**.\\\n             Example: \"gen_level=5\"\\\n&nbsp;\n- **tenant**: A string representing the tenant. **Optional**.\\\n          Example: \"tenant=sbb\"\\\n&nbsp;\n- ...: Any other values added to the bbox will be send to the server",
    "lineNumber": 84,
    "type": {
      "nullable": null,
      "types": [
        "string[]"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 106,
    "kind": "set",
    "name": "bbox",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#bbox",
    "access": "private",
    "description": null,
    "lineNumber": 87,
    "undocument": true
  },
  {
    "__docId__": 107,
    "kind": "member",
    "name": "_bbox",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#_bbox",
    "access": "private",
    "description": null,
    "lineNumber": 89,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 108,
    "kind": "get",
    "name": "buffer",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#buffer",
    "access": "private",
    "description": null,
    "lineNumber": 95,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 109,
    "kind": "set",
    "name": "buffer",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#buffer",
    "access": "private",
    "description": null,
    "lineNumber": 98,
    "undocument": true
  },
  {
    "__docId__": 110,
    "kind": "member",
    "name": "_buffer",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#_buffer",
    "access": "private",
    "description": null,
    "lineNumber": 100,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 111,
    "kind": "get",
    "name": "url",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#url",
    "access": "private",
    "description": null,
    "lineNumber": 106,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 112,
    "kind": "set",
    "name": "url",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#url",
    "access": "private",
    "description": null,
    "lineNumber": 109,
    "undocument": true
  },
  {
    "__docId__": 113,
    "kind": "member",
    "name": "_url",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#_url",
    "access": "private",
    "description": null,
    "lineNumber": 111,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 114,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#constructor",
    "access": "public",
    "description": "Constructor",
    "lineNumber": 127,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": "Options."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "options.apiKey",
        "description": "Access key for [geOps apis](https://developer.geops.io/)."
      },
      {
        "nullable": null,
        "types": [
          "string[]"
        ],
        "spread": false,
        "optional": false,
        "name": "options.bbox",
        "description": "The bounding box to receive data from."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "'wss://api.geops.io/tracker-ws/v1/'",
        "defaultRaw": "'wss://api.geops.io/tracker-ws/v1/'",
        "name": "options.url",
        "description": "Url of the [geOps Realtime API](https://developer.geops.io/apis/realtime/)."
      }
    ]
  },
  {
    "__docId__": 115,
    "kind": "member",
    "name": "version",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#version",
    "access": "private",
    "description": null,
    "lineNumber": 128,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 120,
    "kind": "member",
    "name": "pingIntervalMs",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#pingIntervalMs",
    "access": "private",
    "description": "Interval between PING request in ms.\nIf equal to 0,  no PING request are sent.",
    "lineNumber": 149,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 121,
    "kind": "member",
    "name": "reconnectTimeoutMs",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#reconnectTimeoutMs",
    "access": "private",
    "description": "Timeout in ms after an automatic reconnection when the websoscket has been closed by the server.",
    "lineNumber": 154,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 122,
    "kind": "member",
    "name": "wsApi",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#wsApi",
    "access": "private",
    "description": "The websocket helper class to connect the websocket.",
    "lineNumber": 158,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 123,
    "kind": "method",
    "name": "close",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#close",
    "access": "public",
    "description": "Close the websocket connection without reconnection.",
    "lineNumber": 165,
    "params": [],
    "return": null
  },
  {
    "__docId__": 124,
    "kind": "method",
    "name": "get",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#get",
    "access": "public",
    "description": "Send GET to a channel.",
    "lineNumber": 175,
    "params": [
      {
        "nullable": null,
        "types": [
          "string ",
          " WebSocketAPIParameters"
        ],
        "spread": false,
        "optional": false,
        "name": "channelOrParams",
        "description": "Name of the websocket channel to send GET or an object representing parameters to send"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<WebSocketAPIMessageEventData<?>>"
      ],
      "spread": false,
      "description": "A websocket response."
    }
  },
  {
    "__docId__": 125,
    "kind": "method",
    "name": "getFullTrajectory",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#getFullTrajectory",
    "access": "public",
    "description": "Get a full trajectory of a vehicule .",
    "lineNumber": 193,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "id",
        "description": "A vehicle id."
      },
      {
        "nullable": null,
        "types": [
          "RealtimeMode"
        ],
        "spread": false,
        "optional": false,
        "name": "mode",
        "description": "Realtime mode."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "generalizationLevel",
        "description": "The generalization level to request. Can be one of 5 (more generalized), 10, 30, 100, undefined (less generalized)."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<{data: { content: RealtimeFullTrajectory }}>"
      ],
      "spread": false,
      "description": "Return a full trajectory."
    }
  },
  {
    "__docId__": 126,
    "kind": "method",
    "name": "getStation",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#getStation",
    "access": "public",
    "description": "Return a station with a given uic number and a mode.",
    "lineNumber": 215,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "uic",
        "description": "UIC of the station."
      },
      {
        "nullable": null,
        "types": [
          "RealtimeMode"
        ],
        "spread": false,
        "optional": false,
        "name": "mode",
        "description": "Realtime mode."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<{data: { content: RealtimeStation }}>"
      ],
      "spread": false,
      "description": "A station."
    }
  },
  {
    "__docId__": 127,
    "kind": "method",
    "name": "getStations",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#getStations",
    "access": "public",
    "description": "Get the list of ststions available for a specifc mode. The promise is resolved every 100ms",
    "lineNumber": 229,
    "params": [
      {
        "nullable": null,
        "types": [
          "RealtimeMode"
        ],
        "spread": false,
        "optional": false,
        "name": "mode",
        "description": "Realtime mode."
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "timeout",
        "description": "= 100 Duration in ms between each promise resolve calls."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<RealtimeStation[]>"
      ],
      "spread": false,
      "description": "An array of stations."
    }
  },
  {
    "__docId__": 128,
    "kind": "method",
    "name": "getStopSequence",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#getStopSequence",
    "access": "public",
    "description": "Get the list of stops for this vehicle.",
    "lineNumber": 241,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "id",
        "description": "A vehicle id."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<{data: { content: RealtimeStopSequence[] }}>"
      ],
      "spread": false,
      "description": "Returns a stop sequence object."
    }
  },
  {
    "__docId__": 129,
    "kind": "method",
    "name": "getTrajectory",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#getTrajectory",
    "access": "public",
    "description": "Return a partial trajectory with a given id and a mode.",
    "lineNumber": 252,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "id",
        "description": "The identifier of a trajectory."
      },
      {
        "nullable": null,
        "types": [
          "RealtimeMode"
        ],
        "spread": false,
        "optional": false,
        "name": "mode",
        "description": "Realtime mode."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<{data: { content: RealtimeTrajectory }}>"
      ],
      "spread": false,
      "description": "A trajectory."
    }
  },
  {
    "__docId__": 130,
    "kind": "method",
    "name": "onClose",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#onClose",
    "access": "private",
    "description": "Callback when the websocket is closed by the server.\nIt auto reconnects after a timeout.",
    "lineNumber": 260,
    "params": [],
    "return": null
  },
  {
    "__docId__": 131,
    "kind": "member",
    "name": "reconnectTimeout",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#reconnectTimeout",
    "access": "private",
    "description": null,
    "lineNumber": 264,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 132,
    "kind": "method",
    "name": "onOpen",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#onOpen",
    "access": "private",
    "description": "Callback when the websocket is opened and ready.\nIt applies the bbox and the projection.",
    "lineNumber": 272,
    "params": [],
    "return": null
  },
  {
    "__docId__": 133,
    "kind": "member",
    "name": "pingInterval",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#pingInterval",
    "access": "private",
    "description": null,
    "lineNumber": 284,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 134,
    "kind": "method",
    "name": "open",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#open",
    "access": "public",
    "description": "Open the websocket connection.",
    "lineNumber": 294,
    "params": [],
    "return": null
  },
  {
    "__docId__": 135,
    "kind": "method",
    "name": "reset",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#reset",
    "access": "private",
    "description": "Unsubscribe trajectory and deleted_vehicles channels. To resubscribe you have to set a new BBOX.",
    "lineNumber": 306,
    "params": [],
    "return": null
  },
  {
    "__docId__": 136,
    "kind": "method",
    "name": "subscribe",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#subscribe",
    "access": "public",
    "description": "Subscribe to a channel.",
    "lineNumber": 318,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "channel",
        "description": "Name of the websocket channel to subscribe."
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "onSuccess",
        "description": "Callback when the subscription succeeds."
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "onError",
        "description": "Callback when the subscription fails."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "quiet",
        "description": "If true avoid to store the subscription in the subscriptions list."
      }
    ],
    "return": null
  },
  {
    "__docId__": 137,
    "kind": "method",
    "name": "subscribeDeletedVehicles",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#subscribeDeletedVehicles",
    "access": "public",
    "description": "Subscribe to deleted_vhicles channel.",
    "lineNumber": 333,
    "params": [
      {
        "nullable": null,
        "types": [
          "RealtimeMode"
        ],
        "spread": false,
        "optional": false,
        "name": "mode",
        "description": "Realtime mode."
      },
      {
        "nullable": null,
        "types": [
          "function(data: { content: RealtimeTrainId })"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed."
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "onError",
        "description": "Callback when the subscription fails."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "quiet",
        "description": "If true avoid to store the subscription in the subscriptions list."
      }
    ],
    "return": null
  },
  {
    "__docId__": 138,
    "kind": "method",
    "name": "subscribeDepartures",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#subscribeDepartures",
    "access": "private",
    "description": "Subscribe to departures channel of a given station.",
    "lineNumber": 350,
    "deprecated": "Use subscribeTimetable instead.",
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "stationId",
        "description": "UIC of the station."
      },
      {
        "nullable": null,
        "types": [
          "function(departures: RealtimeDeparture[])"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Function called on each message of the channel."
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "onError",
        "description": "Callback when the subscription fails."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "quiet",
        "description": "If true avoid to store the subscription in the subscriptions list."
      }
    ],
    "return": null
  },
  {
    "__docId__": 139,
    "kind": "method",
    "name": "subscribeDisruptions",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#subscribeDisruptions",
    "access": "private",
    "description": "Subscribe to the disruptions channel for tenant.",
    "lineNumber": 362,
    "deprecated": "Use subscribeNewsticker instead.",
    "params": [
      {
        "nullable": null,
        "types": [
          "RealtimeTenant"
        ],
        "spread": false,
        "optional": false,
        "name": "tenant",
        "description": "Tenant's id"
      },
      {
        "nullable": null,
        "types": [
          "function(data: { content: RealtimeNews[] })"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Function called on each message of the channel."
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "onError",
        "description": "Callback when the subscription fails."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "quiet",
        "description": "If true avoid to store the subscription in the subscriptions list."
      }
    ],
    "return": null
  },
  {
    "__docId__": 140,
    "kind": "method",
    "name": "subscribeExtraGeoms",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#subscribeExtraGeoms",
    "access": "private",
    "description": "Subscribe to extra_geoms channel.",
    "lineNumber": 372,
    "params": [
      {
        "nullable": null,
        "types": [
          "function(data: { content: RealtimeExtraGeom })"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Function called on each message of the channel."
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "onError",
        "description": "Callback when the subscription fails."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "quiet",
        "description": "If true avoid to store the subscription in the subscriptions list."
      }
    ],
    "return": null
  },
  {
    "__docId__": 141,
    "kind": "method",
    "name": "subscribeFullTrajectory",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#subscribeFullTrajectory",
    "access": "public",
    "description": "Subscribe to full_trajectory channel of a given vehicle.",
    "lineNumber": 385,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "id",
        "description": "A vehicle id."
      },
      {
        "nullable": null,
        "types": [
          "RealtimeMode"
        ],
        "spread": false,
        "optional": false,
        "name": "mode",
        "description": "Realtime mode."
      },
      {
        "nullable": null,
        "types": [
          "function(data:{content: RealtimeFullTrajectory})"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Function called on each message of the channel."
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "onError",
        "description": "Callback when the subscription fails."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "quiet",
        "description": "If true avoid to store the subscription in the subscriptions list."
      }
    ],
    "return": null
  },
  {
    "__docId__": 142,
    "kind": "method",
    "name": "subscribeHealthCheck",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#subscribeHealthCheck",
    "access": "private",
    "description": "Subscribe to healthcheck channel.",
    "lineNumber": 398,
    "params": [
      {
        "nullable": null,
        "types": [
          "function(data: { content: string })"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Callback when the subscribe to healthcheck channel succeeds."
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "onError",
        "description": "Callback when the subscription fails."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "quiet",
        "description": "If true avoid to store the subscription in the subscriptions list."
      }
    ],
    "return": null
  },
  {
    "__docId__": 143,
    "kind": "method",
    "name": "subscribeNewsticker",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#subscribeNewsticker",
    "access": "public",
    "description": "Subscribe to the newsticker channel for tenant.",
    "lineNumber": 410,
    "params": [
      {
        "nullable": null,
        "types": [
          "RealtimeTenant"
        ],
        "spread": false,
        "optional": false,
        "name": "tenant",
        "description": "Tenant's id"
      },
      {
        "nullable": null,
        "types": [
          "function(data: { content: RealtimeNews[] })"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Function called on each message of the channel."
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "onError",
        "description": "Callback when the subscription fails."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "quiet",
        "description": "If true avoid to store the subscription in the subscriptions list."
      }
    ],
    "return": null
  },
  {
    "__docId__": 144,
    "kind": "method",
    "name": "subscribeStations",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#subscribeStations",
    "access": "public",
    "description": "Subscribe to stations channel.\nOne message pro station.",
    "lineNumber": 423,
    "params": [
      {
        "nullable": null,
        "types": [
          "RealtimeMode"
        ],
        "spread": false,
        "optional": false,
        "name": "mode",
        "description": "Realtime mode."
      },
      {
        "nullable": null,
        "types": [
          "function(data: { content: RealtimeStation })"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Function called on each message of the channel."
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "onError",
        "description": "Callback when the subscription fails."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "quiet",
        "description": "If true avoid to store the subscription in the subscriptions list."
      }
    ],
    "return": null
  },
  {
    "__docId__": 145,
    "kind": "method",
    "name": "subscribeStopSequence",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#subscribeStopSequence",
    "access": "public",
    "description": "Subscribe to stopsequence channel of a given vehicle.",
    "lineNumber": 435,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "id",
        "description": "A vehicle id."
      },
      {
        "nullable": null,
        "types": [
          "function(data: { content: RealtimeStopSequence[] })"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Function called on each message of the channel."
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "onError",
        "description": "Callback when the subscription fails."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "quiet",
        "description": "If true avoid to store the subscription in the subscriptions list."
      }
    ],
    "return": null
  },
  {
    "__docId__": 146,
    "kind": "method",
    "name": "subscribeTimetable",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#subscribeTimetable",
    "access": "public",
    "description": "Subscribe to timetable channel of a given station.",
    "lineNumber": 447,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "stationId",
        "description": "UIC of the station."
      },
      {
        "nullable": null,
        "types": [
          "function(departures: RealtimeDeparture[])"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Function called on each message of the channel."
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "onError",
        "description": "Callback when the subscription fails."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "quiet",
        "description": "If true avoid to store the subscription in the subscriptions list."
      }
    ],
    "return": null
  },
  {
    "__docId__": 147,
    "kind": "method",
    "name": "subscribeTrajectory",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#subscribeTrajectory",
    "access": "public",
    "description": "Subscribe to trajectory channel.",
    "lineNumber": 459,
    "params": [
      {
        "nullable": null,
        "types": [
          "RealtimeMode"
        ],
        "spread": false,
        "optional": false,
        "name": "mode",
        "description": "Realtime mode."
      },
      {
        "nullable": null,
        "types": [
          "function(data: { content: RealtimeTrajectory })"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Function called on each message of the channel."
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "onError",
        "description": "Callback when the subscription fails."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "quiet",
        "description": "If true avoid to store the subscription in the subscriptions list."
      }
    ],
    "return": null
  },
  {
    "__docId__": 148,
    "kind": "method",
    "name": "unsubscribe",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#unsubscribe",
    "access": "public",
    "description": "Unsubscribe both modes of a channel.",
    "lineNumber": 475,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "channel",
        "description": "Name of the websocket channel to unsubscribe."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "suffix",
        "description": "Suffix to add to the channel name."
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed."
      }
    ],
    "return": null
  },
  {
    "__docId__": 149,
    "kind": "method",
    "name": "unsubscribeDeletedVehicles",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#unsubscribeDeletedVehicles",
    "access": "public",
    "description": "Unsubscribe to deleted_vhicles channels.",
    "lineNumber": 486,
    "params": [
      {
        "nullable": null,
        "types": [
          "function(data: { content: RealtimeTrainId })"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed."
      }
    ],
    "return": null
  },
  {
    "__docId__": 150,
    "kind": "method",
    "name": "unsubscribeDepartures",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#unsubscribeDepartures",
    "access": "private",
    "description": "Unsubscribe from current departures channel.",
    "lineNumber": 495,
    "deprecated": "Use RealtimeAPI.unsubscribeTimetabe instead.",
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "stationId",
        "description": "UIC of the station."
      },
      {
        "nullable": null,
        "types": [
          "function(data: { content: RealtimeDeparture[] })"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed."
      }
    ],
    "return": null
  },
  {
    "__docId__": 151,
    "kind": "method",
    "name": "unsubscribeDisruptions",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#unsubscribeDisruptions",
    "access": "private",
    "description": "Unsubscribe disruptions.",
    "lineNumber": 504,
    "deprecated": "Use unsubscribeNewsticker instead.",
    "params": [
      {
        "nullable": null,
        "types": [
          "RealtimeTenant"
        ],
        "spread": false,
        "optional": false,
        "name": "tenant",
        "description": "Tenant's id"
      },
      {
        "nullable": null,
        "types": [
          "Function(data: { content: RealtimeNews[] })"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed."
      }
    ],
    "return": null
  },
  {
    "__docId__": 152,
    "kind": "method",
    "name": "unsubscribeExtraGeoms",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#unsubscribeExtraGeoms",
    "access": "private",
    "description": "Unsubscribe to extra_geoms channel.",
    "lineNumber": 511,
    "params": [
      {
        "nullable": null,
        "types": [
          "function(data: { content: RealtimeExtraGeom })"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed."
      }
    ],
    "return": null
  },
  {
    "__docId__": 153,
    "kind": "method",
    "name": "unsubscribeFullTrajectory",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#unsubscribeFullTrajectory",
    "access": "public",
    "description": "Unsubscribe from full_trajectory channel",
    "lineNumber": 521,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "id",
        "description": "A vehicle id."
      },
      {
        "nullable": null,
        "types": [
          "onFullTrajectoryMessageCallback"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed."
      }
    ],
    "return": null
  },
  {
    "__docId__": 154,
    "kind": "method",
    "name": "unsubscribeHealthCheck",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#unsubscribeHealthCheck",
    "access": "private",
    "description": "Unsubscribe to healthcheck channel.",
    "lineNumber": 528,
    "params": [
      {
        "nullable": null,
        "types": [
          "function(data: { content: string })"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed."
      }
    ],
    "return": null
  },
  {
    "__docId__": 155,
    "kind": "method",
    "name": "unsubscribeNewsticker",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#unsubscribeNewsticker",
    "access": "public",
    "description": "Unsubscribe disruptions.",
    "lineNumber": 537,
    "params": [
      {
        "nullable": null,
        "types": [
          "RealtimeTenant"
        ],
        "spread": false,
        "optional": false,
        "name": "tenant",
        "description": "Tenant's id"
      },
      {
        "nullable": null,
        "types": [
          "Function(data: { content: RealtimeNews[] })"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed."
      }
    ],
    "return": null
  },
  {
    "__docId__": 156,
    "kind": "method",
    "name": "unsubscribeStations",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#unsubscribeStations",
    "access": "public",
    "description": "Unsubscribe to stations channel.",
    "lineNumber": 545,
    "params": [
      {
        "nullable": null,
        "types": [
          "function(data: { content: RealtimeStation })"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "The listener callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribe."
      }
    ],
    "return": null
  },
  {
    "__docId__": 157,
    "kind": "method",
    "name": "unsubscribeStopSequence",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#unsubscribeStopSequence",
    "access": "public",
    "description": "Unsubscribe from stopsequence channel",
    "lineNumber": 555,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "id",
        "description": "A vehicle id."
      },
      {
        "nullable": null,
        "types": [
          "function(data: { content: RealtimeStopSequence[] })"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed."
      }
    ],
    "return": null
  },
  {
    "__docId__": 158,
    "kind": "method",
    "name": "unsubscribeTimetable",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#unsubscribeTimetable",
    "access": "public",
    "description": "Unsubscribe from current departures channel.",
    "lineNumber": 564,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "stationId",
        "description": "UIC of the station."
      },
      {
        "nullable": null,
        "types": [
          "function(data: { content: RealtimeDeparture[] })"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed."
      }
    ],
    "return": null
  },
  {
    "__docId__": 159,
    "kind": "method",
    "name": "unsubscribeTrajectory",
    "memberof": "build/api/RealtimeAPI.js~RealtimeAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RealtimeAPI.js~RealtimeAPI#unsubscribeTrajectory",
    "access": "public",
    "description": "Unsubscribe to trajectory channels.",
    "lineNumber": 572,
    "params": [
      {
        "nullable": null,
        "types": [
          "function(data: { content: RealtimeTrajectory })"
        ],
        "spread": false,
        "optional": false,
        "name": "onMessage",
        "description": "Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed."
      }
    ],
    "return": null
  },
  {
    "__docId__": 160,
    "kind": "file",
    "name": "build/api/RoutingAPI.js",
    "content": "import HttpAPI from './HttpAPI';\n/**\n * This class provides convenience methods to use to the [geOps Routing API](https://developer.geops.io/apis/routing).\n *\n * @example\n * import { RoutingAPI } from 'mobility-toolbox-js';\n *\n * const api = new RoutingAPI({\n *   apiKey: [yourApiKey],\n *   // url: 'https://api.geops.io/routing/v1/',\n * });\n *\n * const route = await api.route({\n *   via: \"freiburg|basel%20sbb|bern\",\n *   mot: \"rail\"\n * });\n *\n * console.log('Log route:', JSON.stringify(route));\n *\n * @public\n */\nclass RoutingAPI extends HttpAPI {\n    /**\n     * Constructor\n     *\n     * @param {Object} options Options.\n     * @param {string} options.apiKey Access key for [geOps services](https://developer.geops.io/).\n     * @param {string} [options.url='https://api.geops.io/routing/v1/'] Service url.\n     * @public\n     */\n    constructor(options = {}) {\n        super(Object.assign({ url: 'https://api.geops.io/routing/v1/' }, options));\n    }\n    /**\n     * Calculate a route.\n     *\n     * @param {RoutingParameters} params Request parameters. See [geOps Routing API](https://developer.geops.io/apis/routing/).\n     * @param {FetchOptions} config Options for the fetch request.\n     * @return {Promise<RoutingResponse>} An GeoJSON feature collection with coordinates in [EPSG:4326](http://epsg.io/4326).\n     * @public\n     */\n    route(params, config) {\n        return this.fetch('', params, config);\n    }\n}\nexport default RoutingAPI;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/api/RoutingAPI.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 161,
    "kind": "class",
    "name": "RoutingAPI",
    "memberof": "build/api/RoutingAPI.js",
    "static": true,
    "longname": "build/api/RoutingAPI.js~RoutingAPI",
    "access": "public",
    "export": true,
    "importPath": "mobility-toolbox-js/build/api/RoutingAPI.js",
    "importStyle": "RoutingAPI",
    "description": "This class provides convenience methods to use to the [geOps Routing API](https://developer.geops.io/apis/routing).",
    "examples": [
      "import { RoutingAPI } from 'mobility-toolbox-js';\n\nconst api = new RoutingAPI({\n  apiKey: [yourApiKey],\n  // url: 'https://api.geops.io/routing/v1/',\n});\n\nconst route = await api.route({\n  via: \"freiburg|basel%20sbb|bern\",\n  mot: \"rail\"\n});\n\nconsole.log('Log route:', JSON.stringify(route));"
    ],
    "lineNumber": 22,
    "interface": false,
    "extends": [
      "build/api/HttpAPI.js~HttpAPI"
    ]
  },
  {
    "__docId__": 162,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "build/api/RoutingAPI.js~RoutingAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RoutingAPI.js~RoutingAPI#constructor",
    "access": "public",
    "description": "Constructor",
    "lineNumber": 31,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": "Options."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "options.apiKey",
        "description": "Access key for [geOps services](https://developer.geops.io/)."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "'https://api.geops.io/routing/v1/'",
        "defaultRaw": "'https://api.geops.io/routing/v1/'",
        "name": "options.url",
        "description": "Service url."
      }
    ]
  },
  {
    "__docId__": 163,
    "kind": "method",
    "name": "route",
    "memberof": "build/api/RoutingAPI.js~RoutingAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/RoutingAPI.js~RoutingAPI#route",
    "access": "public",
    "description": "Calculate a route.",
    "lineNumber": 42,
    "params": [
      {
        "nullable": null,
        "types": [
          "RoutingParameters"
        ],
        "spread": false,
        "optional": false,
        "name": "params",
        "description": "Request parameters. See [geOps Routing API](https://developer.geops.io/apis/routing/)."
      },
      {
        "nullable": null,
        "types": [
          "FetchOptions"
        ],
        "spread": false,
        "optional": false,
        "name": "config",
        "description": "Options for the fetch request."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<RoutingResponse>"
      ],
      "spread": false,
      "description": "An GeoJSON feature collection with coordinates in [EPSG:4326](http://epsg.io/4326)."
    }
  },
  {
    "__docId__": 164,
    "kind": "file",
    "name": "build/api/StopsAPI.js",
    "content": "import HttpAPI from './HttpAPI';\n/**\n * This class provides convenience methods to use to the [geOps Stops API](https://developer.geops.io/apis/stops/).\n *\n * @example\n * import { StopsAPI } from 'mobility-toolbox-js/api';\n *\n * const api = new StopsAPI({\n *   apiKey: [yourApiKey],\n *   // url: 'https://api.geops.io/stops/v1/',\n * });\n *\n * const stops = await api.search({ q:\"Bern\" });\n *\n * console.log('Log stops:', JSON.stringify(stops));\n *\n * @public\n */\nclass StopsAPI extends HttpAPI {\n    /**\n     * Constructor\n     *\n     * @param {Object} options Options.\n     * @param {string} options.apiKey Access key for [geOps apis](https://developer.geops.io/).\n     * @param {string} [options.url='https://api.geops.io/stops/v1/'] Url of the [geOps stops API](https://developer.geops.io/apis/stops/).\n     * @public\n     */\n    constructor(options = {}) {\n        super(Object.assign(Object.assign({}, options), { url: options.url || 'https://api.geops.io/stops/v1/' }));\n    }\n    /**\n     * Search for stops.\n     *\n     * @param {StopsParameters} params Request parameters. See [Stops API documentation](https://developer.geops.io/apis/stops).\n     * @param {FetchOptions} config Options for the fetch request.\n     * @returns {Promise<StopsResponse>} An GeoJSON feature collection with coordinates in [EPSG:4326](http://epsg.io/4326). See [Stops API documentation](https://developer.geops.io/apis/stops).\n     * @public\n     */\n    search(params, config) {\n        return this.fetch('', params, config);\n    }\n}\nexport default StopsAPI;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/api/StopsAPI.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 165,
    "kind": "class",
    "name": "StopsAPI",
    "memberof": "build/api/StopsAPI.js",
    "static": true,
    "longname": "build/api/StopsAPI.js~StopsAPI",
    "access": "public",
    "export": true,
    "importPath": "mobility-toolbox-js/build/api/StopsAPI.js",
    "importStyle": "StopsAPI",
    "description": "This class provides convenience methods to use to the [geOps Stops API](https://developer.geops.io/apis/stops/).",
    "examples": [
      "import { StopsAPI } from 'mobility-toolbox-js/api';\n\nconst api = new StopsAPI({\n  apiKey: [yourApiKey],\n  // url: 'https://api.geops.io/stops/v1/',\n});\n\nconst stops = await api.search({ q:\"Bern\" });\n\nconsole.log('Log stops:', JSON.stringify(stops));"
    ],
    "lineNumber": 19,
    "interface": false,
    "extends": [
      "build/api/HttpAPI.js~HttpAPI"
    ]
  },
  {
    "__docId__": 166,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "build/api/StopsAPI.js~StopsAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/StopsAPI.js~StopsAPI#constructor",
    "access": "public",
    "description": "Constructor",
    "lineNumber": 28,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": "Options."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "options.apiKey",
        "description": "Access key for [geOps apis](https://developer.geops.io/)."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "'https://api.geops.io/stops/v1/'",
        "defaultRaw": "'https://api.geops.io/stops/v1/'",
        "name": "options.url",
        "description": "Url of the [geOps stops API](https://developer.geops.io/apis/stops/)."
      }
    ]
  },
  {
    "__docId__": 167,
    "kind": "method",
    "name": "search",
    "memberof": "build/api/StopsAPI.js~StopsAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/StopsAPI.js~StopsAPI#search",
    "access": "public",
    "description": "Search for stops.",
    "lineNumber": 39,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<StopsResponse>} An GeoJSON feature collection with coordinates in [EPSG:4326](http://epsg.io/4326). See [Stops API documentation](https://developer.geops.io/apis/stops)."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "StopsParameters"
        ],
        "spread": false,
        "optional": false,
        "name": "params",
        "description": "Request parameters. See [Stops API documentation](https://developer.geops.io/apis/stops)."
      },
      {
        "nullable": null,
        "types": [
          "FetchOptions"
        ],
        "spread": false,
        "optional": false,
        "name": "config",
        "description": "Options for the fetch request."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<StopsResponse>"
      ],
      "spread": false,
      "description": "An GeoJSON feature collection with coordinates in [EPSG:4326](http://epsg.io/4326). See [Stops API documentation](https://developer.geops.io/apis/stops)."
    }
  },
  {
    "__docId__": 168,
    "kind": "file",
    "name": "build/api/WebSocketAPI.js",
    "content": "/**\n * Class used to facilitate connection to a WebSocketAPI and\n * also to manage properly messages send to the WebSocketAPI.\n * This class must not contain any specific implementation.\n * @private\n */\nclass WebSocketAPI {\n    constructor() {\n        this.defineProperties();\n    }\n    /**\n     * Get the websocket request string.\n     *\n     * @param {string} method Request mehtod {GET, SUB}.\n     * @param {WebSocketParameters} params Request parameters.\n     * @param {string} params.channel Channel name\n     * @param {string} [params.args] Request arguments\n     * @param {Number|string} [params.id] Request identifier\n     * @return {string} request string\n     * @private\n     */\n    static getRequestString(method, params = {}) {\n        let reqStr = `${method} ${params.channel}`;\n        reqStr += params.args ? ` ${params.args}` : '';\n        reqStr += params.id ? ` ${params.id}` : '';\n        return reqStr.trim();\n    }\n    addEvents(onMessage, onError) {\n        if (this.websocket) {\n            this.websocket.addEventListener('message', onMessage);\n            if (onError) {\n                this.websocket.addEventListener('error', onError);\n                this.websocket.addEventListener('close', onError);\n            }\n        }\n    }\n    /**\n     * Close the websocket definitively.\n     *\n     * @private\n     */\n    close() {\n        if (this.websocket && (this.open || this.connecting)) {\n            this.websocket.onclose = () => { };\n            this.websocket.close();\n            this.messagesOnOpen = [];\n        }\n    }\n    /**\n     * (Re)connect the websocket.\n     *\n     * @param {string} url Websocket url.\n     * @param {function} onOpen Callback called when the websocket connection is opened and before subscriptions of previous subscriptions.\n     * @private\n     */\n    connect(url, onOpen = () => { }) {\n        var _a;\n        // if no url specify, close the current websocket and do nothing.\n        if (!url) {\n            (_a = this.websocket) === null || _a === void 0 ? void 0 : _a.close();\n            return;\n        }\n        // Behavior when a websocket already exists.\n        if (this.websocket) {\n            // If the current websocket has the same url and is open or is connecting, do nothing.\n            if (this.websocket.url === url && (this.open || this.connecting)) {\n                return;\n            }\n            // If the current websocket has not the same url and is open or is connecting, close it.\n            if (this.websocket.url !== url && (this.open || this.connecting)) {\n                this.websocket.close();\n            }\n        }\n        this.websocket = new WebSocket(url);\n        if (!this.open) {\n            this.websocket.addEventListener('open', () => {\n                onOpen();\n                this.subscribePreviousSubscriptions();\n            });\n        }\n        else {\n            onOpen();\n            this.subscribePreviousSubscriptions();\n        }\n    }\n    defineProperties() {\n        Object.defineProperties(this, {\n            closed: {\n                get: () => !!(!this.websocket ||\n                    this.websocket.readyState === this.websocket.CLOSED),\n            },\n            closing: {\n                get: () => !!(this.websocket &&\n                    this.websocket.readyState === this.websocket.CLOSING),\n            },\n            connecting: {\n                get: () => !!(this.websocket &&\n                    this.websocket.readyState === this.websocket.CONNECTING),\n            },\n            /**\n             * Array of message to send on open.\n             * @type {Array<string>}\n             * @private\n             */\n            messagesOnOpen: {\n                value: [],\n                writable: true,\n            },\n            open: {\n                get: () => !!(this.websocket && this.websocket.readyState === this.websocket.OPEN),\n            },\n            /**\n             * List of channels subscribed.\n             * @type {WebSocketSubscribed}\n             * @private\n             */\n            subscribed: {\n                value: {},\n                writable: true,\n            },\n            /**\n             * Array of subscriptions.\n             * @type {Array<WebSocketSubscription>}\n             * @private\n             */\n            subscriptions: {\n                value: [],\n                writable: true,\n            },\n        });\n    }\n    /**\n     * Sends a get request to the websocket.\n     * The callback is called only once, when the response is received or when the call returns an error.\n     *\n     * @param {Object} params Parameters for the websocket get request\n     * @param {function} cb callback on message event\n     * @param {function} errorCb Callback on error and close event\n     * @private\n     */\n    get(params, cb, errorCb) {\n        const requestString = WebSocketAPI.getRequestString('GET', params);\n        this.send(requestString);\n        // We wrap the callbacks to make sure they are called only once.\n        const once = (callback) => \n        // @ts-expect-error : Spread error\n        (...args) => {\n            // @ts-expect-error : Spread error\n            callback(...args);\n            const index = this.requests.findIndex((request) => requestString === request.requestString && cb === request.cb);\n            const { onErrorCb, onMessageCb } = this.requests[index];\n            this.removeEvents(onMessageCb, onErrorCb);\n            this.requests.splice(index, 1);\n        };\n        const { onErrorCb, onMessageCb } = this.listen(params, once(cb), errorCb && once(errorCb));\n        // Store requests and callbacks to be able to remove them.\n        if (!this.requests) {\n            this.requests = [];\n        }\n        const index = this.requests.findIndex((request) => requestString === request.requestString && cb === request.cb);\n        const newReq = {\n            cb,\n            errorCb,\n            onErrorCb,\n            onMessageCb,\n            params,\n            requestString,\n        };\n        if (index > -1) {\n            this.requests[index] = newReq;\n        }\n        else {\n            this.requests.push(newReq);\n        }\n    }\n    /**\n     * Listen to websocket messages.\n     *\n     * @param {WebSocketParameters} params Parameters for the websocket get request\n     * @param {function} cb callback on listen\n     * @param {function} errorCb Callback on error\n     * @return {{onMessage: function, errorCb: function}} Object with onMessage and error callbacks\n     * @private\n     */\n    listen(params, cb, errorCb) {\n        // Remove the previous identical callback\n        this.unlisten(params, cb);\n        // We wrap the message callback to be sure we only propagate the message if it is for the right channel.\n        const onMessage = (evt) => {\n            let data;\n            try {\n                data = JSON.parse(evt.data);\n            }\n            catch (err) {\n                // eslint-disable-next-line no-console\n                console.error('WebSocket: unable to parse JSON data', err, evt.data);\n                return;\n            }\n            let source = params.channel;\n            source += params.args ? ` ${params.args}` : '';\n            // Buffer channel message return a list of other channels to propagate to proper callbacks.\n            let contents;\n            if (data.source === 'buffer') {\n                contents = data\n                    .content;\n            }\n            else {\n                contents = [data];\n            }\n            contents.forEach((content) => {\n                // Because of backend optimization, the last content is null.\n                if ((content === null || content === void 0 ? void 0 : content.source) === source &&\n                    (!params.id || params.id === data.client_reference)) {\n                    cb(content);\n                }\n            });\n        };\n        this.addEvents(onMessage, errorCb);\n        return { onErrorCb: errorCb, onMessageCb: onMessage };\n    }\n    removeEvents(onMessage, onError) {\n        if (this.websocket) {\n            this.websocket.removeEventListener('message', onMessage);\n            if (onError) {\n                this.websocket.removeEventListener('error', onError);\n                this.websocket.removeEventListener('close', onError);\n            }\n        }\n    }\n    /**\n     * Sends a message to the websocket.\n     *\n     * @param {message} message Message to send.\n     * @private\n     */\n    send(message) {\n        if (!this.websocket || this.closed || this.closing) {\n            return;\n        }\n        const send = () => {\n            var _a;\n            (_a = this.websocket) === null || _a === void 0 ? void 0 : _a.send(message);\n        };\n        if (!this.open) {\n            // This 'if' avoid sending 2 identical BBOX message on open,\n            if (!this.messagesOnOpen.includes(message)) {\n                this.messagesOnOpen.push(message);\n                this.websocket.addEventListener('open', () => {\n                    this.messagesOnOpen = [];\n                    send();\n                });\n                this.websocket.addEventListener('close', () => {\n                    this.messagesOnOpen = [];\n                });\n            }\n        }\n        else if (!this.messagesOnOpen.includes(message)) {\n            send();\n        }\n    }\n    /**\n     * Subscribe to a given channel.\n     *\n     * @param {Object} params Parameters for the websocket get request\n     * @param {function} cb callback on listen\n     * @param {function} errorCb Callback on error\n     * @param {boolean} quiet if false, no GET or SUB requests are send, only the callback is registered.\n     * @private\n     */\n    subscribe(params, cb, errorCb, quiet = false) {\n        const { onErrorCb, onMessageCb } = this.listen(params, cb, errorCb);\n        const reqStr = WebSocketAPI.getRequestString('', params);\n        const index = this.subscriptions.findIndex((subcr) => params.channel === subcr.params.channel && cb === subcr.cb);\n        const newSubscr = { cb, errorCb, onErrorCb, onMessageCb, params, quiet };\n        if (index > -1) {\n            this.subscriptions[index] = newSubscr;\n        }\n        else {\n            this.subscriptions.push(newSubscr);\n        }\n        if (!this.subscribed[reqStr]) {\n            if (!newSubscr.quiet) {\n                this.send(`GET ${reqStr}`);\n                this.send(`SUB ${reqStr}`);\n            }\n            this.subscribed[reqStr] = true;\n        }\n    }\n    /**\n     * After an auto reconnection we need to re-subscribe to the channels.\n     */\n    subscribePreviousSubscriptions() {\n        // Before to subscribe previous subscriptions we make sure they\n        // are all defined as unsubscribed, because this code is asynchrone\n        // and a subscription could have been added in between.\n        Object.keys(this.subscribed).forEach((key) => {\n            this.subscribed[key] = false;\n        });\n        // Subscribe all previous subscriptions.\n        [...this.subscriptions].forEach((s) => {\n            this.subscribe(s.params, s.cb, s.errorCb, s.quiet);\n        });\n    }\n    /**\n     * Unlisten websocket messages.\n     *\n     * @param {Object} params Parameters for the websocket get request.\n     * @param {function} cb Callback used when listen.\n     * @private\n     */\n    unlisten(params, cb) {\n        [...(this.subscriptions || []), ...(this.requests || [])]\n            .filter((s) => s.params.channel === params.channel && (!cb || s.cb === cb))\n            .forEach(({ onErrorCb, onMessageCb }) => {\n            this.removeEvents(onMessageCb, onErrorCb);\n        });\n    }\n    /**\n     * Unsubscribe from a channel.\n     * @param {string} source source to unsubscribe from\n     * @param {function} cb Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed.\n     * @private\n     */\n    unsubscribe(source, cb) {\n        const toRemove = this.subscriptions.filter((s) => s.params.channel === source && (!cb || s.cb === cb));\n        toRemove.forEach(({ onErrorCb, onMessageCb }) => {\n            this.removeEvents(onMessageCb, onErrorCb);\n        });\n        this.subscriptions = this.subscriptions.filter((s) => s.params.channel !== source || (cb && s.cb !== cb));\n        // If there is no more subscriptions to this channel, and the removed subscriptions didn't register quietly,\n        // we DEL it.\n        if (source &&\n            this.subscribed[source] &&\n            !this.subscriptions.find((s) => s.params.channel === source) &&\n            toRemove.find((subscr) => !subscr.quiet)) {\n            this.send(`DEL ${source}`);\n            this.subscribed[source] = false;\n        }\n    }\n}\nexport default WebSocketAPI;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/api/WebSocketAPI.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 169,
    "kind": "class",
    "name": "WebSocketAPI",
    "memberof": "build/api/WebSocketAPI.js",
    "static": true,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/api/WebSocketAPI.js",
    "importStyle": "WebSocketAPI",
    "description": "Class used to facilitate connection to a WebSocketAPI and\nalso to manage properly messages send to the WebSocketAPI.\nThis class must not contain any specific implementation.",
    "lineNumber": 7,
    "interface": false
  },
  {
    "__docId__": 170,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "build/api/WebSocketAPI.js~WebSocketAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI#constructor",
    "access": "private",
    "description": null,
    "lineNumber": 8,
    "undocument": true
  },
  {
    "__docId__": 171,
    "kind": "method",
    "name": "getRequestString",
    "memberof": "build/api/WebSocketAPI.js~WebSocketAPI",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI.getRequestString",
    "access": "private",
    "description": "Get the websocket request string.",
    "lineNumber": 22,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "method",
        "description": "Request mehtod {GET, SUB}."
      },
      {
        "nullable": null,
        "types": [
          "WebSocketParameters"
        ],
        "spread": false,
        "optional": false,
        "name": "params",
        "description": "Request parameters."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "params.channel",
        "description": "Channel name"
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "name": "params.args",
        "description": "Request arguments"
      },
      {
        "nullable": null,
        "types": [
          "Number",
          "string"
        ],
        "spread": false,
        "optional": true,
        "name": "params.id",
        "description": "Request identifier"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "request string"
    }
  },
  {
    "__docId__": 172,
    "kind": "method",
    "name": "addEvents",
    "memberof": "build/api/WebSocketAPI.js~WebSocketAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI#addEvents",
    "access": "private",
    "description": null,
    "lineNumber": 28,
    "undocument": true,
    "params": [
      {
        "name": "onMessage",
        "types": [
          "*"
        ]
      },
      {
        "name": "onError",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 173,
    "kind": "method",
    "name": "close",
    "memberof": "build/api/WebSocketAPI.js~WebSocketAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI#close",
    "access": "private",
    "description": "Close the websocket definitively.",
    "lineNumber": 42,
    "params": [],
    "return": null
  },
  {
    "__docId__": 174,
    "kind": "member",
    "name": "messagesOnOpen",
    "memberof": "build/api/WebSocketAPI.js~WebSocketAPI",
    "static": false,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI#messagesOnOpen",
    "access": "private",
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 175,
    "kind": "method",
    "name": "connect",
    "memberof": "build/api/WebSocketAPI.js~WebSocketAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI#connect",
    "access": "private",
    "description": "(Re)connect the websocket.",
    "lineNumber": 56,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "url",
        "description": "Websocket url."
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "onOpen",
        "description": "Callback called when the websocket connection is opened and before subscriptions of previous subscriptions."
      }
    ],
    "return": null
  },
  {
    "__docId__": 176,
    "kind": "member",
    "name": "websocket",
    "memberof": "build/api/WebSocketAPI.js~WebSocketAPI",
    "static": false,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI#websocket",
    "access": "private",
    "description": null,
    "lineNumber": 74,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 177,
    "kind": "method",
    "name": "defineProperties",
    "memberof": "build/api/WebSocketAPI.js~WebSocketAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI#defineProperties",
    "access": "private",
    "description": null,
    "lineNumber": 86,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 178,
    "kind": "method",
    "name": "get",
    "memberof": "build/api/WebSocketAPI.js~WebSocketAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI#get",
    "access": "private",
    "description": "Sends a get request to the websocket.\nThe callback is called only once, when the response is received or when the call returns an error.",
    "lineNumber": 141,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "params",
        "description": "Parameters for the websocket get request"
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "cb",
        "description": "callback on message event"
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "errorCb",
        "description": "Callback on error and close event"
      }
    ],
    "return": null
  },
  {
    "__docId__": 179,
    "kind": "member",
    "name": "requests",
    "memberof": "build/api/WebSocketAPI.js~WebSocketAPI",
    "static": false,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI#requests",
    "access": "private",
    "description": null,
    "lineNumber": 158,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 180,
    "kind": "method",
    "name": "listen",
    "memberof": "build/api/WebSocketAPI.js~WebSocketAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI#listen",
    "access": "private",
    "description": "Listen to websocket messages.",
    "lineNumber": 185,
    "params": [
      {
        "nullable": null,
        "types": [
          "WebSocketParameters"
        ],
        "spread": false,
        "optional": false,
        "name": "params",
        "description": "Parameters for the websocket get request"
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "cb",
        "description": "callback on listen"
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "errorCb",
        "description": "Callback on error"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "{onMessage: function, errorCb: function}"
      ],
      "spread": false,
      "description": "Object with onMessage and error callbacks"
    }
  },
  {
    "__docId__": 181,
    "kind": "method",
    "name": "removeEvents",
    "memberof": "build/api/WebSocketAPI.js~WebSocketAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI#removeEvents",
    "access": "private",
    "description": null,
    "lineNumber": 221,
    "undocument": true,
    "params": [
      {
        "name": "onMessage",
        "types": [
          "*"
        ]
      },
      {
        "name": "onError",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 182,
    "kind": "method",
    "name": "send",
    "memberof": "build/api/WebSocketAPI.js~WebSocketAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI#send",
    "access": "private",
    "description": "Sends a message to the websocket.",
    "lineNumber": 236,
    "params": [
      {
        "nullable": null,
        "types": [
          "message"
        ],
        "spread": false,
        "optional": false,
        "name": "message",
        "description": "Message to send."
      }
    ],
    "return": null
  },
  {
    "__docId__": 185,
    "kind": "method",
    "name": "subscribe",
    "memberof": "build/api/WebSocketAPI.js~WebSocketAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI#subscribe",
    "access": "private",
    "description": "Subscribe to a given channel.",
    "lineNumber": 270,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "params",
        "description": "Parameters for the websocket get request"
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "cb",
        "description": "callback on listen"
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "errorCb",
        "description": "Callback on error"
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "quiet",
        "description": "if false, no GET or SUB requests are send, only the callback is registered."
      }
    ],
    "return": null
  },
  {
    "__docId__": 186,
    "kind": "method",
    "name": "subscribePreviousSubscriptions",
    "memberof": "build/api/WebSocketAPI.js~WebSocketAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI#subscribePreviousSubscriptions",
    "access": "private",
    "description": "After an auto reconnection we need to re-subscribe to the channels.",
    "lineNumber": 292,
    "params": [],
    "return": null
  },
  {
    "__docId__": 187,
    "kind": "method",
    "name": "unlisten",
    "memberof": "build/api/WebSocketAPI.js~WebSocketAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI#unlisten",
    "access": "private",
    "description": "Unlisten websocket messages.",
    "lineNumber": 311,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "params",
        "description": "Parameters for the websocket get request."
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "cb",
        "description": "Callback used when listen."
      }
    ],
    "return": null
  },
  {
    "__docId__": 188,
    "kind": "method",
    "name": "unsubscribe",
    "memberof": "build/api/WebSocketAPI.js~WebSocketAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI#unsubscribe",
    "access": "private",
    "description": "Unsubscribe from a channel.",
    "lineNumber": 324,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "source",
        "description": "source to unsubscribe from"
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "cb",
        "description": "Callback function to unsubscribe. If null all subscriptions for the channel will be unsubscribed."
      }
    ],
    "return": null
  },
  {
    "__docId__": 189,
    "kind": "member",
    "name": "subscriptions",
    "memberof": "build/api/WebSocketAPI.js~WebSocketAPI",
    "static": false,
    "longname": "build/api/WebSocketAPI.js~WebSocketAPI#subscriptions",
    "access": "private",
    "description": null,
    "lineNumber": 329,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 190,
    "kind": "file",
    "name": "build/api/index.js",
    "content": "export { default as RealtimeAPI, RealtimeModes } from './RealtimeAPI';\nexport { default as RoutingAPI } from './RoutingAPI';\nexport { default as StopsAPI } from './StopsAPI';\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/api/index.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 191,
    "kind": "file",
    "name": "build/api/typedefs.js",
    "content": "// /**\n//  * @typedef {Object} Departure\n//  * @property {number} time Timestamp in ms.\n//  * @property {boolean} no_stop_between\n//  * @property {number} train_number\n//  * @property {string[]} to\n//  * @property {number} ris_aimed_time Timestamp in ms.\n//  * @property {number} updated_at Timestamp in ms.\n//  * @property {boolean} new_to\n//  * @property {number} min_arrival_time Timestamp in ms.\n//  * @property {string[]} next_stoppoints List of next stops. Like value in at_station_ds100.\n//  * @property {number} ris_estimated_time Timestamp in ms.\n//  * @property {NetworkLine} line\n//  * @property {boolean} has_fzo if true this departure has realtime data.\n//  * @property {number} train_id\n//  * @property {string} platform\n//  * @property {?*} state\n//  * @property {number} fzo_estimated_time Timestamp in ms.\n//  * @property {?*} formation\n//  * @property {?*} no_stop_till\n//  * @property {number} train_type\n//  * @property {number} call_id\n//  * @property {string} created_at Timestamp in ms.\n//  * @property {string} at_station_ds100\n//  * @property {number} timediff Timestamp in ms.\n//  *\n//  */\n/**\n * @typedef {GeoJSONFeature} Station\n * @property {StationProperties} properties Returns the station's properties.\n * @property {GeoJSONPoint} geometry Returns a point.\n */\n/**\n * @typedef {Object} StationProperties\n * @property {Transfer[]} transfers\n * @property {boolean} elevatorOutOfOrder\n * @property {number} uic\n * @property {string} name\n * @property {NetworkLine[]} networkLines\n * @property {boolean} hasElevator\n * @property {boolean} hasZOB\n * @property {boolean} hasAccessibility\n * @property {string} type\n */\n/**\n * @typedef {Object} NetworkLine\n * @property {number} id Identifier of the line.\n * @property {string} color Color of the line (CSS color string).\n * @property {string} stroke Stroke color of the line (CSS color string).\n * @property {string} name Name of the line.\n * @property {string} text_color  Text color of the line  (CSS color string).\n */\n/**\n * @typedef {Object} Transfer\n * @property {string} mot Mode of transportation (ex: U-Bahn).\n * @property {string[]} lines Array of lines name (ex: [\"U4\", \"U5\"]).\n */\n// These lines is to block TypeScript to add \"use strict;\" in the outputed file.\nconst dummy = () => { };\nexport default dummy;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/api/typedefs.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 192,
    "kind": "typedef",
    "name": "Station",
    "memberof": "build/api/typedefs.js",
    "static": true,
    "longname": "build/api/typedefs.js~Station",
    "access": "private",
    "description": "",
    "properties": [
      {
        "nullable": null,
        "types": [
          "StationProperties"
        ],
        "spread": false,
        "optional": false,
        "name": "properties",
        "description": "Returns the station's properties."
      },
      {
        "nullable": null,
        "types": [
          "GeoJSONPoint"
        ],
        "spread": false,
        "optional": false,
        "name": "geometry",
        "description": "Returns a point."
      }
    ],
    "type": {
      "types": [
        "GeoJSONFeature"
      ],
      "optional": false,
      "name": "Station"
    }
  },
  {
    "__docId__": 193,
    "kind": "typedef",
    "name": "StationProperties",
    "memberof": "build/api/typedefs.js",
    "static": true,
    "longname": "build/api/typedefs.js~StationProperties",
    "access": "private",
    "description": "",
    "properties": [
      {
        "nullable": null,
        "types": [
          "Transfer[]"
        ],
        "spread": false,
        "optional": false,
        "name": "transfers",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "elevatorOutOfOrder",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "uic",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "NetworkLine[]"
        ],
        "spread": false,
        "optional": false,
        "name": "networkLines",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "hasElevator",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "hasZOB",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "hasAccessibility",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "StationProperties"
    }
  },
  {
    "__docId__": 194,
    "kind": "typedef",
    "name": "NetworkLine",
    "memberof": "build/api/typedefs.js",
    "static": true,
    "longname": "build/api/typedefs.js~NetworkLine",
    "access": "private",
    "description": "",
    "properties": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "id",
        "description": "Identifier of the line."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "color",
        "description": "Color of the line (CSS color string)."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "stroke",
        "description": "Stroke color of the line (CSS color string)."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "Name of the line."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "text_color",
        "description": "Text color of the line  (CSS color string)."
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "NetworkLine"
    }
  },
  {
    "__docId__": 195,
    "kind": "typedef",
    "name": "Transfer",
    "memberof": "build/api/typedefs.js",
    "static": true,
    "longname": "build/api/typedefs.js~Transfer",
    "access": "private",
    "description": "",
    "lineNumber": 59,
    "properties": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "mot",
        "description": "Mode of transportation (ex: U-Bahn)."
      },
      {
        "nullable": null,
        "types": [
          "string[]"
        ],
        "spread": false,
        "optional": false,
        "name": "lines",
        "description": "Array of lines name (ex: [\"U4\", \"U5\"])."
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "Transfer"
    }
  },
  {
    "__docId__": 196,
    "kind": "file",
    "name": "build/common/controls/StopFinderControlCommon.js",
    "content": "import { StopsAPI } from '../../api';\n/**\n * A class representing a stop finder control to display on map.\n * This class only draw the html elements.\n * The geographic logic must be implemented by subclasses.\n *\n * @private\n */\nclass StopFinderControlCommon {\n    /**\n     * Constructor.\n     *\n     * @param {Object} options Options\n     * @param {HTMLElement} options.element HTML element where to attach input and suggestions.\n     * @param {string} options.apiKey Access key for [geOps services](https://developer.geops.io/). See StopsAPI.\n     * @param {string} [options.url='https://api.geops.io/stops/v1/'] Stops service url. See StopsAPI.\n     * @param {string} [options.placeholder='Search for a stop...'] Input field placeholder.\n     * @param {StopsSearchParams} [options.apiParams={ limit: 20 }] Request parameters. See [Stops service documentation](https://developer.geops.io/apis/5dcbd702a256d90001cf1361/).\n     */\n    constructor(options) {\n        const { apiKey, apiParams, placeholder, url } = options || {};\n        this.apiParams = Object.assign({ limit: 20 }, (apiParams || {}));\n        this.placeholder = placeholder || 'Search for a stop...';\n        const apiOptions = { apiKey };\n        if (url) {\n            apiOptions.url = url;\n        }\n        this.api = new StopsAPI(apiOptions);\n        this.abortController = new AbortController();\n        this.createElement(options);\n        this.options = options;\n    }\n    /**\n     * Clear the search field and close the control.\n     */\n    clear() {\n        if (!this.suggestionsElt || !this.inputElt || !this.clearElt) {\n            return;\n        }\n        this.inputElt.value = '';\n        this.suggestionsElt.innerHTML = '';\n        this.clearElt.style.display = 'none';\n    }\n    createElement({ element }) {\n        // Create input element\n        this.inputElt = document.createElement('input');\n        this.inputElt.type = 'text';\n        this.inputElt.placeholder = this.placeholder;\n        this.inputElt.autocomplete = 'off';\n        this.inputElt.onkeyup = (evt) => {\n            var _a;\n            (_a = this.abortController) === null || _a === void 0 ? void 0 : _a.abort();\n            this.abortController = new AbortController();\n            // @ts-expect-error - Improve ts\n            this.search(evt.target.value, this.abortController);\n        };\n        Object.assign(this.inputElt.style, {\n            padding: '10px 30px 10px 10px',\n        });\n        element.appendChild(this.inputElt);\n        // Create suggestions list element\n        this.suggestionsElt = document.createElement('div');\n        Object.assign(this.suggestionsElt.style, {\n            backgroundColor: 'white',\n            cursor: 'pointer',\n            overflowY: 'auto',\n        });\n        element.appendChild(this.suggestionsElt);\n        this.clearElt = document.createElement('div');\n        Object.assign(this.clearElt.style, {\n            cursor: 'pointer',\n            display: 'none',\n            fontSize: '200%',\n            padding: '0 10px',\n            position: 'absolute',\n            right: '0',\n        });\n        this.clearElt.innerHTML = '×';\n        this.clearElt.onclick = () => this.clear();\n        element.appendChild(this.clearElt);\n    }\n    render(featureCollection) {\n        const suggestions = (featureCollection === null || featureCollection === void 0 ? void 0 : featureCollection.features) || [];\n        if (!this.suggestionsElt) {\n            return;\n        }\n        this.suggestionsElt.style.display = suggestions.length ? 'block' : 'none';\n        this.suggestionsElt.innerHTML = '';\n        suggestions.forEach((suggestion) => {\n            var _a, _b;\n            const suggElt = document.createElement('div');\n            suggElt.innerHTML = (_a = suggestion === null || suggestion === void 0 ? void 0 : suggestion.properties) === null || _a === void 0 ? void 0 : _a.name;\n            suggElt.onclick = (evt) => {\n                var _a, _b;\n                (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.onSuggestionClick) === null || _b === void 0 ? void 0 : _b.call(_a, suggestion, evt);\n            };\n            Object.assign(suggElt.style, {\n                padding: '5px 12px',\n            });\n            (_b = this.suggestionsElt) === null || _b === void 0 ? void 0 : _b.appendChild(suggElt);\n        });\n    }\n    /**\n     * Launch a search.\n     *\n     * @param {String} q The query to search for.\n     * @param {AbortController} abortController Abort controller used to cancel the request.\n     * @return {Promise<Array<GeoJSONFeature>>} An array of GeoJSON features with coordinates in [EPSG:4326](http://epsg.io/4326).\n     */\n    search(q, abortController) {\n        if (q !== undefined || q !== null) {\n            this.apiParams.q = q;\n        }\n        if (this.clearElt) {\n            this.clearElt.style.display = 'block';\n        }\n        return this.api\n            .search(this.apiParams, abortController && { signal: abortController.signal })\n            .then((data) => {\n            this.render(data);\n        })\n            .catch(() => {\n            this.render();\n        });\n    }\n}\nexport default StopFinderControlCommon;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/controls/StopFinderControlCommon.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 197,
    "kind": "class",
    "name": "StopFinderControlCommon",
    "memberof": "build/common/controls/StopFinderControlCommon.js",
    "static": true,
    "longname": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/controls/StopFinderControlCommon.js",
    "importStyle": "StopFinderControlCommon",
    "description": "A class representing a stop finder control to display on map.\nThis class only draw the html elements.\nThe geographic logic must be implemented by subclasses.",
    "lineNumber": 9,
    "interface": false
  },
  {
    "__docId__": 198,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon#constructor",
    "access": "private",
    "description": "Constructor.",
    "lineNumber": 20,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": "Options"
      },
      {
        "nullable": null,
        "types": [
          "HTMLElement"
        ],
        "spread": false,
        "optional": false,
        "name": "options.element",
        "description": "HTML element where to attach input and suggestions."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "options.apiKey",
        "description": "Access key for [geOps services](https://developer.geops.io/). See StopsAPI."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "'https://api.geops.io/stops/v1/'",
        "defaultRaw": "'https://api.geops.io/stops/v1/'",
        "name": "options.url",
        "description": "Stops service url. See StopsAPI."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "'Search for a stop...'",
        "defaultRaw": "'Search for a stop...'",
        "name": "options.placeholder",
        "description": "Input field placeholder."
      },
      {
        "nullable": null,
        "types": [
          "StopsSearchParams"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{ limit: 20 }",
        "defaultRaw": "{ limit: 20 }",
        "name": "options.apiParams",
        "description": "Request parameters. See [Stops service documentation](https://developer.geops.io/apis/5dcbd702a256d90001cf1361/)."
      }
    ]
  },
  {
    "__docId__": 199,
    "kind": "member",
    "name": "apiParams",
    "memberof": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon",
    "static": false,
    "longname": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon#apiParams",
    "access": "private",
    "description": null,
    "lineNumber": 22,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 200,
    "kind": "member",
    "name": "placeholder",
    "memberof": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon",
    "static": false,
    "longname": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon#placeholder",
    "access": "private",
    "description": null,
    "lineNumber": 23,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 201,
    "kind": "member",
    "name": "api",
    "memberof": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon",
    "static": false,
    "longname": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon#api",
    "access": "private",
    "description": null,
    "lineNumber": 28,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 202,
    "kind": "member",
    "name": "abortController",
    "memberof": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon",
    "static": false,
    "longname": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon#abortController",
    "access": "private",
    "description": null,
    "lineNumber": 29,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 203,
    "kind": "member",
    "name": "options",
    "memberof": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon",
    "static": false,
    "longname": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon#options",
    "access": "private",
    "description": null,
    "lineNumber": 31,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 204,
    "kind": "method",
    "name": "clear",
    "memberof": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon#clear",
    "access": "private",
    "description": "Clear the search field and close the control.",
    "lineNumber": 36,
    "params": [],
    "return": null
  },
  {
    "__docId__": 205,
    "kind": "method",
    "name": "createElement",
    "memberof": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon#createElement",
    "access": "private",
    "description": null,
    "lineNumber": 44,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"element\": *}"
        ],
        "defaultRaw": {
          "element": null
        },
        "defaultValue": "{\"element\":null}"
      }
    ],
    "return": null
  },
  {
    "__docId__": 206,
    "kind": "member",
    "name": "inputElt",
    "memberof": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon",
    "static": false,
    "longname": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon#inputElt",
    "access": "private",
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 208,
    "kind": "member",
    "name": "suggestionsElt",
    "memberof": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon",
    "static": false,
    "longname": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon#suggestionsElt",
    "access": "private",
    "description": null,
    "lineNumber": 62,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 209,
    "kind": "member",
    "name": "clearElt",
    "memberof": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon",
    "static": false,
    "longname": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon#clearElt",
    "access": "private",
    "description": null,
    "lineNumber": 69,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 210,
    "kind": "method",
    "name": "render",
    "memberof": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon#render",
    "access": "private",
    "description": null,
    "lineNumber": 82,
    "undocument": true,
    "params": [
      {
        "name": "featureCollection",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 211,
    "kind": "method",
    "name": "search",
    "memberof": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/controls/StopFinderControlCommon.js~StopFinderControlCommon#search",
    "access": "private",
    "description": "Launch a search.",
    "lineNumber": 110,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "q",
        "description": "The query to search for."
      },
      {
        "nullable": null,
        "types": [
          "AbortController"
        ],
        "spread": false,
        "optional": false,
        "name": "abortController",
        "description": "Abort controller used to cancel the request."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Array<GeoJSONFeature>>"
      ],
      "spread": false,
      "description": "An array of GeoJSON features with coordinates in [EPSG:4326](http://epsg.io/4326)."
    }
  },
  {
    "__docId__": 212,
    "kind": "file",
    "name": "build/common/index.js",
    "content": "export * from './styles';\nexport * from './utils';\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/index.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 213,
    "kind": "file",
    "name": "build/common/styles/index.js",
    "content": "export { default as realtimeDefaultStyle } from './realtimeDefaultStyle';\nexport { default as realtimeDelayStyle } from './realtimeDelayStyle';\nexport { default as realtimeSimpleStyle } from './realtimeSimpleStyle';\nexport * from './realtimeDefaultStyle';\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/styles/index.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 214,
    "kind": "file",
    "name": "build/common/styles/realtimeDefaultStyle.js",
    "content": "import createCanvas from '../utils/createCanvas';\nconst cacheDelayBg = {};\n/**\n * Draw circle delay background\n *\n * @private\n */\nexport const getDelayBgCanvas = (origin, radius, color) => {\n    const key = `${origin}, ${radius}, ${color}`;\n    if (!cacheDelayBg[key]) {\n        const canvas = createCanvas(origin * 2, origin * 2);\n        if (canvas) {\n            const ctx = canvas.getContext('2d');\n            if (!ctx) {\n                return null;\n            }\n            ctx.beginPath();\n            ctx.arc(origin, origin, radius, 0, 2 * Math.PI, false);\n            ctx.fillStyle = color;\n            ctx.filter = 'blur(1px)';\n            ctx.fill();\n            cacheDelayBg[key] = canvas;\n        }\n    }\n    return cacheDelayBg[key];\n};\nconst cacheDelayText = {};\n/**\n * Draw delay text\n *\n * @private\n */\nexport const getDelayTextCanvas = (text, fontSize, font, delayColor, delayOutlineColor = '#000', pixelRatio = 1) => {\n    const key = `${text}, ${font}, ${delayColor}, ${delayOutlineColor}, ${pixelRatio}`;\n    if (!cacheDelayText[key]) {\n        const canvas = createCanvas(Math.ceil(text.length * fontSize), Math.ceil(fontSize + 8 * pixelRatio));\n        if (canvas) {\n            const ctx = canvas.getContext('2d');\n            if (!ctx) {\n                return null;\n            }\n            ctx.font = font;\n            ctx.textAlign = 'left';\n            ctx.textBaseline = 'middle';\n            ctx.font = font;\n            ctx.fillStyle = delayColor;\n            ctx.strokeStyle = delayOutlineColor;\n            ctx.lineWidth = 1.5 * pixelRatio;\n            ctx.strokeText(text, 0, fontSize);\n            ctx.fillText(text, 0, fontSize);\n            cacheDelayText[key] = canvas;\n        }\n    }\n    return cacheDelayText[key];\n};\nconst cacheCircle = {};\n/**\n * Draw colored circle with black border\n *\n * @private\n */\nexport const getCircleCanvas = (origin, radius, color, hasStroke, hasDash, pixelRatio) => {\n    const key = `${origin}, ${radius}, ${color}, ${hasStroke},  ${hasDash}, ${pixelRatio}`;\n    if (!cacheCircle[key]) {\n        const canvas = createCanvas(origin * 2, origin * 2);\n        if (canvas) {\n            const ctx = canvas.getContext('2d');\n            if (!ctx) {\n                return null;\n            }\n            ctx.fillStyle = color;\n            if (hasStroke) {\n                ctx.lineWidth = 1 * pixelRatio;\n                ctx.strokeStyle = '#000000';\n            }\n            ctx.beginPath();\n            ctx.arc(origin, origin, radius, 0, 2 * Math.PI, false);\n            ctx.fill();\n            if (hasDash) {\n                ctx.setLineDash([5, 3]);\n            }\n            if (hasStroke) {\n                ctx.stroke();\n            }\n            cacheCircle[key] = canvas;\n        }\n    }\n    return cacheCircle[key];\n};\nconst cacheText = {};\n/**\n * Draw text in the circle\n *\n * @private\n */\nexport const getTextCanvas = (text, origin, textSize, fillColor, strokeColor, hasStroke, pixelRatio, getTextFont) => {\n    const key = `${text}, ${origin}, ${textSize}, ${fillColor},${strokeColor}, ${hasStroke}, ${pixelRatio}`;\n    if (!cacheText[key]) {\n        const canvas = createCanvas(origin * 2, origin * 2);\n        if (canvas) {\n            const ctx = canvas.getContext('2d');\n            if (!ctx) {\n                return null;\n            }\n            // Draw a stroke to the text only if a provider provides realtime but we don't use it.\n            if (hasStroke) {\n                ctx.save();\n                ctx.textBaseline = 'middle';\n                ctx.textAlign = 'center';\n                ctx.font = getTextFont(textSize + 2, text);\n                ctx.strokeStyle = strokeColor;\n                ctx.strokeText(text, origin, origin);\n                ctx.restore();\n            }\n            // Draw a text\n            ctx.textBaseline = 'middle';\n            ctx.textAlign = 'center';\n            ctx.fillStyle = fillColor;\n            ctx.font = getTextFont(textSize, text);\n            ctx.strokeStyle = strokeColor;\n            ctx.strokeText(text, origin, origin);\n            ctx.fillText(text, origin, origin);\n            cacheText[key] = canvas;\n        }\n    }\n    return cacheText[key];\n};\nconst cache = {};\n/**\n * A tracker style that take in account the delay.\n *\n * @param {RealtimeTrajectory} trajectory The trajectory to render.\n * @param {ViewState} viewState The view state of the map.\n * @param {RealtimeStyleOptions} options Some options to change the rendering\n * @return a canvas\n * @private\n */\nconst realtimeDefaultStyle = (trajectory, viewState, options) => {\n    const { delayDisplay = 300000, delayOutlineColor = '#000', getBgColor = () => '#000', getDelayColor = () => '#000', getDelayFont = (fontSize) => `bold ${fontSize}px arial, sans-serif`, getDelayText = () => null, getMaxRadiusForStrokeAndDelay = () => 7, getMaxRadiusForText = () => 10, getRadius = () => 0, getText = (text) => text, getTextColor = () => '#000', getTextFont = (fontSize) => `bold ${fontSize}px arial, sans-serif`, getTextSize = () => 14, hoverVehicleId, selectedVehicleId, useDelayStyle, } = options;\n    const { pixelRatio = 1, zoom } = viewState;\n    let { type } = trajectory.properties;\n    const { delay, line, operator_provides_realtime_journey: operatorProvidesRealtime, state, train_id: id, } = trajectory.properties;\n    let { color, name, text_color: textColor } = line || {};\n    name = getText(name);\n    const cancelled = state === 'JOURNEY_CANCELLED';\n    if (!type) {\n        type = 'Rail';\n    }\n    if (!name) {\n        name = 'I';\n    }\n    if (!textColor) {\n        textColor = '#000000';\n    }\n    if (color && !color.startsWith('#')) {\n        color = `#${color}`;\n    }\n    if (!textColor.startsWith('#')) {\n        textColor = `#${textColor}`;\n    }\n    const z = Math.min(Math.floor(zoom || 1), 16);\n    const hover = !!(hoverVehicleId && hoverVehicleId === id);\n    const selected = !!(selectedVehicleId && selectedVehicleId === id);\n    // Calcul the radius of the circle\n    let radius = getRadius(type, z) * pixelRatio;\n    const isDisplayStrokeAndDelay = radius >= getMaxRadiusForStrokeAndDelay() * pixelRatio;\n    if (hover || selected) {\n        radius = isDisplayStrokeAndDelay\n            ? radius + 5 * pixelRatio\n            : 14 * pixelRatio;\n    }\n    const isDisplayText = radius > getMaxRadiusForText() * pixelRatio;\n    // Optimize the cache key, very important in high zoom level\n    let key = `${radius}${hover || selected}`;\n    if (useDelayStyle) {\n        key += `${operatorProvidesRealtime}${delay}`;\n        if (isDisplayStrokeAndDelay) {\n            key += `${cancelled}`;\n        }\n    }\n    else {\n        key += `${color || type}`;\n        if (isDisplayStrokeAndDelay) {\n            key += `${cancelled}${delay}`;\n        }\n    }\n    if (isDisplayText) {\n        key += `${name}${textColor}`;\n    }\n    if (!cache[key]) {\n        if (radius === 0) {\n            return null;\n        }\n        const margin = 1 * pixelRatio;\n        const radiusDelay = radius + 2 * pixelRatio;\n        const markerSize = radius * 2;\n        const size = radiusDelay * 2 + margin * 2;\n        const origin = size / 2;\n        // Draw circle delay background\n        let delayBg = null;\n        if (isDisplayStrokeAndDelay && delay !== null) {\n            delayBg = getDelayBgCanvas(origin, radiusDelay, getDelayColor(delay, cancelled));\n        }\n        // Show delay if feature is hovered or if delay is above 5mins.\n        let delayText = null;\n        let fontSize = 0;\n        if (isDisplayStrokeAndDelay &&\n            (hover || (delay || 0) >= delayDisplay || cancelled)) {\n            // Draw delay text\n            fontSize =\n                Math.max(cancelled ? 19 : 14, Math.min(cancelled ? 19 : 17, radius * 1.2)) * pixelRatio;\n            const text = getDelayText(delay, cancelled);\n            if (text) {\n                delayText = getDelayTextCanvas(text, fontSize, getDelayFont(fontSize, text), getDelayColor(delay, cancelled, true), delayOutlineColor, pixelRatio);\n            }\n        }\n        // Draw colored circle with black border\n        let circleFillColor;\n        if (useDelayStyle) {\n            circleFillColor = getDelayColor(delay, cancelled);\n        }\n        else {\n            circleFillColor = color || getBgColor(type);\n        }\n        const hasStroke = isDisplayStrokeAndDelay || hover || selected;\n        const hasDash = !!isDisplayStrokeAndDelay &&\n            !!useDelayStyle &&\n            delay === null &&\n            operatorProvidesRealtime === 'yes';\n        const circle = getCircleCanvas(origin, radius, circleFillColor, hasStroke, hasDash, pixelRatio);\n        // Create the canvas\n        const width = size + ((delayText === null || delayText === void 0 ? void 0 : delayText.width) || 0) * 2;\n        const height = size;\n        const canvas = createCanvas(width, height);\n        if (canvas) {\n            const ctx = canvas.getContext('2d');\n            if (!ctx) {\n                return null;\n            }\n            // The renderTrajectories will center the image on the vehicle positions.\n            const originX = (delayText === null || delayText === void 0 ? void 0 : delayText.width) || 0;\n            if (delayBg) {\n                ctx.drawImage(delayBg, originX, 0);\n            }\n            if (circle) {\n                ctx.drawImage(circle, originX, 0);\n            }\n            // Draw text in the circle\n            let circleText = null;\n            if (isDisplayText) {\n                const fontSize2 = Math.max(radius, 10);\n                const textSize = getTextSize(ctx, markerSize, name, fontSize2, getTextFont);\n                const textColor2 = !useDelayStyle\n                    ? textColor || getTextColor(type)\n                    : '#000000';\n                const hasStroke2 = !!useDelayStyle &&\n                    delay === null &&\n                    operatorProvidesRealtime === 'yes';\n                circleText = getTextCanvas(name, origin, textSize, textColor2, circleFillColor, hasStroke2, pixelRatio, getTextFont);\n            }\n            if (circleText) {\n                ctx.drawImage(circleText, originX, 0);\n            }\n            if (delayText) {\n                ctx.drawImage(delayText, originX + Math.ceil(origin + radiusDelay) + margin, Math.ceil(origin - fontSize));\n            }\n            cache[key] = canvas;\n        }\n    }\n    return cache[key];\n};\nexport default realtimeDefaultStyle;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/styles/realtimeDefaultStyle.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 215,
    "kind": "variable",
    "name": "cacheDelayBg",
    "memberof": "build/common/styles/realtimeDefaultStyle.js",
    "static": true,
    "longname": "build/common/styles/realtimeDefaultStyle.js~cacheDelayBg",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/common/styles/realtimeDefaultStyle.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 2,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 216,
    "kind": "function",
    "name": "getDelayBgCanvas",
    "memberof": "build/common/styles/realtimeDefaultStyle.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/styles/realtimeDefaultStyle.js~getDelayBgCanvas",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/styles/realtimeDefaultStyle.js",
    "importStyle": "{getDelayBgCanvas}",
    "description": "Draw circle delay background",
    "lineNumber": 8,
    "params": [
      {
        "name": "origin",
        "types": [
          "*"
        ]
      },
      {
        "name": "radius",
        "types": [
          "*"
        ]
      },
      {
        "name": "color",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 217,
    "kind": "variable",
    "name": "cacheDelayText",
    "memberof": "build/common/styles/realtimeDefaultStyle.js",
    "static": true,
    "longname": "build/common/styles/realtimeDefaultStyle.js~cacheDelayText",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/common/styles/realtimeDefaultStyle.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 218,
    "kind": "function",
    "name": "getDelayTextCanvas",
    "memberof": "build/common/styles/realtimeDefaultStyle.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/styles/realtimeDefaultStyle.js~getDelayTextCanvas",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/styles/realtimeDefaultStyle.js",
    "importStyle": "{getDelayTextCanvas}",
    "description": "Draw delay text",
    "lineNumber": 33,
    "params": [
      {
        "name": "text",
        "types": [
          "*"
        ]
      },
      {
        "name": "fontSize",
        "types": [
          "*"
        ]
      },
      {
        "name": "font",
        "types": [
          "*"
        ]
      },
      {
        "name": "delayColor",
        "types": [
          "*"
        ]
      },
      {
        "name": "delayOutlineColor",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "#000",
        "defaultValue": "#000"
      },
      {
        "name": "pixelRatio",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 1,
        "defaultValue": "1"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 219,
    "kind": "variable",
    "name": "cacheCircle",
    "memberof": "build/common/styles/realtimeDefaultStyle.js",
    "static": true,
    "longname": "build/common/styles/realtimeDefaultStyle.js~cacheCircle",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/common/styles/realtimeDefaultStyle.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 56,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 220,
    "kind": "function",
    "name": "getCircleCanvas",
    "memberof": "build/common/styles/realtimeDefaultStyle.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/styles/realtimeDefaultStyle.js~getCircleCanvas",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/styles/realtimeDefaultStyle.js",
    "importStyle": "{getCircleCanvas}",
    "description": "Draw colored circle with black border",
    "lineNumber": 62,
    "params": [
      {
        "name": "origin",
        "types": [
          "*"
        ]
      },
      {
        "name": "radius",
        "types": [
          "*"
        ]
      },
      {
        "name": "color",
        "types": [
          "*"
        ]
      },
      {
        "name": "hasStroke",
        "types": [
          "*"
        ]
      },
      {
        "name": "hasDash",
        "types": [
          "*"
        ]
      },
      {
        "name": "pixelRatio",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 221,
    "kind": "variable",
    "name": "cacheText",
    "memberof": "build/common/styles/realtimeDefaultStyle.js",
    "static": true,
    "longname": "build/common/styles/realtimeDefaultStyle.js~cacheText",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/common/styles/realtimeDefaultStyle.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 90,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 222,
    "kind": "function",
    "name": "getTextCanvas",
    "memberof": "build/common/styles/realtimeDefaultStyle.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/styles/realtimeDefaultStyle.js~getTextCanvas",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/styles/realtimeDefaultStyle.js",
    "importStyle": "{getTextCanvas}",
    "description": "Draw text in the circle",
    "lineNumber": 96,
    "params": [
      {
        "name": "text",
        "types": [
          "*"
        ]
      },
      {
        "name": "origin",
        "types": [
          "*"
        ]
      },
      {
        "name": "textSize",
        "types": [
          "*"
        ]
      },
      {
        "name": "fillColor",
        "types": [
          "*"
        ]
      },
      {
        "name": "strokeColor",
        "types": [
          "*"
        ]
      },
      {
        "name": "hasStroke",
        "types": [
          "*"
        ]
      },
      {
        "name": "pixelRatio",
        "types": [
          "*"
        ]
      },
      {
        "name": "getTextFont",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 223,
    "kind": "variable",
    "name": "cache",
    "memberof": "build/common/styles/realtimeDefaultStyle.js",
    "static": true,
    "longname": "build/common/styles/realtimeDefaultStyle.js~cache",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/common/styles/realtimeDefaultStyle.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 128,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 224,
    "kind": "function",
    "name": "realtimeDefaultStyle",
    "memberof": "build/common/styles/realtimeDefaultStyle.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/styles/realtimeDefaultStyle.js~realtimeDefaultStyle",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/styles/realtimeDefaultStyle.js",
    "importStyle": "realtimeDefaultStyle",
    "description": "A tracker style that take in account the delay.",
    "lineNumber": 138,
    "params": [
      {
        "nullable": null,
        "types": [
          "RealtimeTrajectory"
        ],
        "spread": false,
        "optional": false,
        "name": "trajectory",
        "description": "The trajectory to render."
      },
      {
        "nullable": null,
        "types": [
          "ViewState"
        ],
        "spread": false,
        "optional": false,
        "name": "viewState",
        "description": "The view state of the map."
      },
      {
        "nullable": null,
        "types": [
          "RealtimeStyleOptions"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": "Some options to change the rendering"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "a canvas"
    }
  },
  {
    "__docId__": 225,
    "kind": "file",
    "name": "build/common/styles/realtimeDelayStyle.js",
    "content": "import realtimeDefaultStyle from './realtimeDefaultStyle';\n/**\n * A tracker style that display the delay as backgroundColor.\n *\n * @param {*} trajectory The trajectory to render.\n * @param {*} viewState The view state of the map.\n * @param {*} options Some options to change the rendering\n * @return a canvas\n * @private\n */\nconst realtimeDelayStyle = (trajectory, viewState, options) => {\n    return realtimeDefaultStyle(trajectory, viewState, Object.assign(Object.assign({}, options), { useDelayStyle: true }));\n};\nexport default realtimeDelayStyle;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/styles/realtimeDelayStyle.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 226,
    "kind": "function",
    "name": "realtimeDelayStyle",
    "memberof": "build/common/styles/realtimeDelayStyle.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/styles/realtimeDelayStyle.js~realtimeDelayStyle",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/styles/realtimeDelayStyle.js",
    "importStyle": "realtimeDelayStyle",
    "description": "A tracker style that display the delay as backgroundColor.",
    "lineNumber": 11,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "trajectory",
        "description": "The trajectory to render."
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "viewState",
        "description": "The view state of the map."
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": "Some options to change the rendering"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "a canvas"
    }
  },
  {
    "__docId__": 227,
    "kind": "file",
    "name": "build/common/styles/realtimeHeadingStyle.js",
    "content": "import createCanvas from '../utils/createCanvas';\nimport { getBgColor } from '../utils/realtimeConfig';\nimport realtimeDefaultStyle from './realtimeDefaultStyle';\nconst rotateCanvas = (canvas, rotation) => {\n    const ctx = canvas.getContext('2d');\n    ctx === null || ctx === void 0 ? void 0 : ctx.translate(canvas.width / 2, canvas.height / 2);\n    ctx === null || ctx === void 0 ? void 0 : ctx.rotate(rotation);\n    ctx === null || ctx === void 0 ? void 0 : ctx.translate(-canvas.width / 2, -canvas.height / 2);\n};\nconst arrowCache = {};\nconst getArrowCanvas = (fillColor) => {\n    const key = `${fillColor}`;\n    if (!arrowCache[key]) {\n        // Create the arrow canvas\n        const arrowCanvas = createCanvas(20, 20);\n        const ctx = arrowCanvas === null || arrowCanvas === void 0 ? void 0 : arrowCanvas.getContext('2d');\n        if (ctx) {\n            ctx.fillStyle = fillColor;\n            ctx.beginPath();\n            ctx.moveTo(5, 5);\n            ctx.lineTo(10, 10);\n            ctx.lineTo(5, 15);\n            ctx.fill();\n            ctx.beginPath();\n            ctx.moveTo(5, 5);\n            ctx.lineTo(10, 10);\n            ctx.lineTo(5, 15);\n            ctx.lineTo(5, 5);\n            ctx.stroke();\n        }\n        arrowCache[key] = arrowCanvas;\n    }\n    return arrowCache[key];\n};\nconst bufferArrowCache = {};\nconst getBufferArrowCanvas = (canvas, fillColor, rotation) => {\n    const margin = 20;\n    const bufferKey = `${fillColor},${canvas.width},${canvas.height},${rotation}`;\n    if (!bufferArrowCache[bufferKey]) {\n        // Create a buffer canvas around the current vehicle to display properly the arrow\n        const buffer = createCanvas(canvas.width + margin * 2, canvas.height + margin * 2);\n        const arrowCanvas = getArrowCanvas(fillColor);\n        if (arrowCanvas && buffer) {\n            const bufferCtx = buffer.getContext('2d');\n            bufferCtx === null || bufferCtx === void 0 ? void 0 : bufferCtx.drawImage(arrowCanvas, buffer.width - margin, buffer.height / 2 - arrowCanvas.height / 2, arrowCanvas.width, arrowCanvas.height);\n            bufferCtx === null || bufferCtx === void 0 ? void 0 : bufferCtx.save();\n            const rot = rotation + (90 * Math.PI) / 180;\n            rotateCanvas(buffer, -rot);\n            bufferCtx === null || bufferCtx === void 0 ? void 0 : bufferCtx.restore();\n        }\n        bufferArrowCache[bufferKey] = buffer;\n    }\n    return bufferArrowCache[bufferKey];\n};\n/**\n * A tracker style that take in account the delay.\n *\n * @param {RealtimeTrajectory} trajectory The trajectory to render.\n * @param {ViewState} viewState The view state of the map.\n * @param {RealtimeStyleOptions} options Some options to change the rendering\n * @return a canvas\n * @private\n */\nconst realtimeHeadingStyle = (trajectory, viewState, options) => {\n    // @ts-expect-error improve types\n    const { line, rotation, type } = trajectory.properties;\n    const { color } = line || {};\n    const canvas = realtimeDefaultStyle(trajectory, viewState, options);\n    if (canvas && rotation !== null) {\n        const circleFillColor = color || getBgColor(type);\n        const bufferArrow = getBufferArrowCanvas(canvas, circleFillColor, rotation);\n        if (bufferArrow) {\n            const bufferSize = (bufferArrow.width - canvas.width) / 2;\n            const vehicleWithArrow = createCanvas(bufferArrow.width, bufferArrow.height);\n            const context = vehicleWithArrow === null || vehicleWithArrow === void 0 ? void 0 : vehicleWithArrow.getContext('2d');\n            context === null || context === void 0 ? void 0 : context.drawImage(bufferArrow, 0, 0, bufferArrow.width, bufferArrow.height);\n            context === null || context === void 0 ? void 0 : context.drawImage(canvas, bufferSize, bufferSize, canvas.width, canvas.height);\n            return vehicleWithArrow;\n        }\n    }\n    return canvas;\n};\nexport default realtimeHeadingStyle;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/styles/realtimeHeadingStyle.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 228,
    "kind": "function",
    "name": "rotateCanvas",
    "memberof": "build/common/styles/realtimeHeadingStyle.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/styles/realtimeHeadingStyle.js~rotateCanvas",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/common/styles/realtimeHeadingStyle.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "params": [
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "rotation",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 229,
    "kind": "variable",
    "name": "arrowCache",
    "memberof": "build/common/styles/realtimeHeadingStyle.js",
    "static": true,
    "longname": "build/common/styles/realtimeHeadingStyle.js~arrowCache",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/common/styles/realtimeHeadingStyle.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 230,
    "kind": "function",
    "name": "getArrowCanvas",
    "memberof": "build/common/styles/realtimeHeadingStyle.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/styles/realtimeHeadingStyle.js~getArrowCanvas",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/common/styles/realtimeHeadingStyle.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "params": [
      {
        "name": "fillColor",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 231,
    "kind": "variable",
    "name": "bufferArrowCache",
    "memberof": "build/common/styles/realtimeHeadingStyle.js",
    "static": true,
    "longname": "build/common/styles/realtimeHeadingStyle.js~bufferArrowCache",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/common/styles/realtimeHeadingStyle.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 232,
    "kind": "function",
    "name": "getBufferArrowCanvas",
    "memberof": "build/common/styles/realtimeHeadingStyle.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/styles/realtimeHeadingStyle.js~getBufferArrowCanvas",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/common/styles/realtimeHeadingStyle.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 36,
    "undocument": true,
    "params": [
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "fillColor",
        "types": [
          "*"
        ]
      },
      {
        "name": "rotation",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 233,
    "kind": "function",
    "name": "realtimeHeadingStyle",
    "memberof": "build/common/styles/realtimeHeadingStyle.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/styles/realtimeHeadingStyle.js~realtimeHeadingStyle",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/styles/realtimeHeadingStyle.js",
    "importStyle": "realtimeHeadingStyle",
    "description": "A tracker style that take in account the delay.",
    "lineNumber": 64,
    "params": [
      {
        "nullable": null,
        "types": [
          "RealtimeTrajectory"
        ],
        "spread": false,
        "optional": false,
        "name": "trajectory",
        "description": "The trajectory to render."
      },
      {
        "nullable": null,
        "types": [
          "ViewState"
        ],
        "spread": false,
        "optional": false,
        "name": "viewState",
        "description": "The view state of the map."
      },
      {
        "nullable": null,
        "types": [
          "RealtimeStyleOptions"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": "Some options to change the rendering"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "a canvas"
    }
  },
  {
    "__docId__": 234,
    "kind": "file",
    "name": "build/common/styles/realtimeSimpleStyle.js",
    "content": "import createCanvas from '../utils/createCanvas';\n/**\n * A very simple tracker style.\n * Display blue point for each train.\n */\nlet canvas;\nconst realtimeSimpleStyle = () => {\n    if (!canvas) {\n        canvas = createCanvas(15, 15);\n        const ctx = canvas === null || canvas === void 0 ? void 0 : canvas.getContext('2d');\n        if (ctx) {\n            ctx.arc(8, 8, 5, 0, 2 * Math.PI, false);\n            ctx.fillStyle = '#8ED6FF';\n            ctx.fill();\n            ctx.lineWidth = 3;\n            ctx.strokeStyle = 'black';\n            ctx.stroke();\n            ctx.lineWidth = 3;\n        }\n    }\n    return canvas;\n};\nexport default realtimeSimpleStyle;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/styles/realtimeSimpleStyle.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 235,
    "kind": "function",
    "name": "realtimeSimpleStyle",
    "memberof": "build/common/styles/realtimeSimpleStyle.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/styles/realtimeSimpleStyle.js~realtimeSimpleStyle",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/styles/realtimeSimpleStyle.js",
    "importStyle": "realtimeSimpleStyle",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 236,
    "kind": "file",
    "name": "build/common/typedefs.js",
    "content": "/**\n * @typedef {function} FilterFunction\n * @param {Vehicle} vehicle Vehicle to filter.\n * @returns boolean\n */\n/**\n * @typedef {function} SortFunction\n * @param {any} a Object a to compare.\n * @param {any} b Object b to compare.\n * @returns number\n */\n/**\n * @typedef {function} getMotsByZoomFunction\n * @param {number} zoom Curent zoom level.\n * @param {RealtimeMot[][]} motsByZoom Default array of mots by zoom.\n * @returns number\n */\n/**\n * @typedef {Object} ViewState\n * @property {number|undefined} time A time in ms.\n * @property {number[2]|undefined} center A center in mercator coordinate.\n * @property {number[4]} extent An Extent in mercator coordinates.\n * @property {number[2]} size A size ([width, height]).\n * @property {number} rotation A rotation in radians.\n * @property {number} resolution A resolution.\n * @property {number} zoom A zoom level.\n * @property {number|undefined} pixelRatio A pixel ratio.\n */\n/**\n * @typedef {Object} FeatureInfo\n * @property {Layer} layer A layer.\n * @property {Feature[]} features  An array of features.\n * @property {number[2]} coordinate The coordinate where to find the featue.\n */\n/**\n * @typedef {Object} VehiclePosition\n * @property {number[2]} coord Coordinate of the vehicle position in Mercator .\n * @property {number!} rotation  An angle in radians representing the direction (from the true north) towards which the vehicle is facing.\n */\n// These lines is to block TypeScript to add \"use strict;\" in the outputed file.\nconst dummy = () => { };\nexport default dummy;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/typedefs.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 237,
    "kind": "typedef",
    "name": "FilterFunction",
    "memberof": "build/common/typedefs.js",
    "static": true,
    "longname": "build/common/typedefs.js~FilterFunction",
    "access": "private",
    "description": "",
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "boolean"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Vehicle"
        ],
        "spread": false,
        "optional": false,
        "name": "vehicle",
        "description": "Vehicle to filter."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "boolean"
    },
    "type": {
      "types": [
        "function"
      ],
      "optional": false,
      "name": "FilterFunction"
    }
  },
  {
    "__docId__": 238,
    "kind": "typedef",
    "name": "SortFunction",
    "memberof": "build/common/typedefs.js",
    "static": true,
    "longname": "build/common/typedefs.js~SortFunction",
    "access": "private",
    "description": "",
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "number"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "any"
        ],
        "spread": false,
        "optional": false,
        "name": "a",
        "description": "Object a to compare."
      },
      {
        "nullable": null,
        "types": [
          "any"
        ],
        "spread": false,
        "optional": false,
        "name": "b",
        "description": "Object b to compare."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "number"
    },
    "type": {
      "types": [
        "function"
      ],
      "optional": false,
      "name": "SortFunction"
    }
  },
  {
    "__docId__": 239,
    "kind": "typedef",
    "name": "getMotsByZoomFunction",
    "memberof": "build/common/typedefs.js",
    "static": true,
    "longname": "build/common/typedefs.js~getMotsByZoomFunction",
    "access": "private",
    "description": "",
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "number"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "zoom",
        "description": "Curent zoom level."
      },
      {
        "nullable": null,
        "types": [
          "RealtimeMot[][]"
        ],
        "spread": false,
        "optional": false,
        "name": "motsByZoom",
        "description": "Default array of mots by zoom."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "number"
    },
    "type": {
      "types": [
        "function"
      ],
      "optional": false,
      "name": "getMotsByZoomFunction"
    }
  },
  {
    "__docId__": 240,
    "kind": "typedef",
    "name": "ViewState",
    "memberof": "build/common/typedefs.js",
    "static": true,
    "longname": "build/common/typedefs.js~ViewState",
    "access": "private",
    "description": "",
    "properties": [
      {
        "nullable": null,
        "types": [
          "number",
          "undefined"
        ],
        "spread": false,
        "optional": false,
        "name": "time",
        "description": "A time in ms."
      },
      {
        "nullable": null,
        "types": [
          "number[2]",
          "undefined"
        ],
        "spread": false,
        "optional": false,
        "name": "center",
        "description": "A center in mercator coordinate."
      },
      {
        "nullable": null,
        "types": [
          "number[4]"
        ],
        "spread": false,
        "optional": false,
        "name": "extent",
        "description": "An Extent in mercator coordinates."
      },
      {
        "nullable": null,
        "types": [
          "number[2]"
        ],
        "spread": false,
        "optional": false,
        "name": "size",
        "description": "A size ([width, height])."
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "rotation",
        "description": "A rotation in radians."
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "resolution",
        "description": "A resolution."
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "zoom",
        "description": "A zoom level."
      },
      {
        "nullable": null,
        "types": [
          "number",
          "undefined"
        ],
        "spread": false,
        "optional": false,
        "name": "pixelRatio",
        "description": "A pixel ratio."
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "ViewState"
    }
  },
  {
    "__docId__": 241,
    "kind": "typedef",
    "name": "FeatureInfo",
    "memberof": "build/common/typedefs.js",
    "static": true,
    "longname": "build/common/typedefs.js~FeatureInfo",
    "access": "private",
    "description": "",
    "properties": [
      {
        "nullable": null,
        "types": [
          "Layer"
        ],
        "spread": false,
        "optional": false,
        "name": "layer",
        "description": "A layer."
      },
      {
        "nullable": null,
        "types": [
          "Feature[]"
        ],
        "spread": false,
        "optional": false,
        "name": "features",
        "description": "An array of features."
      },
      {
        "nullable": null,
        "types": [
          "number[2]"
        ],
        "spread": false,
        "optional": false,
        "name": "coordinate",
        "description": "The coordinate where to find the featue."
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "FeatureInfo"
    }
  },
  {
    "__docId__": 242,
    "kind": "typedef",
    "name": "VehiclePosition",
    "memberof": "build/common/typedefs.js",
    "static": true,
    "longname": "build/common/typedefs.js~VehiclePosition",
    "access": "private",
    "description": "",
    "lineNumber": 41,
    "properties": [
      {
        "nullable": null,
        "types": [
          "number[2]"
        ],
        "spread": false,
        "optional": false,
        "name": "coord",
        "description": "Coordinate of the vehicle position in Mercator ."
      },
      {
        "nullable": null,
        "types": [
          "number!"
        ],
        "spread": false,
        "optional": false,
        "name": "rotation",
        "description": "An angle in radians representing the direction (from the true north) towards which the vehicle is facing."
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "VehiclePosition"
    }
  },
  {
    "__docId__": 243,
    "kind": "file",
    "name": "build/common/utils/RealtimeEngine.js",
    "content": "import debounce from 'lodash.debounce';\nimport throttle from 'lodash.throttle';\nimport { buffer, containsCoordinate, intersects } from 'ol/extent';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport { fromLonLat } from 'ol/proj';\nimport { RealtimeAPI, RealtimeModes } from '../../api';\nimport realtimeDefaultStyle from '../styles/realtimeDefaultStyle';\nimport * as realtimeConfig from './realtimeConfig';\nimport renderTrajectories from './renderTrajectories';\n/**\n * This class is responsible for drawing trajectories from a realtime API in a canvas,\n * depending on the map's view state and at a specific time.\n *\n * This class is totally agnostic from Maplibre or OpenLayers and must stay taht way.\n */\nclass RealtimeEngine {\n    get mode() {\n        return this._mode;\n    }\n    set mode(newMode) {\n        var _a, _b;\n        if (newMode === this._mode) {\n            return;\n        }\n        this._mode = newMode;\n        if ((_b = (_a = this.api) === null || _a === void 0 ? void 0 : _a.wsApi) === null || _b === void 0 ? void 0 : _b.open) {\n            this.stop();\n            this.start();\n        }\n    }\n    get speed() {\n        return this._speed;\n    }\n    set speed(newSpeed) {\n        this._speed = newSpeed;\n        this.start();\n    }\n    get style() {\n        return this._style;\n    }\n    set style(newStyle) {\n        this._style = newStyle;\n        this.renderTrajectories();\n    }\n    get time() {\n        return this._time;\n    }\n    set time(newTime) {\n        this._time = (newTime === null || newTime === void 0 ? void 0 : newTime.getTime)\n            ? newTime\n            : new Date(newTime);\n        this.renderTrajectories();\n    }\n    constructor(options) {\n        this.isIdle = false;\n        this.getViewState = () => ({});\n        this.shouldRender = () => true;\n        this._mode = options.mode || RealtimeModes.TOPOGRAPHIC;\n        this._speed = options.speed || 1; // If live property is true. The speed is ignored.\n        this._style = options.style || realtimeDefaultStyle;\n        this._time = options.time || new Date();\n        this.api = options.api || new RealtimeAPI(options);\n        this.bboxParameters = options.bboxParameters;\n        this.canvas = options.canvas || document.createElement('canvas');\n        this.debug = options.debug || false;\n        this.filter = options.filter;\n        this.hoverVehicleId = options.hoverVehicleId;\n        /**\n         * If true. The layer will always use Date.now() on the next tick to render the trajectories.\n         * When true, setting the time property has no effect.\n         */\n        this.live = options.live !== false;\n        this.minZoomInterpolation = options.minZoomInterpolation || 8; // Min zoom level from which trains positions are not interpolated.\n        this.pixelRatio =\n            options.pixelRatio ||\n                (typeof window !== 'undefined' ? window.devicePixelRatio : 1);\n        this.selectedVehicleId = options.selectedVehicleId;\n        this.sort = options.sort;\n        /**\n         * Custom options to pass as last parameter of the style function.\n         */\n        // @ts-expect-error good type must be defined\n        this.styleOptions = Object.assign(Object.assign({}, realtimeConfig), (options.styleOptions || {}));\n        this.tenant = options.tenant || ''; // sbb,sbh or sbm\n        this.trajectories = {};\n        this.useDebounce = options.useDebounce || false;\n        this.useRequestAnimationFrame = options.useRequestAnimationFrame || false;\n        this.useThrottle = options.useThrottle !== false; // the default behavior\n        this.getViewState = options.getViewState || (() => ({}));\n        this.shouldRender = options.shouldRender || (() => true);\n        this.onRender = options.onRender;\n        this.onIdle = options.onIdle;\n        this.onStart = options.onStart;\n        this.onStop = options.onStop;\n        this.format = new GeoJSON();\n        // Server will block non train before zoom 9\n        this.motsByZoom = options.motsByZoom || [\n            realtimeConfig.MOTS_ONLY_RAIL,\n            realtimeConfig.MOTS_ONLY_RAIL,\n            realtimeConfig.MOTS_ONLY_RAIL,\n            realtimeConfig.MOTS_ONLY_RAIL,\n            realtimeConfig.MOTS_ONLY_RAIL,\n            realtimeConfig.MOTS_ONLY_RAIL,\n            realtimeConfig.MOTS_ONLY_RAIL,\n            realtimeConfig.MOTS_ONLY_RAIL,\n            realtimeConfig.MOTS_ONLY_RAIL,\n            realtimeConfig.MOTS_WITHOUT_CABLE,\n            realtimeConfig.MOTS_WITHOUT_CABLE,\n        ];\n        // Mots by zoom\n        this.getMotsByZoom = (zoom) => {\n            if (options.getMotsByZoom) {\n                return options.getMotsByZoom(zoom, this.motsByZoom);\n            }\n            return this.motsByZoom[zoom];\n        };\n        // Generalization levels by zoom\n        this.generalizationLevelByZoom = options.generalizationLevelByZoom || [];\n        this.getGeneralizationLevelByZoom = (zoom) => {\n            if (options.getGeneralizationLevelByZoom) {\n                return options.getGeneralizationLevelByZoom(zoom, this.generalizationLevelByZoom);\n            }\n            return this.generalizationLevelByZoom[zoom];\n        };\n        // Render time interval by zoom\n        this.renderTimeIntervalByZoom = options.renderTimeIntervalByZoom || [\n            100000, 50000, 40000, 30000, 20000, 15000, 10000, 5000, 2000, 1000, 400,\n            300, 250, 180, 90, 60, 50, 50, 50, 50, 50,\n        ];\n        this.getRenderTimeIntervalByZoom = (zoom) => {\n            if (options.getRenderTimeIntervalByZoom) {\n                return options.getRenderTimeIntervalByZoom(zoom, this.renderTimeIntervalByZoom);\n            }\n            return this.renderTimeIntervalByZoom[zoom];\n        };\n        // This property will call api.setBbox on each movend event\n        this.isUpdateBboxOnMoveEnd = options.isUpdateBboxOnMoveEnd !== false;\n        // Define throttling and debounce render function\n        this.throttleRenderTrajectories = throttle(this.renderTrajectoriesInternal, 50, { leading: false, trailing: true });\n        this.debounceRenderTrajectories = debounce(this.renderTrajectoriesInternal, 50, { leading: true, maxWait: 5000, trailing: true });\n        this.renderState = {\n            center: [0, 0],\n            rotation: 0,\n            zoom: undefined,\n        };\n        this.onTrajectoryMessage = this.onTrajectoryMessage.bind(this);\n        this.onDeleteTrajectoryMessage = this.onDeleteTrajectoryMessage.bind(this);\n        this.onDocumentVisibilityChange =\n            this.onDocumentVisibilityChange.bind(this);\n    }\n    /**\n     * Add a trajectory.\n     * @param {RealtimeTrajectory} trajectory The trajectory to add.\n     * @private\n     */\n    addTrajectory(trajectory) {\n        if (!this.trajectories) {\n            this.trajectories = {};\n        }\n        const id = trajectory.properties.train_id;\n        if (id !== undefined) {\n            this.trajectories[id] = trajectory;\n        }\n        this.renderTrajectories();\n    }\n    attachToMap() {\n        // To avoid browser hanging when the tab is not visible for a certain amount of time,\n        // We stop the rendering and the websocket when hide and start again when show.\n        document.addEventListener('visibilitychange', this.onDocumentVisibilityChange);\n    }\n    detachFromMap() {\n        document.removeEventListener('visibilitychange', this.onDocumentVisibilityChange);\n        this.stop();\n        if (this.canvas) {\n            const context = this.canvas.getContext('2d');\n            if (context) {\n                context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n            }\n        }\n    }\n    /**\n     * Get the duration before the next update depending on zoom level.\n     *\n     * @private\n     */\n    getRefreshTimeInMs() {\n        var _a;\n        const viewState = this.getViewState();\n        const zoom = viewState.zoom || 0;\n        const roundedZoom = zoom !== undefined ? Math.round(zoom) : -1;\n        const timeStep = this.getRenderTimeIntervalByZoom(roundedZoom) || 25;\n        const nextTick = Math.max(25, timeStep / (this.speed || 1));\n        const nextThrottleTick = Math.min(nextTick, 500);\n        // TODO: see if this should go elsewhere.\n        if (this.useThrottle) {\n            this.throttleRenderTrajectories = throttle(this.renderTrajectoriesInternal, nextThrottleTick, { leading: true, trailing: true });\n        }\n        else if (this.useDebounce) {\n            this.debounceRenderTrajectories = debounce(this.renderTrajectoriesInternal, nextThrottleTick, { leading: true, maxWait: 5000, trailing: true });\n        }\n        if ((_a = this.api) === null || _a === void 0 ? void 0 : _a.buffer) {\n            const [, size] = this.api.buffer;\n            this.api.buffer = [nextThrottleTick, size];\n        }\n        return nextTick;\n    }\n    /**\n     * Get vehicle.\n     * @param {function} filterFc A function use to filter results.\n     * @return {Array<Object>} Array of vehicle.\n     */\n    getVehicles(filterFc) {\n        return ((this.trajectories &&\n            // @ts-expect-error good type must be defined\n            Object.values(this.trajectories).filter(filterFc)) ||\n            []);\n    }\n    /**\n     * Request feature information for a given coordinate.\n     *\n     * @param {ol/coordinate~Coordinate} coordinate Coordinate.\n     * @param {Object} options Options See child classes to see which options are supported.\n     * @param {number} [options.resolution=1] The resolution of the map.\n     * @param {number} [options.nb=Infinity] The max number of vehicles to return.\n     * @return {Promise<FeatureInfo>} Promise with features, layer and coordinate.\n     */\n    getVehiclesAtCoordinate(coordinate, options) {\n        const { resolution } = this.getViewState();\n        const { hitTolerance, nb } = options || {};\n        const ext = buffer([...coordinate, ...coordinate], (hitTolerance || 5) * (resolution || 1));\n        let trajectories = Object.values(this.trajectories || {});\n        if (this.sort) {\n            // @ts-expect-error good type must be defined\n            trajectories = trajectories.sort(this.sort);\n        }\n        const vehicles = [];\n        for (let i = 0; i < trajectories.length; i += 1) {\n            const { coordinate: trajcoord } = trajectories[i].properties;\n            if (trajcoord && containsCoordinate(ext, trajcoord)) {\n                vehicles.push(trajectories[i]);\n            }\n            if (vehicles.length === nb) {\n                break;\n            }\n        }\n        return { features: vehicles, type: 'FeatureCollection' };\n    }\n    /**\n     * Callback on websocket's deleted_vehicles channel events.\n     * It removes the trajectory from the list.\n     *\n     * @private\n     * @override\n     */\n    onDeleteTrajectoryMessage(data) {\n        if (!data.content) {\n            return;\n        }\n        this.removeTrajectory(data.content);\n    }\n    onDocumentVisibilityChange() {\n        if (document.hidden) {\n            this.stop();\n            // Since we don't receive deleted_vehicles event when docuement\n            // is hidden. We have to clean all the trajectories for a fresh\n            // start when the document is visible again.\n            this.trajectories = {};\n        }\n        else {\n            const viewState = this.getViewState();\n            if (!viewState.visible) {\n                return;\n            }\n            this.start();\n        }\n    }\n    /**\n     * Callback on websocket's trajectory channel events.\n     * It adds a trajectory to the list.\n     *\n     * @private\n     */\n    onTrajectoryMessage(data) {\n        this.updateIdleState();\n        if (!data.content) {\n            return;\n        }\n        const trajectory = data.content;\n        const { geometry, properties: { raw_coordinates: rawCoordinates, time_since_update: timeSinceUpdate, }, } = trajectory;\n        // ignore old events [SBAHNM-97]\n        // @ts-expect-error can be undefined\n        if (timeSinceUpdate < 0) {\n            return;\n        }\n        // console.time(`onTrajectoryMessage${data.content.properties.train_id}`);\n        if (this.purgeTrajectory(trajectory)) {\n            return;\n        }\n        if (this.debug &&\n            this.mode === RealtimeModes.TOPOGRAPHIC &&\n            rawCoordinates) {\n            // @ts-expect-error missing type definition\n            trajectory.properties.olGeometry = this.format.readGeometry({\n                coordinates: fromLonLat(rawCoordinates),\n                type: 'Point',\n            });\n        }\n        else {\n            // @ts-expect-error missing type definition\n            trajectory.properties.olGeometry = this.format.readGeometry(geometry);\n        }\n        // TODO Make sure the timeOffset is useful. May be we can remove it.\n        // @ts-expect-error missing type definition\n        trajectory.properties.timeOffset = Date.now() - data.timestamp;\n        this.addTrajectory(trajectory);\n    }\n    /**\n     * On zoomend we adjust the time interval of the update of vehicles positions.\n     *\n     * @private\n     */\n    onZoomEnd() {\n        this.startUpdateTime();\n    }\n    /**\n     * Remove all trajectories that are in the past.\n     */\n    purgeOutOfDateTrajectories() {\n        Object.entries(this.trajectories || {}).forEach(([key, trajectory]) => {\n            var _a;\n            const timeIntervals = (_a = trajectory === null || trajectory === void 0 ? void 0 : trajectory.properties) === null || _a === void 0 ? void 0 : _a.time_intervals;\n            if (this.time && (timeIntervals === null || timeIntervals === void 0 ? void 0 : timeIntervals.length)) {\n                const lastTimeInterval = timeIntervals[timeIntervals.length - 1][0];\n                if (lastTimeInterval < this.time.getTime()) {\n                    this.removeTrajectory(key);\n                }\n            }\n        });\n    }\n    /**\n     * Determine if the trajectory is useless and should be removed from the list or not.\n     * By default, this function exclude vehicles:\n     *  - that have their trajectory outside the current extent and\n     *  - that aren't in the MOT list.\n     *\n     * @param {RealtimeTrajectory} trajectory\n     * @return {boolean} if the trajectory must be displayed or not.\n     * @private\n     */\n    purgeTrajectory(trajectory) {\n        const viewState = this.getViewState();\n        const extent = viewState.extent;\n        const { bounds, type } = trajectory.properties;\n        if ((this.isUpdateBboxOnMoveEnd && extent && !intersects(extent, bounds)) ||\n            (this.mots && !this.mots.includes(type))) {\n            this.removeTrajectory(trajectory);\n            return true;\n        }\n        return false;\n    }\n    removeTrajectory(trajectoryOrId) {\n        var _a;\n        let id;\n        if (typeof trajectoryOrId !== 'string') {\n            id = (_a = trajectoryOrId === null || trajectoryOrId === void 0 ? void 0 : trajectoryOrId.properties) === null || _a === void 0 ? void 0 : _a.train_id;\n        }\n        else {\n            id = trajectoryOrId;\n        }\n        if (id !== undefined && this.trajectories) {\n            delete this.trajectories[id];\n        }\n    }\n    /**\n     * Render the trajectories requesting an animation frame and cancelling the previous one.\n     * This function must be overrided by children to provide the correct parameters.\n     *\n     * @param {boolean} noInterpolate If true trajectories are not interpolated but\n     *   drawn at the last known coordinate. Use this for performance optimization\n     *   during map navigation.\n     * @private\n     */\n    renderTrajectories(noInterpolate) {\n        const viewState = this.getViewState();\n        if (this.requestId) {\n            cancelAnimationFrame(this.requestId);\n            this.requestId = undefined;\n        }\n        if (!(viewState === null || viewState === void 0 ? void 0 : viewState.center) || !(viewState === null || viewState === void 0 ? void 0 : viewState.extent) || !(viewState === null || viewState === void 0 ? void 0 : viewState.size)) {\n            return;\n        }\n        if (!noInterpolate && this.useRequestAnimationFrame) {\n            this.requestId = requestAnimationFrame(() => {\n                this.renderTrajectoriesInternal(viewState, noInterpolate);\n            });\n        }\n        else if (!noInterpolate && this.useDebounce) {\n            this.debounceRenderTrajectories(viewState, noInterpolate);\n        }\n        else if (!noInterpolate && this.useThrottle) {\n            this.throttleRenderTrajectories(viewState, noInterpolate);\n        }\n        else {\n            this.renderTrajectoriesInternal(viewState, noInterpolate);\n        }\n    }\n    /**\n     * Launch renderTrajectories. it avoids duplicating code in renderTrajectories method.\n     *\n     * @param {object} viewState The view state of the map.\n     * @param {number[2]} viewState.center Center coordinate of the map in mercator coordinate.\n     * @param {number[4]} viewState.extent Extent of the map in mercator coordinates.\n     * @param {number[2]} viewState.size Size ([width, height]) of the canvas to render.\n     * @param {number} [viewState.rotation = 0] Rotation of the map to render.\n     * @param {number} viewState.resolution Resolution of the map to render.\n     * @param {boolean} noInterpolate If true trajectories are not interpolated but\n     *   drawn at the last known coordinate. Use this for performance optimization\n     *   during map navigation.\n     * @private\n     */\n    renderTrajectoriesInternal(viewState, noInterpolate = false) {\n        var _a, _b;\n        if (!this.trajectories || !this.shouldRender()) {\n            return false;\n        }\n        const time = this.live ? Date.now() : (_a = this.time) === null || _a === void 0 ? void 0 : _a.getTime();\n        const trajectories = Object.values(this.trajectories);\n        // console.time('sort');\n        if (this.sort) {\n            // @ts-expect-error type problem\n            trajectories.sort(this.sort);\n        }\n        // console.timeEnd('sort');\n        if (!this.canvas || !this.style) {\n            return true;\n        }\n        this.renderState = renderTrajectories(this.canvas, trajectories, this.style, Object.assign(Object.assign({}, viewState), { pixelRatio: this.pixelRatio || 1, time }), Object.assign({ filter: this.filter, hoverVehicleId: this.hoverVehicleId, noInterpolate: (viewState.zoom || 0) < this.minZoomInterpolation\n                ? true\n                : noInterpolate, selectedVehicleId: this.selectedVehicleId }, this.styleOptions));\n        (_b = this.onRender) === null || _b === void 0 ? void 0 : _b.call(this, this.renderState, viewState);\n        // console.timeEnd('render');\n        return true;\n    }\n    setBbox() {\n        this.updateIdleState();\n        const viewState = this.getViewState();\n        const extent = viewState.extent;\n        const zoom = viewState.zoom || 0;\n        if (!extent || Number.isNaN(zoom)) {\n            return;\n        }\n        // Clean trajectories before sending the new bbox\n        // Purge trajectories:\n        // - which are outside the extent\n        // - when it's bus and zoom level is too low for them\n        if (this.trajectories && extent && zoom) {\n            const keys = Object.keys(this.trajectories);\n            for (let i = keys.length - 1; i >= 0; i -= 1) {\n                this.purgeTrajectory(this.trajectories[keys[i]]);\n            }\n        }\n        // The backend only supports non float value\n        const zoomFloor = Math.floor(zoom);\n        if (!extent || Number.isNaN(zoomFloor)) {\n            return;\n        }\n        // The extent does not need to be precise under meter, so we round floor/ceil the values.\n        const [minX, minY, maxX, maxY] = extent;\n        const bbox = [\n            Math.floor(minX),\n            Math.floor(minY),\n            Math.ceil(maxX),\n            Math.ceil(maxY),\n            zoomFloor,\n        ];\n        /* @private */\n        this.generalizationLevel = this.getGeneralizationLevelByZoom(zoomFloor);\n        if (this.generalizationLevel) {\n            bbox.push(`gen=${this.generalizationLevel}`);\n        }\n        /* @private */\n        this.mots = this.getMotsByZoom(zoomFloor);\n        if (this.mots) {\n            // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n            bbox.push(`mots=${this.mots}`);\n        }\n        if (this.tenant) {\n            bbox.push(`tenant=${this.tenant}`);\n        }\n        if (this.mode !== 'topographic') {\n            bbox.push(`channel_prefix=${this.mode}`);\n        }\n        if (this.bboxParameters) {\n            Object.entries(this.bboxParameters).forEach(([key, value]) => {\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n                bbox.push(`${key}=${value}`);\n            });\n        }\n        // Extent and zoom level are mandatory.\n        this.api.bbox = bbox;\n    }\n    start() {\n        this.stop();\n        // Before starting to update trajectories, we remove trajectories that have\n        // a time_intervals in the past, it will\n        // avoid phantom train that are at the end of their route because we never\n        // received the deleted_vehicle event because we have changed the browser tab.\n        this.purgeOutOfDateTrajectories();\n        this.renderTrajectories();\n        this.startUpdateTime();\n        this.api.open();\n        this.api.subscribeTrajectory(this.mode, this.onTrajectoryMessage, undefined, this.isUpdateBboxOnMoveEnd);\n        this.api.subscribeDeletedVehicles(this.mode, this.onDeleteTrajectoryMessage, undefined, this.isUpdateBboxOnMoveEnd);\n        // Update the bbox on each move end\n        if (this.isUpdateBboxOnMoveEnd) {\n            this.setBbox();\n        }\n        if (this.onStart) {\n            this.onStart(this);\n        }\n    }\n    /**\n     * Start the clock.\n     * @private\n     */\n    startUpdateTime() {\n        this.stopUpdateTime();\n        this.updateTimeDelay = this.getRefreshTimeInMs() || 0;\n        this.updateTimeInterval = window.setInterval(() => {\n            // When live=true, we update the time with new Date();\n            if (this.live) {\n                this.time = new Date();\n            }\n            else if (this.time && this.updateTimeDelay && this.speed) {\n                this.time = new Date(this.time.getTime() + this.updateTimeDelay * this.speed);\n            }\n        }, this.updateTimeDelay);\n    }\n    stop() {\n        this.api.unsubscribeTrajectory(this.onTrajectoryMessage);\n        this.api.unsubscribeDeletedVehicles(this.onDeleteTrajectoryMessage);\n        this.api.close();\n        if (this.onStop) {\n            this.onStop(this);\n        }\n    }\n    /**\n     * Stop the clock.\n     * @private\n     */\n    stopUpdateTime() {\n        if (this.updateTimeInterval) {\n            clearInterval(this.updateTimeInterval);\n            this.updateTimeInterval = undefined;\n        }\n    }\n    updateIdleState() {\n        this.isIdle = false;\n        clearTimeout(this._idleTimeout);\n        this._idleTimeout = window.setTimeout(() => {\n            var _a;\n            this.isIdle = true;\n            (_a = this.onIdle) === null || _a === void 0 ? void 0 : _a.call(this, this);\n        }, 1000);\n    }\n}\nexport default RealtimeEngine;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/RealtimeEngine.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 244,
    "kind": "class",
    "name": "RealtimeEngine",
    "memberof": "build/common/utils/RealtimeEngine.js",
    "static": true,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/RealtimeEngine.js",
    "importStyle": "RealtimeEngine",
    "description": "This class is responsible for drawing trajectories from a realtime API in a canvas,\ndepending on the map's view state and at a specific time.\n\nThis class is totally agnostic from Maplibre or OpenLayers and must stay taht way.",
    "lineNumber": 16,
    "interface": false
  },
  {
    "__docId__": 245,
    "kind": "get",
    "name": "mode",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#mode",
    "access": "private",
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 246,
    "kind": "set",
    "name": "mode",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#mode",
    "access": "private",
    "description": null,
    "lineNumber": 20,
    "undocument": true
  },
  {
    "__docId__": 247,
    "kind": "member",
    "name": "_mode",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#_mode",
    "access": "private",
    "description": null,
    "lineNumber": 25,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 248,
    "kind": "get",
    "name": "speed",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#speed",
    "access": "private",
    "description": null,
    "lineNumber": 31,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 249,
    "kind": "set",
    "name": "speed",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#speed",
    "access": "private",
    "description": null,
    "lineNumber": 34,
    "undocument": true
  },
  {
    "__docId__": 250,
    "kind": "member",
    "name": "_speed",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#_speed",
    "access": "private",
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 251,
    "kind": "get",
    "name": "style",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#style",
    "access": "private",
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 252,
    "kind": "set",
    "name": "style",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#style",
    "access": "private",
    "description": null,
    "lineNumber": 41,
    "undocument": true
  },
  {
    "__docId__": 253,
    "kind": "member",
    "name": "_style",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#_style",
    "access": "private",
    "description": null,
    "lineNumber": 42,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 254,
    "kind": "get",
    "name": "time",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#time",
    "access": "private",
    "description": null,
    "lineNumber": 45,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 255,
    "kind": "set",
    "name": "time",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#time",
    "access": "private",
    "description": null,
    "lineNumber": 48,
    "undocument": true
  },
  {
    "__docId__": 256,
    "kind": "member",
    "name": "_time",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#_time",
    "access": "private",
    "description": null,
    "lineNumber": 49,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 257,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#constructor",
    "access": "private",
    "description": null,
    "lineNumber": 54,
    "undocument": true
  },
  {
    "__docId__": 258,
    "kind": "member",
    "name": "isIdle",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#isIdle",
    "access": "private",
    "description": null,
    "lineNumber": 55,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 259,
    "kind": "member",
    "name": "getViewState",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#getViewState",
    "access": "private",
    "description": null,
    "lineNumber": 56,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 260,
    "kind": "member",
    "name": "shouldRender",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#shouldRender",
    "access": "private",
    "description": null,
    "lineNumber": 57,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 265,
    "kind": "member",
    "name": "api",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#api",
    "access": "private",
    "description": null,
    "lineNumber": 62,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 266,
    "kind": "member",
    "name": "bboxParameters",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#bboxParameters",
    "access": "private",
    "description": null,
    "lineNumber": 63,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 267,
    "kind": "member",
    "name": "canvas",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#canvas",
    "access": "private",
    "description": null,
    "lineNumber": 64,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 268,
    "kind": "member",
    "name": "debug",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#debug",
    "access": "private",
    "description": null,
    "lineNumber": 65,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 269,
    "kind": "member",
    "name": "filter",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#filter",
    "access": "private",
    "description": null,
    "lineNumber": 66,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 270,
    "kind": "member",
    "name": "hoverVehicleId",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#hoverVehicleId",
    "access": "private",
    "description": null,
    "lineNumber": 67,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 271,
    "kind": "member",
    "name": "live",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#live",
    "access": "private",
    "description": "If true. The layer will always use Date.now() on the next tick to render the trajectories.\nWhen true, setting the time property has no effect.",
    "lineNumber": 72,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 272,
    "kind": "member",
    "name": "minZoomInterpolation",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#minZoomInterpolation",
    "access": "private",
    "description": null,
    "lineNumber": 73,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 273,
    "kind": "member",
    "name": "pixelRatio",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#pixelRatio",
    "access": "private",
    "description": null,
    "lineNumber": 74,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 274,
    "kind": "member",
    "name": "selectedVehicleId",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#selectedVehicleId",
    "access": "private",
    "description": null,
    "lineNumber": 77,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 275,
    "kind": "member",
    "name": "sort",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#sort",
    "access": "private",
    "description": null,
    "lineNumber": 78,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 276,
    "kind": "member",
    "name": "styleOptions",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#styleOptions",
    "access": "private",
    "description": "Custom options to pass as last parameter of the style function.",
    "lineNumber": 83,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 277,
    "kind": "member",
    "name": "tenant",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#tenant",
    "access": "private",
    "description": null,
    "lineNumber": 84,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 278,
    "kind": "member",
    "name": "trajectories",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#trajectories",
    "access": "private",
    "description": null,
    "lineNumber": 85,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 279,
    "kind": "member",
    "name": "useDebounce",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#useDebounce",
    "access": "private",
    "description": null,
    "lineNumber": 86,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 280,
    "kind": "member",
    "name": "useRequestAnimationFrame",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#useRequestAnimationFrame",
    "access": "private",
    "description": null,
    "lineNumber": 87,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 281,
    "kind": "member",
    "name": "useThrottle",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#useThrottle",
    "access": "private",
    "description": null,
    "lineNumber": 88,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 284,
    "kind": "member",
    "name": "onRender",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#onRender",
    "access": "private",
    "description": null,
    "lineNumber": 91,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 285,
    "kind": "member",
    "name": "onIdle",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#onIdle",
    "access": "private",
    "description": null,
    "lineNumber": 92,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 286,
    "kind": "member",
    "name": "onStart",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#onStart",
    "access": "private",
    "description": null,
    "lineNumber": 93,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 287,
    "kind": "member",
    "name": "onStop",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#onStop",
    "access": "private",
    "description": null,
    "lineNumber": 94,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 288,
    "kind": "member",
    "name": "format",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#format",
    "access": "private",
    "description": null,
    "lineNumber": 95,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 289,
    "kind": "member",
    "name": "motsByZoom",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#motsByZoom",
    "access": "private",
    "description": null,
    "lineNumber": 97,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 290,
    "kind": "member",
    "name": "getMotsByZoom",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#getMotsByZoom",
    "access": "private",
    "description": null,
    "lineNumber": 111,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 291,
    "kind": "member",
    "name": "generalizationLevelByZoom",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#generalizationLevelByZoom",
    "access": "private",
    "description": null,
    "lineNumber": 118,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 292,
    "kind": "member",
    "name": "getGeneralizationLevelByZoom",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#getGeneralizationLevelByZoom",
    "access": "private",
    "description": null,
    "lineNumber": 119,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 293,
    "kind": "member",
    "name": "renderTimeIntervalByZoom",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#renderTimeIntervalByZoom",
    "access": "private",
    "description": null,
    "lineNumber": 126,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 294,
    "kind": "member",
    "name": "getRenderTimeIntervalByZoom",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#getRenderTimeIntervalByZoom",
    "access": "private",
    "description": null,
    "lineNumber": 130,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 295,
    "kind": "member",
    "name": "isUpdateBboxOnMoveEnd",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#isUpdateBboxOnMoveEnd",
    "access": "private",
    "description": null,
    "lineNumber": 137,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 296,
    "kind": "member",
    "name": "throttleRenderTrajectories",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#throttleRenderTrajectories",
    "access": "private",
    "description": null,
    "lineNumber": 139,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 297,
    "kind": "member",
    "name": "debounceRenderTrajectories",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#debounceRenderTrajectories",
    "access": "private",
    "description": null,
    "lineNumber": 140,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 298,
    "kind": "member",
    "name": "renderState",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#renderState",
    "access": "private",
    "description": null,
    "lineNumber": 141,
    "undocument": true,
    "type": {
      "types": [
        "{\"center\": *, \"rotation\": *, \"zoom\": *}"
      ]
    }
  },
  {
    "__docId__": 302,
    "kind": "method",
    "name": "addTrajectory",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#addTrajectory",
    "access": "private",
    "description": "Add a trajectory.",
    "lineNumber": 156,
    "params": [
      {
        "nullable": null,
        "types": [
          "RealtimeTrajectory"
        ],
        "spread": false,
        "optional": false,
        "name": "trajectory",
        "description": "The trajectory to add."
      }
    ],
    "return": null
  },
  {
    "__docId__": 304,
    "kind": "method",
    "name": "attachToMap",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#attachToMap",
    "access": "private",
    "description": null,
    "lineNumber": 166,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 305,
    "kind": "method",
    "name": "detachFromMap",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#detachFromMap",
    "access": "private",
    "description": null,
    "lineNumber": 171,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 306,
    "kind": "method",
    "name": "getRefreshTimeInMs",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#getRefreshTimeInMs",
    "access": "private",
    "description": "Get the duration before the next update depending on zoom level.",
    "lineNumber": 186,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 309,
    "kind": "method",
    "name": "getVehicles",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#getVehicles",
    "access": "private",
    "description": "Get vehicle.",
    "lineNumber": 212,
    "params": [
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "filterFc",
        "description": "A function use to filter results."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Array<Object>"
      ],
      "spread": false,
      "description": "Array of vehicle."
    }
  },
  {
    "__docId__": 310,
    "kind": "method",
    "name": "getVehiclesAtCoordinate",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#getVehiclesAtCoordinate",
    "access": "private",
    "description": "Request feature information for a given coordinate.",
    "lineNumber": 227,
    "params": [
      {
        "nullable": null,
        "types": [
          "ol/coordinate~Coordinate"
        ],
        "spread": false,
        "optional": false,
        "name": "coordinate",
        "description": "Coordinate."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": "Options See child classes to see which options are supported."
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "1",
        "defaultRaw": 1,
        "name": "options.resolution",
        "description": "The resolution of the map."
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "Infinity",
        "defaultRaw": "Infinity",
        "name": "options.nb",
        "description": "The max number of vehicles to return."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<FeatureInfo>"
      ],
      "spread": false,
      "description": "Promise with features, layer and coordinate."
    }
  },
  {
    "__docId__": 311,
    "kind": "method",
    "name": "onDeleteTrajectoryMessage",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#onDeleteTrajectoryMessage",
    "access": "private",
    "description": "Callback on websocket's deleted_vehicles channel events.\nIt removes the trajectory from the list.",
    "lineNumber": 255,
    "override": true,
    "params": [
      {
        "name": "data",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 312,
    "kind": "method",
    "name": "onDocumentVisibilityChange",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#onDocumentVisibilityChange",
    "access": "private",
    "description": null,
    "lineNumber": 261,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 314,
    "kind": "method",
    "name": "onTrajectoryMessage",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#onTrajectoryMessage",
    "access": "private",
    "description": "Callback on websocket's trajectory channel events.\nIt adds a trajectory to the list.",
    "lineNumber": 283,
    "params": [
      {
        "name": "data",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 315,
    "kind": "method",
    "name": "onZoomEnd",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#onZoomEnd",
    "access": "private",
    "description": "On zoomend we adjust the time interval of the update of vehicles positions.",
    "lineNumber": 322,
    "params": [],
    "return": null
  },
  {
    "__docId__": 316,
    "kind": "method",
    "name": "purgeOutOfDateTrajectories",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#purgeOutOfDateTrajectories",
    "access": "private",
    "description": "Remove all trajectories that are in the past.",
    "lineNumber": 328,
    "params": [],
    "return": null
  },
  {
    "__docId__": 317,
    "kind": "method",
    "name": "purgeTrajectory",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#purgeTrajectory",
    "access": "private",
    "description": "Determine if the trajectory is useless and should be removed from the list or not.\nBy default, this function exclude vehicles:\n - that have their trajectory outside the current extent and\n - that aren't in the MOT list.",
    "lineNumber": 350,
    "params": [
      {
        "nullable": null,
        "types": [
          "RealtimeTrajectory"
        ],
        "spread": false,
        "optional": false,
        "name": "trajectory",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": "if the trajectory must be displayed or not."
    }
  },
  {
    "__docId__": 318,
    "kind": "method",
    "name": "removeTrajectory",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#removeTrajectory",
    "access": "private",
    "description": null,
    "lineNumber": 361,
    "undocument": true,
    "params": [
      {
        "name": "trajectoryOrId",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 319,
    "kind": "method",
    "name": "renderTrajectories",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#renderTrajectories",
    "access": "private",
    "description": "Render the trajectories requesting an animation frame and cancelling the previous one.\nThis function must be overrided by children to provide the correct parameters.",
    "lineNumber": 383,
    "params": [
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "noInterpolate",
        "description": "If true trajectories are not interpolated but\n  drawn at the last known coordinate. Use this for performance optimization\n  during map navigation."
      }
    ],
    "return": null
  },
  {
    "__docId__": 320,
    "kind": "member",
    "name": "requestId",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#requestId",
    "access": "private",
    "description": null,
    "lineNumber": 387,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 322,
    "kind": "method",
    "name": "renderTrajectoriesInternal",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#renderTrajectoriesInternal",
    "access": "private",
    "description": "Launch renderTrajectories. it avoids duplicating code in renderTrajectories method.",
    "lineNumber": 421,
    "params": [
      {
        "nullable": null,
        "types": [
          "object"
        ],
        "spread": false,
        "optional": false,
        "name": "viewState",
        "description": "The view state of the map."
      },
      {
        "nullable": null,
        "types": [
          "number[2]"
        ],
        "spread": false,
        "optional": false,
        "name": "viewState.center",
        "description": "Center coordinate of the map in mercator coordinate."
      },
      {
        "nullable": null,
        "types": [
          "number[4]"
        ],
        "spread": false,
        "optional": false,
        "name": "viewState.extent",
        "description": "Extent of the map in mercator coordinates."
      },
      {
        "nullable": null,
        "types": [
          "number[2]"
        ],
        "spread": false,
        "optional": false,
        "name": "viewState.size",
        "description": "Size ([width, height]) of the canvas to render."
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": " 0",
        "defaultRaw": 0,
        "name": "viewState.rotation",
        "description": "Rotation of the map to render."
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "viewState.resolution",
        "description": "Resolution of the map to render."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "noInterpolate",
        "description": "If true trajectories are not interpolated but\n  drawn at the last known coordinate. Use this for performance optimization\n  during map navigation."
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 324,
    "kind": "method",
    "name": "setBbox",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#setBbox",
    "access": "private",
    "description": null,
    "lineNumber": 444,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 325,
    "kind": "member",
    "name": "generalizationLevel",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#generalizationLevel",
    "access": "private",
    "description": null,
    "lineNumber": 477,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 326,
    "kind": "member",
    "name": "mots",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#mots",
    "access": "private",
    "description": null,
    "lineNumber": 482,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 327,
    "kind": "method",
    "name": "start",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#start",
    "access": "private",
    "description": null,
    "lineNumber": 502,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 328,
    "kind": "method",
    "name": "startUpdateTime",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#startUpdateTime",
    "access": "private",
    "description": "Start the clock.",
    "lineNumber": 526,
    "params": [],
    "return": null
  },
  {
    "__docId__": 329,
    "kind": "member",
    "name": "updateTimeDelay",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#updateTimeDelay",
    "access": "private",
    "description": null,
    "lineNumber": 528,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 330,
    "kind": "member",
    "name": "updateTimeInterval",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#updateTimeInterval",
    "access": "private",
    "description": null,
    "lineNumber": 529,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 333,
    "kind": "method",
    "name": "stop",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#stop",
    "access": "private",
    "description": null,
    "lineNumber": 539,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 334,
    "kind": "method",
    "name": "stopUpdateTime",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#stopUpdateTime",
    "access": "private",
    "description": "Stop the clock.",
    "lineNumber": 551,
    "params": [],
    "return": null
  },
  {
    "__docId__": 336,
    "kind": "method",
    "name": "updateIdleState",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#updateIdleState",
    "access": "private",
    "description": null,
    "lineNumber": 557,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 338,
    "kind": "member",
    "name": "_idleTimeout",
    "memberof": "build/common/utils/RealtimeEngine.js~RealtimeEngine",
    "static": false,
    "longname": "build/common/utils/RealtimeEngine.js~RealtimeEngine#_idleTimeout",
    "access": "private",
    "description": null,
    "lineNumber": 560,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 340,
    "kind": "file",
    "name": "build/common/utils/compareDepartures.js",
    "content": "/**\n * Compare two given departures for sort alogithm,\n * @param {RealtimeDeparture} a First departure.\n * @param {RealtimeDeparture} b Second departure.\n * @param {boolean} [sortByMinArrivalTime=false] Sort departures by arrival time.\n * @private\n */\nconst compareDepartures = (a, b, sortByMinArrivalTime = false) => {\n    // First LEAVING and HIDDEN, then BOARDING and then sorted by time.\n    const topStates = ['HIDDEN', 'LEAVING', 'BOARDING'];\n    const aTop = a.has_fzo && topStates.indexOf(a.state) > -1;\n    const bTop = b.has_fzo && topStates.indexOf(b.state) > -1;\n    if (aTop || bTop) {\n        if (aTop !== bTop) {\n            return aTop ? -1 : 1;\n        }\n        if (a.state !== b.state) {\n            // one is leaving\n            return topStates.indexOf(a.state) - topStates.indexOf(b.state);\n        }\n    }\n    let aDuration = null;\n    let bDuration = null;\n    const now = Date.now();\n    if (sortByMinArrivalTime) {\n        aDuration = new Date(a.min_arrival_time || a.time).getTime() - now;\n        bDuration = new Date(b.min_arrival_time || b.time).getTime() - now;\n    }\n    else {\n        aDuration = new Date(a.time).getTime() - now;\n        bDuration = new Date(b.time).getTime() - now;\n    }\n    return aDuration - bDuration;\n};\nexport default compareDepartures;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/compareDepartures.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 341,
    "kind": "function",
    "name": "compareDepartures",
    "memberof": "build/common/utils/compareDepartures.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/compareDepartures.js~compareDepartures",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/compareDepartures.js",
    "importStyle": "compareDepartures",
    "description": "Compare two given departures for sort alogithm,",
    "lineNumber": 8,
    "params": [
      {
        "nullable": null,
        "types": [
          "RealtimeDeparture"
        ],
        "spread": false,
        "optional": false,
        "name": "a",
        "description": "First departure."
      },
      {
        "nullable": null,
        "types": [
          "RealtimeDeparture"
        ],
        "spread": false,
        "optional": false,
        "name": "b",
        "description": "Second departure."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "sortByMinArrivalTime",
        "description": "Sort departures by arrival time."
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 342,
    "kind": "file",
    "name": "build/common/utils/constants.js",
    "content": "export const VECTOR_TILE_FEATURE_PROPERTY = 'vectorTileFeature';\nexport default {\n    VECTOR_TILE_FEATURE_PROPERTY,\n};\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/constants.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 343,
    "kind": "variable",
    "name": "VECTOR_TILE_FEATURE_PROPERTY",
    "memberof": "build/common/utils/constants.js",
    "static": true,
    "longname": "build/common/utils/constants.js~VECTOR_TILE_FEATURE_PROPERTY",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/constants.js",
    "importStyle": "{VECTOR_TILE_FEATURE_PROPERTY}",
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 344,
    "kind": "file",
    "name": "build/common/utils/createCanvas.js",
    "content": "/**\n * This function try to create a canvas element and return it.\n * it uses document.createElement('canvas') if document is available\n * or new OffscreenCanvas(width, height) if OffscreenCanvas is avalaible (for web worker)\n * or it returns null if neither is available.\n * @private\n */\nconst createCanvas = (width, height) => {\n    let canvas = null;\n    // Prevent SSR errors\n    if (typeof window === 'undefined') {\n        return null;\n    }\n    if (typeof document !== 'undefined' && (document === null || document === void 0 ? void 0 : document.createElement)) {\n        canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n    }\n    else if (OffscreenCanvas) {\n        canvas = new OffscreenCanvas(width, height);\n    }\n    else {\n        // eslint-disable-next-line no-console\n        console.error(\"We didn't find a way to create a canvas element, document.createElement('canvas') and new OffscrenCanvas() are not supported\");\n    }\n    return canvas;\n};\nexport default createCanvas;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/createCanvas.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 345,
    "kind": "function",
    "name": "createCanvas",
    "memberof": "build/common/utils/createCanvas.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/createCanvas.js~createCanvas",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/createCanvas.js",
    "importStyle": "createCanvas",
    "description": "This function try to create a canvas element and return it.\nit uses document.createElement('canvas') if document is available\nor new OffscreenCanvas(width, height) if OffscreenCanvas is avalaible (for web worker)\nor it returns null if neither is available.",
    "lineNumber": 8,
    "params": [
      {
        "name": "width",
        "types": [
          "*"
        ]
      },
      {
        "name": "height",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 346,
    "kind": "file",
    "name": "build/common/utils/createDefaultCopyrightElt.js",
    "content": "/**\n * @private\n */\nconst createDefaultCopyrightElement = () => {\n    const element = document.createElement('div');\n    Object.assign(element.style, {\n        position: 'absolute',\n        bottom: 0,\n        right: 0,\n        fontSize: '.8rem',\n        padding: '0 10px',\n    });\n    return element;\n};\nexport default createDefaultCopyrightElement;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/createDefaultCopyrightElt.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 347,
    "kind": "function",
    "name": "createDefaultCopyrightElement",
    "memberof": "build/common/utils/createDefaultCopyrightElt.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/createDefaultCopyrightElt.js~createDefaultCopyrightElement",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/createDefaultCopyrightElt.js",
    "importStyle": "createDefaultCopyrightElement",
    "description": "",
    "lineNumber": 4,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 348,
    "kind": "file",
    "name": "build/common/utils/createDefaultStopFinderElt.js",
    "content": "/**\n * @private\n */\nconst createDefaultStopFinderElement = () => {\n    const element = document.createElement('div');\n    Object.assign(element.style, {\n        position: 'absolute',\n        top: 0,\n        left: '50px',\n        margin: '10px',\n        display: 'flex',\n        flexDirection: 'column',\n        width: '320px',\n        maxHeight: '90%',\n    });\n    return element;\n};\nexport default createDefaultStopFinderElement;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/createDefaultStopFinderElt.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 349,
    "kind": "function",
    "name": "createDefaultStopFinderElement",
    "memberof": "build/common/utils/createDefaultStopFinderElt.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/createDefaultStopFinderElt.js~createDefaultStopFinderElement",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/createDefaultStopFinderElt.js",
    "importStyle": "createDefaultStopFinderElement",
    "description": "",
    "lineNumber": 4,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 350,
    "kind": "file",
    "name": "build/common/utils/createRealtimeFilters.js",
    "content": "/**\n * Return a filter functions based on some parameters of a vehicle.\n *\n * @param {string|Array<string>} line - A list of vehicle's name to filter. Names can be separated by a comma. Ex: 'S1,S2,S3'\n * @param {string|Array<string} route - A list of vehicle's route (contained in route_identifier property) to filter. Indentifiers can be separated by a comma. Ex: 'id1,id2,id3'\n * @param {string|Array<string} operator  A list of vehicle's operator to filter. Operators can be separated by a comma. Ex: 'SBB,DB'\n * @param {Regexp} regexLine - A regex aplly of vehcile's name.\n * @private\n */\nconst createRealtimeFilters = (line, route, operator, regexLine) => {\n    const filterList = [];\n    if (!line && !route && !operator && !regexLine) {\n        return null;\n    }\n    if (regexLine) {\n        const regexLineList = typeof regexLine === 'string' ? [regexLine] : regexLine;\n        const lineFilter = (item) => {\n            const name = item.properties.name ||\n                (item.properties.line && item.properties.line.name) ||\n                '';\n            if (!name) {\n                return false;\n            }\n            return regexLineList.some((regexStr) => new RegExp(regexStr, 'i').test(name));\n        };\n        filterList.push(lineFilter);\n    }\n    if (line) {\n        const lineFiltersList = typeof line === 'string' ? line.split(',') : line;\n        const lineList = lineFiltersList.map((l) => l.replace(/\\s+/g, '').toUpperCase());\n        const lineFilter = (item) => {\n            const { line: linee, name } = item.properties;\n            const lineName = (name || (linee && linee.name) || '').toUpperCase();\n            if (!lineName) {\n                return false;\n            }\n            return lineList.includes(lineName);\n        };\n        filterList.push(lineFilter);\n    }\n    if (route) {\n        const routes = typeof route === 'string' ? route.split(',') : route;\n        const routeList = routes.map((item) => parseInt(item, 10));\n        const routeFilter = (item) => {\n            const routeIdentifier = item.properties.route_identifier ||\n                item.properties.routeIdentifier ||\n                '';\n            const routeId = parseInt(routeIdentifier.split('.')[0], 10);\n            return routeList.includes(routeId);\n        };\n        filterList.push(routeFilter);\n    }\n    if (operator) {\n        const operatorList = typeof operator === 'string' ? [operator] : operator;\n        const operatorFilter = (item) => operatorList.some((op) => {\n            // operaotr is the old property tenant is the new one\n            const tenant = item.properties.operator || item.properties.tenant || '';\n            return new RegExp(op, 'i').test(tenant);\n        });\n        filterList.push(operatorFilter);\n    }\n    if (!filterList.length) {\n        return null;\n    }\n    return (item) => {\n        for (let i = 0; i < filterList.length; i += 1) {\n            if (!filterList[i](item)) {\n                return false;\n            }\n        }\n        return true;\n    };\n};\nexport default createRealtimeFilters;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/createRealtimeFilters.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 351,
    "kind": "function",
    "name": "createRealtimeFilters",
    "memberof": "build/common/utils/createRealtimeFilters.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/createRealtimeFilters.js~createRealtimeFilters",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/createRealtimeFilters.js",
    "importStyle": "createRealtimeFilters",
    "description": "Return a filter functions based on some parameters of a vehicle.",
    "lineNumber": 10,
    "params": [
      {
        "nullable": null,
        "types": [
          "string",
          "Array<string>"
        ],
        "spread": false,
        "optional": false,
        "name": "line",
        "description": "A list of vehicle's name to filter. Names can be separated by a comma. Ex: 'S1,S2,S3'"
      },
      {
        "nullable": null,
        "types": [
          "string",
          "Array<string"
        ],
        "spread": false,
        "optional": false,
        "name": "route",
        "description": "A list of vehicle's route (contained in route_identifier property) to filter. Indentifiers can be separated by a comma. Ex: 'id1,id2,id3'"
      },
      {
        "nullable": null,
        "types": [
          "string",
          "Array<string"
        ],
        "spread": false,
        "optional": false,
        "name": "operator",
        "description": "A list of vehicle's operator to filter. Operators can be separated by a comma. Ex: 'SBB,DB'"
      },
      {
        "nullable": null,
        "types": [
          "Regexp"
        ],
        "spread": false,
        "optional": false,
        "name": "regexLine",
        "description": "A regex aplly of vehcile's name."
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 352,
    "kind": "file",
    "name": "build/common/utils/debounceDeparturesMessages.js",
    "content": "import sortAndFilterDepartures from './sortAndFilterDepartures';\n/**\n * This function returns a WebSocket api callback, and call the onDeparturesUpdate function with the list of current departures to display.\n * @param {function(departures: RealtimeDeparture[])} onDeparturesUpdate callback when list of departures changes, called after 100 ms\n * @param {boolean} [sortByMinArrivalTime = true] Sort departures by arrival time\n * @param {number} [maxDepartureAge = 30] max departure age of departures in minutes\n * @param {number} [timeout = 100] debounce timeout in ms\n * @private\n */\nconst debounceDeparturesMessages = (onDeparturesUpdate, sortByMinArrivalTime = false, maxDepartureAge = 30, timeout = 100) => {\n    const departureUpdateTimeout = {};\n    const departureObject = {};\n    return (data) => {\n        const { source, content: departure } = data;\n        if (departureUpdateTimeout[source]) {\n            window.clearTimeout(departureUpdateTimeout[source]);\n        }\n        if (!departure) {\n            return;\n        }\n        departureObject[departure.call_id] = departure;\n        departureUpdateTimeout[source] = window.setTimeout(() => {\n            const departures = sortAndFilterDepartures(departureObject, sortByMinArrivalTime || false, maxDepartureAge);\n            onDeparturesUpdate(departures);\n        }, timeout);\n    };\n};\nexport default debounceDeparturesMessages;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/debounceDeparturesMessages.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 353,
    "kind": "function",
    "name": "debounceDeparturesMessages",
    "memberof": "build/common/utils/debounceDeparturesMessages.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/debounceDeparturesMessages.js~debounceDeparturesMessages",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/debounceDeparturesMessages.js",
    "importStyle": "debounceDeparturesMessages",
    "description": "This function returns a WebSocket api callback, and call the onDeparturesUpdate function with the list of current departures to display.",
    "lineNumber": 10,
    "params": [
      {
        "nullable": null,
        "types": [
          "function(departures: RealtimeDeparture[])"
        ],
        "spread": false,
        "optional": false,
        "name": "onDeparturesUpdate",
        "description": "callback when list of departures changes, called after 100 ms"
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": " true",
        "defaultRaw": true,
        "name": "sortByMinArrivalTime",
        "description": "Sort departures by arrival time"
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": " 30",
        "defaultRaw": 30,
        "name": "maxDepartureAge",
        "description": "max departure age of departures in minutes"
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": " 100",
        "defaultRaw": 100,
        "name": "timeout",
        "description": "debounce timeout in ms"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 354,
    "kind": "file",
    "name": "build/common/utils/debounceWebsocketMessages.js",
    "content": "/**\n * This function returns a WebSocket api callback, and call the onUpdate function with the list of of subscribed objects changes.\n *\n * @param {function(objects: any[])} onUpdate callback when list of subscribed objects changes, called after 100 ms\n * @param {function(object: any)} [getObjectId = true] function returning the id of an object\n * @param {number} [timeout = 100] debounce timeout in ms\n * @private\n */\nconst debounceWebsocketMessages = (onUpdate, getObjectId, timeout = 100) => {\n    const updateTimeout = {};\n    const objectsById = {};\n    const objects = [];\n    return (data) => {\n        const { source, content } = data;\n        if (updateTimeout[source]) {\n            window.clearTimeout(updateTimeout[source]);\n        }\n        if (getObjectId) {\n            objectsById[getObjectId(content)] = content;\n        }\n        else {\n            objects.push(content);\n        }\n        updateTimeout[source] = window.setTimeout(() => {\n            const objectToReturn = getObjectId ? Object.values(objectsById) : objects;\n            onUpdate(objectToReturn);\n        }, timeout);\n    };\n};\nexport default debounceWebsocketMessages;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/debounceWebsocketMessages.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 355,
    "kind": "function",
    "name": "debounceWebsocketMessages",
    "memberof": "build/common/utils/debounceWebsocketMessages.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/debounceWebsocketMessages.js~debounceWebsocketMessages",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/debounceWebsocketMessages.js",
    "importStyle": "debounceWebsocketMessages",
    "description": "This function returns a WebSocket api callback, and call the onUpdate function with the list of of subscribed objects changes.",
    "lineNumber": 9,
    "params": [
      {
        "nullable": null,
        "types": [
          "function(objects: any[])"
        ],
        "spread": false,
        "optional": false,
        "name": "onUpdate",
        "description": "callback when list of subscribed objects changes, called after 100 ms"
      },
      {
        "nullable": null,
        "types": [
          "function(object: any)"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": " true",
        "defaultRaw": true,
        "name": "getObjectId",
        "description": "function returning the id of an object"
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": " 100",
        "defaultRaw": 100,
        "name": "timeout",
        "description": "debounce timeout in ms"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 356,
    "kind": "file",
    "name": "build/common/utils/getLayersAsFlatArray.js",
    "content": "// TODO: I use any to avoid circular dependency  with common/layers/layer\nconst getLayersAsFlatArray = (layersOrLayer) => {\n    let layers = layersOrLayer;\n    if (!Array.isArray(layers)) {\n        layers = [layersOrLayer];\n    }\n    let flatLayers = [];\n    layers.forEach((layer) => {\n        var _a, _b;\n        flatLayers.push(layer);\n        // Handle children property and ol.layer.Group\n        const children = layer.children ||\n            layer.get('children') ||\n            ((_b = (_a = layer.getLayers) === null || _a === void 0 ? void 0 : _a.call(layer)) === null || _b === void 0 ? void 0 : _b.getArray());\n        flatLayers = flatLayers.concat(getLayersAsFlatArray(children || []));\n    });\n    return flatLayers;\n};\nexport default getLayersAsFlatArray;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/getLayersAsFlatArray.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 357,
    "kind": "function",
    "name": "getLayersAsFlatArray",
    "memberof": "build/common/utils/getLayersAsFlatArray.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/getLayersAsFlatArray.js~getLayersAsFlatArray",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/getLayersAsFlatArray.js",
    "importStyle": "getLayersAsFlatArray",
    "description": null,
    "lineNumber": 2,
    "undocument": true,
    "params": [
      {
        "name": "layersOrLayer",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 358,
    "kind": "file",
    "name": "build/common/utils/getMapGlCopyrights.js",
    "content": "import removeDuplicate from './removeDuplicate';\n/**\n * Return the copyright a Maplibre map.\n * @param {maplibregl.Map} map A Maplibre map\n * @private\n */\nconst getMapGlCopyrights = (map) => {\n    if (!map) {\n        return [];\n    }\n    const { style } = map;\n    if (!style) {\n        return [];\n    }\n    const { sourceCaches } = style;\n    let copyrights = [];\n    Object.values(sourceCaches).forEach((value) => {\n        var _a;\n        if (value.used) {\n            const source = value.getSource();\n            // @ts-expect-error improve types\n            const attribution = source.attribution || ((_a = source.options) === null || _a === void 0 ? void 0 : _a.attribution);\n            if (attribution) {\n                copyrights = copyrights.concat(attribution.replace(/&copy;/g, '©').split(/(<a.*?<\\/a>)/));\n            }\n        }\n    });\n    return removeDuplicate(copyrights);\n};\nexport default getMapGlCopyrights;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/getMapGlCopyrights.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 359,
    "kind": "function",
    "name": "getMapGlCopyrights",
    "memberof": "build/common/utils/getMapGlCopyrights.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/getMapGlCopyrights.js~getMapGlCopyrights",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/getMapGlCopyrights.js",
    "importStyle": "getMapGlCopyrights",
    "description": "Return the copyright a Maplibre map.",
    "lineNumber": 7,
    "params": [
      {
        "nullable": null,
        "types": [
          "maplibregl.Map"
        ],
        "spread": false,
        "optional": false,
        "name": "map",
        "description": "A Maplibre map"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 360,
    "kind": "file",
    "name": "build/common/utils/getRealtimeModeSuffix.js",
    "content": "/**\n * Get the websocket channel suffix, depending on the current mode.\n * @param {String} mode Mode 'topographic' ou 'schematic'.\n * @param {String[]} modes List of modes\n * @private\n */\nconst getModeSuffix = (mode, modes) => mode === modes.SCHEMATIC ? '_schematic' : '';\nexport default getModeSuffix;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/getRealtimeModeSuffix.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 361,
    "kind": "function",
    "name": "getModeSuffix",
    "memberof": "build/common/utils/getRealtimeModeSuffix.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/getRealtimeModeSuffix.js~getModeSuffix",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/getRealtimeModeSuffix.js",
    "importStyle": "getModeSuffix",
    "description": "Get the websocket channel suffix, depending on the current mode.",
    "lineNumber": 7,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "mode",
        "description": "Mode 'topographic' ou 'schematic'."
      },
      {
        "nullable": null,
        "types": [
          "String[]"
        ],
        "spread": false,
        "optional": false,
        "name": "modes",
        "description": "List of modes"
      }
    ],
    "return": null
  },
  {
    "__docId__": 362,
    "kind": "file",
    "name": "build/common/utils/getUrlWithParams.js",
    "content": "/**\n * Return the styleUrl with apiKey parameters set.\n * @param {string} url a url.\n * @param {Object<String,String>} params a list of key/value pair to add to the url.\n * @private\n */\nconst getUrlWithParams = (url, params) => {\n    // Clean requets parameters, removing undefined and null values.\n    const newUrl = new URL(url);\n    const searchParams = params || {};\n    Object.entries(searchParams).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n            newUrl.searchParams.set(key, value);\n        }\n    });\n    return newUrl;\n};\nexport default getUrlWithParams;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/getUrlWithParams.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 363,
    "kind": "function",
    "name": "getUrlWithParams",
    "memberof": "build/common/utils/getUrlWithParams.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/getUrlWithParams.js~getUrlWithParams",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/getUrlWithParams.js",
    "importStyle": "getUrlWithParams",
    "description": "Return the styleUrl with apiKey parameters set.",
    "lineNumber": 7,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "url",
        "description": "a url."
      },
      {
        "nullable": null,
        "types": [
          "Object<String,String>"
        ],
        "spread": false,
        "optional": false,
        "name": "params",
        "description": "a list of key/value pair to add to the url."
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 364,
    "kind": "file",
    "name": "build/common/utils/getVehiclePosition.js",
    "content": "import { LineString } from 'ol/geom';\n/**\n * Interpolate or not the vehicle position from a trajectory at a specific date.\n *\n * @param {number} now Current date to interpolate a position with. In ms.\n * @param {RealtimeTrajectory} trajectory The trajectory to interpolate.\n * @param {boolean} noInterpolate If true, the vehicle position is not interpolated on each render but only once.\n * @returns {VehiclePosition}\n * @private\n */\nconst getVehiclePosition = (now, trajectory, noInterpolate) => {\n    const { coordinate, \n    // @ts-expect-error  olGeometry is added by the RealtimeLayer\n    olGeometry, time_intervals: timeIntervals, } = trajectory.properties;\n    let { coordinates, type } = trajectory.geometry;\n    let geometry = olGeometry;\n    let coord;\n    let rotation;\n    // If an olGeometry exists we use it. It avoids to create one each time.\n    if (olGeometry) {\n        type = geometry.getType();\n        coordinates = geometry.getCoordinates();\n    }\n    if (noInterpolate && coordinate) {\n        coord = coordinate;\n    }\n    else if (type === 'Point') {\n        coord = coordinates;\n    }\n    else if (type === 'LineString') {\n        if (!geometry) {\n            geometry = new LineString(coordinates);\n        }\n        const intervals = timeIntervals || [[]];\n        const firstInterval = intervals[0];\n        const lastInterval = intervals[intervals.length - 1];\n        // Between the last time interval of a trajectory event and the beginning\n        // of the new trajectory event, there is few seconds, can be 6 to 30\n        // seconds (that's why the vehicle jumps sometimes).\n        // So we make the choice here to display the last (or the first) position\n        // of an trajectory event instead of removing them, if the current date is\n        // outside the time intervals we display the vehicle at the last (or first) position known.\n        if (now < firstInterval[0]) {\n            // Display first position known.\n            [, , rotation] = firstInterval;\n            coord = geometry.getFirstCoordinate();\n        }\n        else if (now > lastInterval[0]) {\n            // Display last position known.\n            [, , rotation] = lastInterval;\n            coord = geometry.getLastCoordinate();\n        }\n        else {\n            // Interpolate position using time intervals.\n            for (let j = 0; j < intervals.length - 1; j += 1) {\n                // Rotation only available in realtime layer.\n                const [start, startFrac] = intervals[j];\n                const [end, endFrac] = intervals[j + 1];\n                if (start <= now && now <= end) {\n                    // interpolate position inside the time interval.\n                    const timeFrac = Math.min((now - start) / (end - start), 1);\n                    const geomFrac = timeFrac * (endFrac - startFrac) + startFrac;\n                    coord = geometry.getCoordinateAt(geomFrac);\n                    [, , rotation] = intervals[j];\n                    break;\n                }\n            }\n        }\n    }\n    else {\n        // eslint-disable-next-line no-console\n        console.error('This geometry type is not supported. Only Point or LineString are. Current geometry: ', geometry);\n    }\n    return { coord, rotation };\n};\nexport default getVehiclePosition;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/getVehiclePosition.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 365,
    "kind": "function",
    "name": "getVehiclePosition",
    "memberof": "build/common/utils/getVehiclePosition.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/getVehiclePosition.js~getVehiclePosition",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/getVehiclePosition.js",
    "importStyle": "getVehiclePosition",
    "description": "Interpolate or not the vehicle position from a trajectory at a specific date.",
    "lineNumber": 11,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{VehiclePosition}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "now",
        "description": "Current date to interpolate a position with. In ms."
      },
      {
        "nullable": null,
        "types": [
          "RealtimeTrajectory"
        ],
        "spread": false,
        "optional": false,
        "name": "trajectory",
        "description": "The trajectory to interpolate."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "noInterpolate",
        "description": "If true, the vehicle position is not interpolated on each render but only once."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "VehiclePosition"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 366,
    "kind": "file",
    "name": "build/common/utils/index.js",
    "content": "export { default as getUrlWithParams } from './getUrlWithParams';\nexport { default as getMapGlCopyrights } from './getMapGlCopyrights';\nexport { default as removeDuplicate } from './removeDuplicate';\nexport { default as createRealtimeFilters } from './createRealtimeFilters';\nexport { default as getLayersAsFlatArray } from './getLayersAsFlatArray';\nexport * from './timeUtils';\nexport { default as sortByDelay } from './sortByDelay';\nexport { default as renderTrajectories } from './renderTrajectories';\nexport { default as debounceDeparturesMessages } from './debounceDeparturesMessages';\nexport { default as debounceWebsocketMessages } from './debounceWebsocketMessages';\nexport { default as sortAndFilterDepartures } from './sortAndFilterDepartures';\nexport { default as compareDepartures } from './compareDepartures';\nexport { default as createCanvas } from './createCanvas';\nexport { default as getVehiclePosition } from './getVehiclePosition';\nimport * as realtimeConfig_1 from './realtimeConfig';\nexport { realtimeConfig_1 as realtimeConfig };\nexport * from './constants';\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/index.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 367,
    "kind": "file",
    "name": "build/common/utils/realtimeConfig.js",
    "content": "const radiusMapping = [\n    [0, 0, 0, 0, 0, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7],\n    [0, 0, 0, 0, 0, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7],\n    [0, 0, 0, 0, 0, 2, 2, 3, 7, 7, 7, 12, 15, 15, 15, 15, 15],\n    [0, 0, 0, 0, 0, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7],\n    [0, 0, 0, 0, 0, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7],\n    [0, 0, 0, 0, 0, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7],\n    [0, 0, 0, 0, 0, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7],\n    [0, 0, 0, 0, 0, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7],\n    [0, 0, 0, 0, 0, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7],\n    [0, 0, 0, 0, 0, 2, 2, 3, 7, 7, 7, 12, 15, 15, 15, 15, 15],\n];\n/**\n * @private\n */\nexport const MOTS_ONLY_RAIL = ['rail'];\n/**\n * @private\n */\nexport const MOTS_WITH_CABLE = [\n    'cablecar',\n    'gondola',\n    'funicular',\n    'coach',\n];\n/**\n * @private\n */\nexport const MOTS_WITHOUT_CABLE = [\n    'tram',\n    'subway',\n    'rail',\n    'bus',\n];\n/**\n * @private\n */\nexport const MOTS_ALL = [\n    'tram',\n    'subway',\n    'rail',\n    'bus',\n    'ferry',\n    'cablecar',\n    'gondola',\n    'funicular',\n    'coach',\n];\n/**\n * Trajserv value: 'Tram',  'Subway / Metro / S-Bahn',  'Train', 'Bus', 'Ferry', 'Cable Car', 'Gondola', 'Funicular', 'Long distance bus', 'Rail',\n * New endpoint use Rail instead of Train.\n * New tracker values:  null, \"tram\", \"subway\", \"rail\", \"bus\", \"ferry\", \"cablecar\", \"gondola\", \"funicular\", \"coach\".\n *\n * @private\n */\nexport const types = [\n    /^Tram/i,\n    /^Subway( \\/ Metro \\/ S-Bahn)?/i,\n    /^Train/i,\n    /^Bus/i,\n    /^Ferry/i,\n    /^Cable ?Car/i,\n    /^Gondola/i,\n    /^Funicular/i,\n    /^(Long distance bus|coach)/i,\n    /^Rail/i, // New endpoint use Rail instead of Train.\n];\n/**\n * @private\n */\nexport const bgColors = [\n    '#ffb400',\n    '#ff5400',\n    '#ff8080',\n    '#ea0000',\n    '#3000ff',\n    '#ffb400',\n    '#41a27b',\n    '#00d237',\n    '#b5b5b5',\n    '#ff8080',\n];\n/**\n * @private\n */\nexport const textColors = [\n    '#000000',\n    '#ffffff',\n    '#000000',\n    '#ffffff',\n    '#ffffff',\n    '#000000',\n    '#ffffff',\n    '#000000',\n    '#000000',\n    '#000000',\n];\n/**\n * @private\n */\nexport const getTypeIndex = (type) => {\n    if (typeof type === 'string') {\n        return types.findIndex((t) => t.test(type));\n    }\n    return type;\n};\n/**\n * @private\n */\nexport const getRadius = (type, zoom) => {\n    try {\n        const typeIdx = getTypeIndex(type || 0);\n        return radiusMapping[typeIdx][zoom];\n    }\n    catch (e) {\n        return 1;\n    }\n};\n/**\n * @private\n */\nexport const getBgColor = (type) => {\n    try {\n        const typeIdx = getTypeIndex(type);\n        return bgColors[typeIdx];\n    }\n    catch (e) {\n        return '#ffffff';\n    }\n};\n/**\n * @private\n */\nexport const getTextColor = (type) => {\n    try {\n        const typeIdx = getTypeIndex(type);\n        return textColors[typeIdx];\n    }\n    catch (e) {\n        return '#ffffff';\n    }\n};\n/**\n * @private\n */\nexport const getTextSize = (ctx, markerSize, text, fontSize, getTextFont) => {\n    if (!ctx) {\n        return 0;\n    }\n    ctx.font = getTextFont(fontSize, text);\n    let newText = ctx.measureText(text);\n    const maxiter = 25;\n    let i = 0;\n    while (newText.width > markerSize - 6 && i < maxiter) {\n        // eslint-disable-next-line no-param-reassign\n        fontSize -= 0.5;\n        ctx.font = getTextFont(fontSize, text);\n        newText = ctx.measureText(text);\n        i += 1;\n    }\n    return fontSize;\n};\n/**\n * @private\n * @param {number} delayInMs Delay in milliseconds.\n * @param {boolean} cancelled true if the journey is cancelled.\n * @param {boolean} isDelayText true if the color is used for delay text of the symbol.\n */\nexport const getDelayColor = (delayInMs, cancelled, isDelayText) => {\n    if (cancelled) {\n        return isDelayText ? '#ff0000' : '#a0a0a0'; // red or gray\n    }\n    if (delayInMs === null) {\n        return '#a0a0a0'; // grey { r: 160, g: 160, b: 160, s: '160,160,160' };\n    }\n    if (delayInMs >= 3600000) {\n        return '#ed004c'; // pink { r: 237, g: 0, b: 76, s: '237,0,76' };\n    }\n    if (delayInMs >= 500000) {\n        return '#e80000'; // red { r: 232, g: 0, b: 0, s: '232,0,0' };\n    }\n    if (delayInMs >= 300000) {\n        return '#ff4a00'; // orange { r: 255, g: 74, b: 0, s: '255,74,0' };\n    }\n    if (delayInMs >= 180000) {\n        return '#f7bf00'; // yellow { r: 247, g: 191, b: 0, s: '247,191,0' };\n    }\n    return '#00a00c'; // green { r: 0, g: 160, b: 12, s: '0,160,12' };\n};\n/**\n * @private\n */\nexport const getDelayText = (delayInMs, cancelled) => {\n    if (cancelled) {\n        return String.fromCodePoint(0x00d7);\n    }\n    if (delayInMs >= 3600000) {\n        const rounded = Math.round(delayInMs / 3600000);\n        return `+${rounded}h`;\n    }\n    if (delayInMs >= 60000) {\n        const rounded = Math.round(delayInMs / 60000);\n        return `+${rounded}m`;\n    }\n    if (delayInMs >= 1000) {\n        const rounded = Math.round(delayInMs / 1000);\n        return `+${rounded}s`;\n    }\n    if (delayInMs > 0) {\n        return `+${delayInMs}ms`;\n    }\n    return '';\n};\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/realtimeConfig.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 368,
    "kind": "variable",
    "name": "radiusMapping",
    "memberof": "build/common/utils/realtimeConfig.js",
    "static": true,
    "longname": "build/common/utils/realtimeConfig.js~radiusMapping",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/common/utils/realtimeConfig.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 369,
    "kind": "variable",
    "name": "MOTS_ONLY_RAIL",
    "memberof": "build/common/utils/realtimeConfig.js",
    "static": true,
    "longname": "build/common/utils/realtimeConfig.js~MOTS_ONLY_RAIL",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/realtimeConfig.js",
    "importStyle": "{MOTS_ONLY_RAIL}",
    "description": "",
    "lineNumber": 16,
    "type": {
      "types": [
        "string[]"
      ]
    }
  },
  {
    "__docId__": 370,
    "kind": "variable",
    "name": "MOTS_WITH_CABLE",
    "memberof": "build/common/utils/realtimeConfig.js",
    "static": true,
    "longname": "build/common/utils/realtimeConfig.js~MOTS_WITH_CABLE",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/realtimeConfig.js",
    "importStyle": "{MOTS_WITH_CABLE}",
    "description": "",
    "lineNumber": 20,
    "type": {
      "types": [
        "string[]"
      ]
    }
  },
  {
    "__docId__": 371,
    "kind": "variable",
    "name": "MOTS_WITHOUT_CABLE",
    "memberof": "build/common/utils/realtimeConfig.js",
    "static": true,
    "longname": "build/common/utils/realtimeConfig.js~MOTS_WITHOUT_CABLE",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/realtimeConfig.js",
    "importStyle": "{MOTS_WITHOUT_CABLE}",
    "description": "",
    "lineNumber": 29,
    "type": {
      "types": [
        "string[]"
      ]
    }
  },
  {
    "__docId__": 372,
    "kind": "variable",
    "name": "MOTS_ALL",
    "memberof": "build/common/utils/realtimeConfig.js",
    "static": true,
    "longname": "build/common/utils/realtimeConfig.js~MOTS_ALL",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/realtimeConfig.js",
    "importStyle": "{MOTS_ALL}",
    "description": "",
    "lineNumber": 38,
    "type": {
      "types": [
        "string[]"
      ]
    }
  },
  {
    "__docId__": 373,
    "kind": "variable",
    "name": "types",
    "memberof": "build/common/utils/realtimeConfig.js",
    "static": true,
    "longname": "build/common/utils/realtimeConfig.js~types",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/realtimeConfig.js",
    "importStyle": "{types}",
    "description": "Trajserv value: 'Tram',  'Subway / Metro / S-Bahn',  'Train', 'Bus', 'Ferry', 'Cable Car', 'Gondola', 'Funicular', 'Long distance bus', 'Rail',\nNew endpoint use Rail instead of Train.\nNew tracker values:  null, \"tram\", \"subway\", \"rail\", \"bus\", \"ferry\", \"cablecar\", \"gondola\", \"funicular\", \"coach\".",
    "lineNumber": 56,
    "type": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 374,
    "kind": "variable",
    "name": "bgColors",
    "memberof": "build/common/utils/realtimeConfig.js",
    "static": true,
    "longname": "build/common/utils/realtimeConfig.js~bgColors",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/realtimeConfig.js",
    "importStyle": "{bgColors}",
    "description": "",
    "lineNumber": 71,
    "type": {
      "types": [
        "string[]"
      ]
    }
  },
  {
    "__docId__": 375,
    "kind": "variable",
    "name": "textColors",
    "memberof": "build/common/utils/realtimeConfig.js",
    "static": true,
    "longname": "build/common/utils/realtimeConfig.js~textColors",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/realtimeConfig.js",
    "importStyle": "{textColors}",
    "description": "",
    "lineNumber": 86,
    "type": {
      "types": [
        "string[]"
      ]
    }
  },
  {
    "__docId__": 376,
    "kind": "function",
    "name": "getTypeIndex",
    "memberof": "build/common/utils/realtimeConfig.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/realtimeConfig.js~getTypeIndex",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/realtimeConfig.js",
    "importStyle": "{getTypeIndex}",
    "description": "",
    "lineNumber": 101,
    "params": [
      {
        "name": "type",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 377,
    "kind": "function",
    "name": "getRadius",
    "memberof": "build/common/utils/realtimeConfig.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/realtimeConfig.js~getRadius",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/realtimeConfig.js",
    "importStyle": "{getRadius}",
    "description": "",
    "lineNumber": 110,
    "params": [
      {
        "name": "type",
        "types": [
          "*"
        ]
      },
      {
        "name": "zoom",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 378,
    "kind": "function",
    "name": "getBgColor",
    "memberof": "build/common/utils/realtimeConfig.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/realtimeConfig.js~getBgColor",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/realtimeConfig.js",
    "importStyle": "{getBgColor}",
    "description": "",
    "lineNumber": 122,
    "params": [
      {
        "name": "type",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 379,
    "kind": "function",
    "name": "getTextColor",
    "memberof": "build/common/utils/realtimeConfig.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/realtimeConfig.js~getTextColor",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/realtimeConfig.js",
    "importStyle": "{getTextColor}",
    "description": "",
    "lineNumber": 134,
    "params": [
      {
        "name": "type",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 380,
    "kind": "function",
    "name": "getTextSize",
    "memberof": "build/common/utils/realtimeConfig.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/realtimeConfig.js~getTextSize",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/realtimeConfig.js",
    "importStyle": "{getTextSize}",
    "description": "",
    "lineNumber": 146,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "markerSize",
        "types": [
          "*"
        ]
      },
      {
        "name": "text",
        "types": [
          "*"
        ]
      },
      {
        "name": "fontSize",
        "types": [
          "*"
        ]
      },
      {
        "name": "getTextFont",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 381,
    "kind": "function",
    "name": "getDelayColor",
    "memberof": "build/common/utils/realtimeConfig.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/realtimeConfig.js~getDelayColor",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/realtimeConfig.js",
    "importStyle": "{getDelayColor}",
    "description": "",
    "lineNumber": 169,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "delayInMs",
        "description": "Delay in milliseconds."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "cancelled",
        "description": "true if the journey is cancelled."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "isDelayText",
        "description": "true if the color is used for delay text of the symbol."
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 382,
    "kind": "function",
    "name": "getDelayText",
    "memberof": "build/common/utils/realtimeConfig.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/realtimeConfig.js~getDelayText",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/realtimeConfig.js",
    "importStyle": "{getDelayText}",
    "description": "",
    "lineNumber": 193,
    "params": [
      {
        "name": "delayInMs",
        "types": [
          "*"
        ]
      },
      {
        "name": "cancelled",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 383,
    "kind": "file",
    "name": "build/common/utils/removeDuplicate.js",
    "content": "/**\n * This function remove duplicates lower case string value of an array.\n * It removes also null, undefined or non string values.\n *\n * @param {array} array Array of values.\n * @private\n */\nconst removeDuplicate = (array) => {\n    const arrWithoutEmptyValues = array.filter((val) => val !== undefined && val !== null && val.trim && val.trim());\n    const lowerCasesValues = arrWithoutEmptyValues.map((str) => str.toLowerCase());\n    const uniqueLowerCaseValues = [...new Set(lowerCasesValues)];\n    const uniqueValues = uniqueLowerCaseValues.map((uniqueStr) => arrWithoutEmptyValues.find((str) => str.toLowerCase() === uniqueStr));\n    return uniqueValues;\n};\nexport default removeDuplicate;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/removeDuplicate.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 384,
    "kind": "function",
    "name": "removeDuplicate",
    "memberof": "build/common/utils/removeDuplicate.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/removeDuplicate.js~removeDuplicate",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/removeDuplicate.js",
    "importStyle": "removeDuplicate",
    "description": "This function remove duplicates lower case string value of an array.\nIt removes also null, undefined or non string values.",
    "lineNumber": 8,
    "params": [
      {
        "nullable": null,
        "types": [
          "array"
        ],
        "spread": false,
        "optional": false,
        "name": "array",
        "description": "Array of values."
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 385,
    "kind": "file",
    "name": "build/common/utils/renderTrajectories.js",
    "content": "import { apply, compose, create } from 'ol/transform';\nimport getVehiclePosition from './getVehiclePosition';\n/**\n * Draw all the trajectories available in a canvas.\n * @param {HTMLCanvas|HTMLOffscreenCanvas} canvas The canvas where to draw the trajectories.\n * @param {ViewState} trajectories An array of trajectories.\n * @param {Function} style A function that returns a canvas representing a vehicle of a specific trajectory.\n * @param {ViewState} viewState The view state of the map.\n * @param {Object} options The options.\n * @param {boolean} options.hoverVehicleId The id of the vehicle to highlight.\n * @param {boolean} options.selectedVehicleId The id of the vehicle to select.\n * @param {boolean} options.noInterpolate If true trajectories are not interpolated but\n *   drawn at the last known coordinate. Use this for performance optimization\n *   during map navigation.\n * @private\n */\nconst renderTrajectories = (canvas, trajectories, style, viewState, options) => {\n    if (!canvas) {\n        return { renderedTrajectories: [] };\n    }\n    const { center, pixelRatio = 1, resolution, rotation = 0, size = [], time = Date.now(), } = viewState;\n    if (!resolution || !center) {\n        return { renderedTrajectories: [] };\n    }\n    const { filter, getScreenPixel = (pixel, viewStat) => (viewStat.zoom || 0) < 12\n        ? pixel.map((coord) => Math.floor(coord))\n        : pixel, hoverVehicleId, noInterpolate = false, selectedVehicleId, } = options;\n    const context = canvas.getContext('2d');\n    context === null || context === void 0 ? void 0 : context.clearRect(0, 0, canvas.width, canvas.height);\n    const [width, height] = size;\n    if (width &&\n        height &&\n        (canvas.width !== width * pixelRatio ||\n            canvas.height !== height * pixelRatio)) {\n        [canvas.width, canvas.height] = [width * pixelRatio, height * pixelRatio];\n    }\n    const coordinateToPixelTransform = compose(create(), size[0] / 2, size[1] / 2, 1 / resolution, -1 / resolution, -rotation, -center[0], -center[1]);\n    // Offscreen canvas has not style attribute\n    if (canvas.style) {\n        canvas.style.width = `${canvas.width / pixelRatio}px`;\n        canvas.style.height = `${canvas.height / pixelRatio}px`;\n    }\n    let hoverVehicleImg;\n    let hoverVehiclePx;\n    let selectedVehicleImg;\n    let selectedVehiclePx;\n    const renderedTrajectories = [];\n    for (let i = trajectories.length - 1; i >= 0; i -= 1) {\n        const trajectory = trajectories[i];\n        // Filter out trajectories\n        if (filter && !filter(trajectory)) {\n            // eslint-disable-next-line no-continue\n            continue;\n        }\n        // We simplify the trajectory object\n        const { timeOffset, train_id: id } = trajectory.properties;\n        // We set the rotation and the timeFraction of the trajectory (used by tralis).\n        // if rotation === null that seems there is no rotation available.\n        const { coord, rotation: rotationIcon } = getVehiclePosition(time - (timeOffset || 0), trajectory, noInterpolate);\n        // We store  the current vehicle position to the trajectory.\n        trajectories[i].properties.coordinate = coord;\n        trajectories[i].properties.rotation = rotationIcon;\n        if (!coord) {\n            // eslint-disable-next-line no-continue\n            continue;\n        }\n        let px = apply(coordinateToPixelTransform, [...coord]);\n        if (!px) {\n            // eslint-disable-next-line no-continue\n            continue;\n        }\n        px = px.map((p) => p * pixelRatio);\n        if (px[0] < 0 ||\n            px[0] > canvas.width ||\n            px[1] < 0 ||\n            px[1] > canvas.height) {\n            // eslint-disable-next-line no-continue\n            continue;\n        }\n        const vehicleImg = style(trajectory, viewState, options);\n        if (!vehicleImg) {\n            // eslint-disable-next-line no-continue\n            continue;\n        }\n        if (hoverVehicleId !== id && selectedVehicleId !== id) {\n            // To optimize the performance we use integer as pixel coordinate\n            // to avoid an additional work by the browser on zoom level < 12.\n            // See https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Optimizing_canvas?retiredLocale=de#avoid_floating-point_coordinates_and_use_integers_instead\n            const [x, y] = getScreenPixel([px[0] - vehicleImg.width / 2, px[1] - vehicleImg.height / 2], viewState);\n            context === null || context === void 0 ? void 0 : context.drawImage(vehicleImg, x, y);\n        }\n        if (hoverVehicleId && hoverVehicleId === id) {\n            // Store the canvas to draw it at the end\n            hoverVehicleImg = vehicleImg;\n            hoverVehiclePx = px;\n        }\n        if (selectedVehicleId && selectedVehicleId === id) {\n            // Store the canvas to draw it at the end\n            selectedVehicleImg = vehicleImg;\n            selectedVehiclePx = px;\n        }\n        renderedTrajectories.push(trajectory);\n    }\n    if (selectedVehicleImg && selectedVehiclePx) {\n        context === null || context === void 0 ? void 0 : context.drawImage(selectedVehicleImg, Math.floor(selectedVehiclePx[0] - selectedVehicleImg.width / 2), Math.floor(selectedVehiclePx[1] - selectedVehicleImg.height / 2));\n    }\n    if (hoverVehicleImg && hoverVehiclePx) {\n        context === null || context === void 0 ? void 0 : context.drawImage(hoverVehicleImg, Math.floor(hoverVehiclePx[0] - hoverVehicleImg.width / 2), Math.floor(hoverVehiclePx[1] - hoverVehicleImg.height / 2));\n    }\n    return {\n        // isReady: true,\n        renderedTrajectories,\n    };\n};\nexport default renderTrajectories;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/renderTrajectories.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 386,
    "kind": "function",
    "name": "renderTrajectories",
    "memberof": "build/common/utils/renderTrajectories.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/renderTrajectories.js~renderTrajectories",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/renderTrajectories.js",
    "importStyle": "renderTrajectories",
    "description": "Draw all the trajectories available in a canvas.",
    "lineNumber": 17,
    "params": [
      {
        "nullable": null,
        "types": [
          "HTMLCanvas",
          "HTMLOffscreenCanvas"
        ],
        "spread": false,
        "optional": false,
        "name": "canvas",
        "description": "The canvas where to draw the trajectories."
      },
      {
        "nullable": null,
        "types": [
          "ViewState"
        ],
        "spread": false,
        "optional": false,
        "name": "trajectories",
        "description": "An array of trajectories."
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "style",
        "description": "A function that returns a canvas representing a vehicle of a specific trajectory."
      },
      {
        "nullable": null,
        "types": [
          "ViewState"
        ],
        "spread": false,
        "optional": false,
        "name": "viewState",
        "description": "The view state of the map."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": "The options."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "options.hoverVehicleId",
        "description": "The id of the vehicle to highlight."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "options.selectedVehicleId",
        "description": "The id of the vehicle to select."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "options.noInterpolate",
        "description": "If true trajectories are not interpolated but\n  drawn at the last known coordinate. Use this for performance optimization\n  during map navigation."
      }
    ],
    "return": {
      "types": [
        "{\"renderedTrajectories\": *}"
      ]
    }
  },
  {
    "__docId__": 387,
    "kind": "file",
    "name": "build/common/utils/sortAndFilterDepartures.js",
    "content": "import compareDepartures from './compareDepartures';\n/**\n * This function sort Departures by arrival time and filter out unwanted departures:\n *  - when dparture time is in the past\n *  - when departure are duplicated\n *  - when departure is not in the next 30 min\n *\n * @param {Object} depObject The object containing departures by id.\n * @param {boolean} [sortByMinArrivalTime=false] If true sort departures by arrival time.\n * @param {number} [maxDepartureAge=30] The maximum departure age in minutes.\n * @return {RealtimeDeparture[]} Return departures array.\n * @private\n */\nconst sortAndfilterDepartures = (depObject, sortByMinArrivalTime = false, maxDepartureAge = 30) => {\n    const departures = Object.keys(depObject).map((k) => depObject[k]);\n    departures.sort((a, b) => compareDepartures(a, b, sortByMinArrivalTime));\n    const futureDate = new Date();\n    futureDate.setMinutes(futureDate.getMinutes() + maxDepartureAge);\n    const future = futureDate.getTime();\n    const pastDate = new Date();\n    pastDate.setMinutes(pastDate.getMinutes() - maxDepartureAge);\n    const past = pastDate.getTime();\n    const departureArray = [];\n    const platformsBoarding = [];\n    let previousDeparture = null;\n    for (let i = departures.length - 1; i >= 0; i -= 1) {\n        const departure = Object.assign({}, departures[i]);\n        const time = new Date(departure.time).getTime();\n        // Only show departures within the next 30 minutes\n        if (time > past && time < future) {\n            // If 2 trains are boarding at the same platform,\n            // remove the older one.\n            if (departure.state === 'BOARDING') {\n                if (!platformsBoarding.includes(departure.platform)) {\n                    platformsBoarding.push(departure.platform);\n                }\n                else {\n                    departure.state = 'HIDDEN';\n                }\n            }\n            // If two trains with the same line number and destinatin\n            // and a departure difference < 1 minute, hide the second one.\n            if (previousDeparture &&\n                departure.to[0] === previousDeparture.to[0] &&\n                Math.abs(time - previousDeparture.time) < 1000 &&\n                departure.line.name === previousDeparture.line.name) {\n                departure.state = 'HIDDEN';\n            }\n            if (/(STOP_CANCELLED|JOURNEY_CANCELLED)/.test(departure.state)) {\n                departure.cancelled = true;\n            }\n            previousDeparture = departure;\n            previousDeparture.time = time;\n            departureArray.unshift(departure);\n        }\n    }\n    return departureArray;\n};\nexport default sortAndfilterDepartures;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/sortAndFilterDepartures.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 388,
    "kind": "function",
    "name": "sortAndfilterDepartures",
    "memberof": "build/common/utils/sortAndFilterDepartures.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/sortAndFilterDepartures.js~sortAndfilterDepartures",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/sortAndFilterDepartures.js",
    "importStyle": "sortAndfilterDepartures",
    "description": "This function sort Departures by arrival time and filter out unwanted departures:\n - when dparture time is in the past\n - when departure are duplicated\n - when departure is not in the next 30 min",
    "lineNumber": 14,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "depObject",
        "description": "The object containing departures by id."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "sortByMinArrivalTime",
        "description": "If true sort departures by arrival time."
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "30",
        "defaultRaw": 30,
        "name": "maxDepartureAge",
        "description": "The maximum departure age in minutes."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "RealtimeDeparture[]"
      ],
      "spread": false,
      "description": "Return departures array."
    }
  },
  {
    "__docId__": 389,
    "kind": "file",
    "name": "build/common/utils/sortByDelay.js",
    "content": "const sortByDelay = (traj1, traj2) => {\n    const props1 = traj1.properties;\n    const props2 = traj2.properties;\n    if (props1.delay === null && props2.delay !== null) {\n        return 1;\n    }\n    if (props2.delay === null && props1.delay !== null) {\n        return -1;\n    }\n    // We put cancelled train inbetween green and yellow trains\n    // >=180000ms corresponds to yellow train\n    // @ts-expect-error\n    if (props1.cancelled && !props2.cancelled) {\n        // @ts-expect-error\n        return props2.delay < 180000 ? -1 : 1;\n    }\n    // @ts-expect-error\n    if (props2.cancelled && !props1.cancelled) {\n        // @ts-expect-error\n        return props1.delay < 180000 ? 1 : -1;\n    }\n    // @ts-expect-error\n    return props2.delay - props1.delay;\n};\nexport default sortByDelay;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/sortByDelay.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 390,
    "kind": "function",
    "name": "sortByDelay",
    "memberof": "build/common/utils/sortByDelay.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/sortByDelay.js~sortByDelay",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/sortByDelay.js",
    "importStyle": "sortByDelay",
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "params": [
      {
        "name": "traj1",
        "types": [
          "*"
        ]
      },
      {
        "name": "traj2",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 391,
    "kind": "file",
    "name": "build/common/utils/timeUtils.js",
    "content": "/**\n * Get a Date object as UTC date string .\n * ex: 2019 09 01\n * @private\n */\nexport const getUTCDateString = (now = new Date()) => {\n    let month = (now.getUTCMonth() + 1).toString();\n    month = month.length === 1 ? `0${month}` : month;\n    let day = now.getUTCDate().toString();\n    day = day.length === 1 ? `0${day}` : day;\n    return [now.getUTCFullYear(), month, day].join('');\n};\n/**\n * Get the UTC time string of Date object.\n * ex: 09:05:01.123\n * @private\n */\nexport const getUTCTimeString = (date) => [\n    date.getUTCHours(),\n    date.getUTCMinutes(),\n    `${date.getUTCSeconds()}.${date.getUTCMilliseconds()}`,\n].join(':');\n/**\n * Returns a string representation of a number, with a zero if the number is lower than 10.\n * @private\n */\nexport const pad = (integer) => integer < 10 ? `0${integer}` : `${integer}`;\n/**\n * Returns a 'hh:mm' string from a time in ms.\n * @param {Number} timeInMs Time in milliseconds.\n * @private\n */\nexport const getHoursAndMinutes = (timeInMs) => {\n    if (!timeInMs || timeInMs <= 0) {\n        return '';\n    }\n    const date = new Date(timeInMs);\n    return `${pad(date.getHours())}:${pad(date.getMinutes())}`;\n};\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/timeUtils.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 392,
    "kind": "function",
    "name": "getUTCDateString",
    "memberof": "build/common/utils/timeUtils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/timeUtils.js~getUTCDateString",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/timeUtils.js",
    "importStyle": "{getUTCDateString}",
    "description": "Get a Date object as UTC date string .\nex: 2019 09 01",
    "lineNumber": 6,
    "params": [
      {
        "name": "now",
        "optional": true,
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 393,
    "kind": "function",
    "name": "getUTCTimeString",
    "memberof": "build/common/utils/timeUtils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/timeUtils.js~getUTCTimeString",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/timeUtils.js",
    "importStyle": "{getUTCTimeString}",
    "description": "Get the UTC time string of Date object.\nex: 09:05:01.123",
    "lineNumber": 18,
    "params": [
      {
        "name": "date",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 394,
    "kind": "function",
    "name": "pad",
    "memberof": "build/common/utils/timeUtils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/timeUtils.js~pad",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/timeUtils.js",
    "importStyle": "{pad}",
    "description": "Returns a string representation of a number, with a zero if the number is lower than 10.",
    "lineNumber": 27,
    "params": [
      {
        "name": "integer",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 395,
    "kind": "function",
    "name": "getHoursAndMinutes",
    "memberof": "build/common/utils/timeUtils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/timeUtils.js~getHoursAndMinutes",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/timeUtils.js",
    "importStyle": "{getHoursAndMinutes}",
    "description": "Returns a 'hh:mm' string from a time in ms.",
    "lineNumber": 33,
    "params": [
      {
        "nullable": null,
        "types": [
          "Number"
        ],
        "spread": false,
        "optional": false,
        "name": "timeInMs",
        "description": "Time in milliseconds."
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 396,
    "kind": "file",
    "name": "build/common/utils/toMercatorExtent.js",
    "content": "import { transformExtent } from 'ol/proj';\n/**\n * @private\n */\nconst toMercatorExtent = (bounds) => {\n    return transformExtent(bounds.toArray().flat(), 'EPSG:4326', 'EPSG:3857');\n};\nexport default toMercatorExtent;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/common/utils/toMercatorExtent.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 397,
    "kind": "function",
    "name": "toMercatorExtent",
    "memberof": "build/common/utils/toMercatorExtent.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/common/utils/toMercatorExtent.js~toMercatorExtent",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/common/utils/toMercatorExtent.js",
    "importStyle": "toMercatorExtent",
    "description": "",
    "lineNumber": 5,
    "params": [
      {
        "name": "bounds",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 398,
    "kind": "file",
    "name": "build/index.js",
    "content": "import * as ol from './ol';\nimport * as maplibre from './maplibre';\nimport * as ol_1 from './ol';\nexport { ol_1 as ol };\nimport * as maplibre_1 from './maplibre';\nexport { maplibre_1 as maplibre };\nexport default {\n    ol,\n    maplibre,\n};\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/index.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 399,
    "kind": "file",
    "name": "build/maplibre/controls/CopyrightControl.js",
    "content": "import { getMapGlCopyrights } from '../../common/utils';\n/**\n * @private\n */\nconst DEFAULT_SEPARATOR = ' | ';\n/**\n * Display layer's attributions trying to remove duplicated ones.\n *\n * @example\n * import { Map } from 'maplibre-gl';\n * import { CopyrightControl } from 'mobility-toolbox-js/maplibre';\n *\n * const map = new Map({\n *   container: 'map',\n *   style: `https://maps.geops.io/styles/travic_v2/style.json?key=${window.apiKey}`,\n * });\n *\n * const control = new CopyrightControl();\n * map.addControl(control);\n *\n *\n * @see <a href=\"/example/mb-realtime>MapLibre Realtime layer example</a>\n *\n * @implements {maplibregl.IControl}\n *\n * @public\n */\nclass CopyrightControl {\n    constructor(options = {}) {\n        this.options = options;\n    }\n    // eslint-disable-next-line class-methods-use-this\n    getDefaultPosition() {\n        return 'bottom-right';\n    }\n    onAdd(map) {\n        this.map = map;\n        if (!this.container) {\n            this.container = document.createElement('div');\n        }\n        this.render = this.render.bind(this);\n        this.map.on('idle', this.render);\n        this.map.on('sourcedata', this.render);\n        this.map.on('styledata', this.render);\n        this.render();\n        return this.container;\n    }\n    onRemove() {\n        var _a, _b;\n        if ((_a = this.container) === null || _a === void 0 ? void 0 : _a.parentElement) {\n            (_b = this.container.parentElement) === null || _b === void 0 ? void 0 : _b.removeChild(this.container);\n        }\n        if (this.map) {\n            this.map.off('sourcedata', this.render);\n            this.map.off('styledata', this.render);\n            this.map.off('idle', this.render);\n        }\n        this.map = undefined;\n        return this.container;\n    }\n    render() {\n        var _a, _b;\n        if (this.map && this.container) {\n            const separator = ((_a = this.options) === null || _a === void 0 ? void 0 : _a.separator) || DEFAULT_SEPARATOR;\n            const attribs = ((_b = this.options) === null || _b === void 0 ? void 0 : _b.customAttribution) || getMapGlCopyrights(this.map);\n            const content = (Array.isArray(attribs) ? attribs : [attribs]).join(separator);\n            if (this.container.innerHTML !== content) {\n                this.content = content;\n                this.container.innerHTML = this.content;\n            }\n        }\n    }\n}\nexport default CopyrightControl;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/maplibre/controls/CopyrightControl.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 400,
    "kind": "variable",
    "name": "DEFAULT_SEPARATOR",
    "memberof": "build/maplibre/controls/CopyrightControl.js",
    "static": true,
    "longname": "build/maplibre/controls/CopyrightControl.js~DEFAULT_SEPARATOR",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/maplibre/controls/CopyrightControl.js",
    "importStyle": null,
    "description": "",
    "lineNumber": 5,
    "type": {
      "types": [
        "string"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 401,
    "kind": "class",
    "name": "CopyrightControl",
    "memberof": "build/maplibre/controls/CopyrightControl.js",
    "static": true,
    "longname": "build/maplibre/controls/CopyrightControl.js~CopyrightControl",
    "access": "public",
    "export": true,
    "importPath": "mobility-toolbox-js/build/maplibre/controls/CopyrightControl.js",
    "importStyle": "CopyrightControl",
    "description": "Display layer's attributions trying to remove duplicated ones.",
    "examples": [
      "import { Map } from 'maplibre-gl';\nimport { CopyrightControl } from 'mobility-toolbox-js/maplibre';\n\nconst map = new Map({\n  container: 'map',\n  style: `https://maps.geops.io/styles/travic_v2/style.json?key=${window.apiKey}`,\n});\n\nconst control = new CopyrightControl();\nmap.addControl(control);"
    ],
    "see": [
      "<a href=\"/example/mb-realtime>MapLibre Realtime layer example</a>"
    ],
    "lineNumber": 28,
    "interface": false,
    "implements": [
      "maplibregl.IControl"
    ]
  },
  {
    "__docId__": 402,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "build/maplibre/controls/CopyrightControl.js~CopyrightControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/controls/CopyrightControl.js~CopyrightControl#constructor",
    "access": "private",
    "description": null,
    "lineNumber": 29,
    "undocument": true
  },
  {
    "__docId__": 403,
    "kind": "member",
    "name": "options",
    "memberof": "build/maplibre/controls/CopyrightControl.js~CopyrightControl",
    "static": false,
    "longname": "build/maplibre/controls/CopyrightControl.js~CopyrightControl#options",
    "access": "private",
    "description": null,
    "lineNumber": 30,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 404,
    "kind": "method",
    "name": "getDefaultPosition",
    "memberof": "build/maplibre/controls/CopyrightControl.js~CopyrightControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/controls/CopyrightControl.js~CopyrightControl#getDefaultPosition",
    "access": "private",
    "description": null,
    "lineNumber": 33,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 405,
    "kind": "method",
    "name": "onAdd",
    "memberof": "build/maplibre/controls/CopyrightControl.js~CopyrightControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/controls/CopyrightControl.js~CopyrightControl#onAdd",
    "access": "private",
    "description": null,
    "lineNumber": 36,
    "undocument": true,
    "params": [
      {
        "name": "map",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 406,
    "kind": "member",
    "name": "map",
    "memberof": "build/maplibre/controls/CopyrightControl.js~CopyrightControl",
    "static": false,
    "longname": "build/maplibre/controls/CopyrightControl.js~CopyrightControl#map",
    "access": "private",
    "description": null,
    "lineNumber": 37,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 407,
    "kind": "member",
    "name": "container",
    "memberof": "build/maplibre/controls/CopyrightControl.js~CopyrightControl",
    "static": false,
    "longname": "build/maplibre/controls/CopyrightControl.js~CopyrightControl#container",
    "access": "private",
    "description": null,
    "lineNumber": 39,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 409,
    "kind": "method",
    "name": "onRemove",
    "memberof": "build/maplibre/controls/CopyrightControl.js~CopyrightControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/controls/CopyrightControl.js~CopyrightControl#onRemove",
    "access": "private",
    "description": null,
    "lineNumber": 48,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 411,
    "kind": "method",
    "name": "render",
    "memberof": "build/maplibre/controls/CopyrightControl.js~CopyrightControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/controls/CopyrightControl.js~CopyrightControl#render",
    "access": "private",
    "description": null,
    "lineNumber": 61,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 412,
    "kind": "member",
    "name": "content",
    "memberof": "build/maplibre/controls/CopyrightControl.js~CopyrightControl",
    "static": false,
    "longname": "build/maplibre/controls/CopyrightControl.js~CopyrightControl#content",
    "access": "private",
    "description": null,
    "lineNumber": 68,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 413,
    "kind": "file",
    "name": "build/maplibre/controls/index.js",
    "content": "// eslint-disable-next-line import/prefer-default-export\nexport { default as CopyrightControl } from './CopyrightControl';\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/maplibre/controls/index.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 414,
    "kind": "file",
    "name": "build/maplibre/index.js",
    "content": "export * from '../api';\nexport * from '../common';\nexport * from './controls';\nexport * from './layers';\nexport * from './utils';\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/maplibre/index.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 415,
    "kind": "file",
    "name": "build/maplibre/layers/Layer.js",
    "content": "import { Evented } from 'maplibre-gl';\nimport { v4 as uuid } from 'uuid';\n/**\n * A class representing a layer to display on an Maplibre map.\n *\n * @example\n * import { Layer } from 'mobility-toolbox-js/Maplibre';\n *\n * const layer = new Layer({ id:'MyLayer' });\n *\n * @implements {maplibregl.CustomLayerInterface}\n * @extends {maplibregl.Evented}\n * @private\n */\nclass Layer extends Evented {\n    constructor(options = {}) {\n        super();\n        this.options = {};\n        this.type = 'custom';\n        this.options = options;\n        this.id = options.id || uuid();\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    onAdd(map, gl) {\n        this.map = map;\n    }\n    onRemove(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    map, \n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    gl) {\n        this.map = undefined;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    render(gl) { }\n}\nexport default Layer;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/maplibre/layers/Layer.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 416,
    "kind": "class",
    "name": "Layer",
    "memberof": "build/maplibre/layers/Layer.js",
    "static": true,
    "longname": "build/maplibre/layers/Layer.js~Layer",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/maplibre/layers/Layer.js",
    "importStyle": "Layer",
    "description": "A class representing a layer to display on an Maplibre map.",
    "examples": [
      "import { Layer } from 'mobility-toolbox-js/Maplibre';\n\nconst layer = new Layer({ id:'MyLayer' });"
    ],
    "lineNumber": 15,
    "interface": false,
    "extends": [
      "maplibregl.Evented"
    ],
    "implements": [
      "maplibregl.CustomLayerInterface"
    ]
  },
  {
    "__docId__": 417,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "build/maplibre/layers/Layer.js~Layer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/layers/Layer.js~Layer#constructor",
    "access": "private",
    "description": null,
    "lineNumber": 16,
    "undocument": true
  },
  {
    "__docId__": 418,
    "kind": "member",
    "name": "options",
    "memberof": "build/maplibre/layers/Layer.js~Layer",
    "static": false,
    "longname": "build/maplibre/layers/Layer.js~Layer#options",
    "access": "private",
    "description": null,
    "lineNumber": 18,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 419,
    "kind": "member",
    "name": "type",
    "memberof": "build/maplibre/layers/Layer.js~Layer",
    "static": false,
    "longname": "build/maplibre/layers/Layer.js~Layer#type",
    "access": "private",
    "description": null,
    "lineNumber": 19,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 421,
    "kind": "member",
    "name": "id",
    "memberof": "build/maplibre/layers/Layer.js~Layer",
    "static": false,
    "longname": "build/maplibre/layers/Layer.js~Layer#id",
    "access": "private",
    "description": null,
    "lineNumber": 21,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 422,
    "kind": "method",
    "name": "onAdd",
    "memberof": "build/maplibre/layers/Layer.js~Layer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/layers/Layer.js~Layer#onAdd",
    "access": "private",
    "description": null,
    "lineNumber": 24,
    "undocument": true,
    "params": [
      {
        "name": "map",
        "types": [
          "*"
        ]
      },
      {
        "name": "gl",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 423,
    "kind": "member",
    "name": "map",
    "memberof": "build/maplibre/layers/Layer.js~Layer",
    "static": false,
    "longname": "build/maplibre/layers/Layer.js~Layer#map",
    "access": "private",
    "description": null,
    "lineNumber": 25,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 424,
    "kind": "method",
    "name": "onRemove",
    "memberof": "build/maplibre/layers/Layer.js~Layer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/layers/Layer.js~Layer#onRemove",
    "access": "private",
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "params": [
      {
        "name": "map",
        "types": [
          "*"
        ]
      },
      {
        "name": "gl",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 426,
    "kind": "method",
    "name": "render",
    "memberof": "build/maplibre/layers/Layer.js~Layer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/layers/Layer.js~Layer#render",
    "access": "private",
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "params": [
      {
        "name": "gl",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 427,
    "kind": "file",
    "name": "build/maplibre/layers/RealtimeLayer.js",
    "content": "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _RealtimeLayer_internalId;\nimport { point } from '@turf/helpers';\nimport transformRotate from '@turf/transform-rotate';\nimport { getHeight, getWidth } from 'ol/extent';\nimport { fromLonLat } from 'ol/proj';\nimport RealtimeEngine from '../../common/utils/RealtimeEngine';\nimport { getSourceCoordinates } from '../utils';\nimport Layer from './Layer';\n/**\n * A Maplibre layer able to display data from the [geOps Realtime API](https://developer.geops.io/apis/realtime/).\n *\n * @example\n * import { Map } from 'maplibre-gl';\n * import { RealtimeLayer } from 'mobility-toolbox-js/maplibre';\n *\n * // Define the map\n * const map = new Map({ ... });\n *\n * // Define your layer map\n * const layer = new RealtimeLayer({\n *   apiKey: \"yourApiKey\"\n *   // url: \"wss://api.geops.io/tracker-ws/v1/\",\n * });\n *\n * // Add the layer to your map *\n * map.on('load', () => {\n *   map.addLayer(layer);\n * });\n *\n *\n * @see <a href=\"/api/class/src/api/RealtimeAPI%20js~RealtimeAPI%20html\">RealtimeAPI</a>\n * @see <a href=\"/example/mb-realtime>MapLibre Realtime layer example</a>\n *\n * @implements {maplibregl.CustomLayerInterface}\n * @extends {maplibregl.Evented}\n * @classproperty {function} filter - Filter out a train. This function must be fast, it is executed for every trajectory on every render frame.\n * @classproperty {RealtimeMode} mode - The realtime mode to use.\n * @classproperty {RealtimeMot[]} mots - Filter trains by its mode of transportation. It filters trains on backend side.\n * @classproperty {RealtimeTenant} tenant - Filter trains by its tenant. It filters trains on backend side.\n * @classproperty {function} sort - Sort trains. This function must be fast, it is executed on every render frame.\n * @classproperty {function} style - Function to style the vehicles.\n s\n * @public\n */\nclass RealtimeLayer extends Layer {\n    get canvas() {\n        return this.engine.canvas;\n    }\n    get pixelRatio() {\n        return this.engine.pixelRatio || 1;\n    }\n    set pixelRatio(pixelRatio) {\n        this.engine.pixelRatio = pixelRatio || 1;\n    }\n    /**\n     * Constructor.\n     *\n     * @param {RealtimeLayerOptions} options\n     * @param {string} options.apiKey Access key for [geOps apis](https://developer.geops.io/).\n     * @param {FilterFunction} options.filter Filter out a train. This function must be fast, it is executed for every trajectory on every render frame.\n     * @param {getMotsByZoomFunction} options.getMotsByZoom Returns for each zoom level the list of MOTs to display. It filters trains on backend side.\n     * @param {number} [options.minZoomInterpolation=8] Minimal zoom level where to start to interpolate train positions.\n     * @param {RealtimeMode} [options.mode='topographic'] The realtime mode to use.\n     * @param {SortFunction} options.sort Sort trains. This function must be fast, it is executed on every render frame.\n     * @param {RealtimeStyleFunction} options.style Function to style the vehicles.\n     * @param {RealtimeTenant} options.tenant Filter trains by its tenant. It filters trains on backend side.\n     * @param {string} [options.url=\"wss://api.geops.io/tracker-ws/v1/\"] The geOps Realtime API url.\n     */\n    constructor(options = {}) {\n        var _a;\n        const id = (options === null || options === void 0 ? void 0 : options.id) || 'realtime';\n        super(Object.assign(Object.assign({}, options), { id: 'realtime-custom-' + id }));\n        _RealtimeLayer_internalId.set(this, void 0);\n        __classPrivateFieldSet(this, _RealtimeLayer_internalId, id, \"f\");\n        this.engine = new RealtimeEngine(Object.assign({ getViewState: this.getViewState.bind(this), onRender: this.onRealtimeEngineRender.bind(this) }, options));\n        this.sourceId = __classPrivateFieldGet(this, _RealtimeLayer_internalId, \"f\");\n        this.source = {\n            // Set to true if the canvas source is animated. If the canvas is static, animate should be set to false to improve performance.\n            animate: true,\n            // @ts-expect-error bad type definition\n            attribution: (_a = options.attribution) === null || _a === void 0 ? void 0 : _a.join(', '),\n            canvas: this.canvas,\n            // Set a default coordinates, it will be overrides on next data update\n            coordinates: [\n                [0, 0],\n                [1, 1],\n                [2, 2],\n                [0, 0],\n            ],\n            loaded: true,\n            type: 'canvas',\n        };\n        this.layer = {\n            id: __classPrivateFieldGet(this, _RealtimeLayer_internalId, \"f\"),\n            layout: {\n                visibility: 'visible',\n            },\n            paint: {\n                'raster-fade-duration': 0,\n                'raster-opacity': 1,\n                'raster-resampling': 'nearest', // important otherwise it looks blurry\n            },\n            source: this.sourceId,\n            type: 'raster',\n        };\n        this.onLoad = this.onLoad.bind(this);\n        this.onMove = this.onMove.bind(this);\n        this.onMoveEnd = this.onMoveEnd.bind(this);\n        this.onZoomEnd = this.onZoomEnd.bind(this);\n    }\n    /**\n     * Return the current view state. Used by the RealtimeEngine.\n     * @private\n     */\n    getViewState() {\n        if (!this.map) {\n            return {};\n        }\n        if (!this.pixelRatio) {\n            this.pixelRatio = 1;\n        }\n        const { height, width } = this.map.getCanvas();\n        const center = this.map.getCenter();\n        // We use turf here to have good transform.\n        // @ts-expect-error bad type definition\n        const leftBottom = this.map.unproject({\n            x: 0,\n            y: height / this.pixelRatio,\n        }); // southWest\n        // @ts-expect-error bad type definition\n        const rightTop = this.map.unproject({\n            x: width / this.pixelRatio,\n            y: 0,\n        }); // north east\n        const coord0 = transformRotate(point([leftBottom.lng, leftBottom.lat]), -this.map.getBearing(), {\n            pivot: [center.lng, center.lat],\n        }).geometry.coordinates;\n        const coord1 = transformRotate(point([rightTop.lng, rightTop.lat]), -this.map.getBearing(), {\n            pivot: [center.lng, center.lat],\n        }).geometry.coordinates;\n        const bounds = [...fromLonLat(coord0), ...fromLonLat(coord1)];\n        const xResolution = getWidth(bounds) / (width / this.pixelRatio);\n        const yResolution = getHeight(bounds) / (height / this.pixelRatio);\n        const res = Math.max(xResolution, yResolution);\n        // Coordinate of trajectories are in mercator so we have to pass the proper resolution and center in mercator.\n        return {\n            center: fromLonLat([center.lng, center.lat]),\n            extent: bounds,\n            pixelRatio: this.pixelRatio,\n            resolution: res,\n            rotation: -(this.map.getBearing() * Math.PI) / 180,\n            size: [width / this.pixelRatio, height / this.pixelRatio],\n            visible: true,\n            zoom: this.map.getZoom() - 1,\n        };\n    }\n    /**\n     * Add sources, layers and listeners to the map.\n     */\n    onAdd(map, gl) {\n        super.onAdd(map, gl);\n        this.engine.attachToMap();\n        if (map.isStyleLoaded()) {\n            this.onLoad();\n        }\n        map.on('load', this.onLoad);\n    }\n    onLoad() {\n        var _a, _b, _c, _d;\n        if (!((_a = this.map) === null || _a === void 0 ? void 0 : _a.getSource(this.sourceId))) {\n            (_b = this.map) === null || _b === void 0 ? void 0 : _b.addSource(this.sourceId, this.source);\n        }\n        if (!((_c = this.map) === null || _c === void 0 ? void 0 : _c.getLayer(this.layer.id))) {\n            (_d = this.map) === null || _d === void 0 ? void 0 : _d.addLayer(this.layer, this.id);\n        }\n        this.start();\n    }\n    /**\n     * Callback on 'move' event.\n     */\n    onMove() {\n        this.engine.renderTrajectories();\n    }\n    /**\n     * Callback on 'moveend' event.\n     */\n    onMoveEnd() {\n        this.engine.renderTrajectories();\n        if (this.engine.isUpdateBboxOnMoveEnd) {\n            this.engine.setBbox();\n        }\n    }\n    /**\n     * Callback when the RealtimeEngine has rendered successfully.\n     */\n    onRealtimeEngineRender() {\n        var _a;\n        if ((_a = this.map) === null || _a === void 0 ? void 0 : _a.style) {\n            const extent = getSourceCoordinates(this.map, this.pixelRatio);\n            const source = this.map.getSource(this.sourceId);\n            if (source) {\n                // @ts-expect-error bad type definition\n                source.setCoordinates(extent);\n            }\n        }\n    }\n    /**\n     * Remove source, layers and listeners from the map.\n     */\n    onRemove(map, gl) {\n        this.engine.detachFromMap();\n        this.stop();\n        map.off('load', this.onLoad);\n        if (map.getLayer(this.layer.id)) {\n            map.removeLayer(this.layer.id);\n        }\n        if (map.getSource(this.sourceId)) {\n            map.removeSource(this.sourceId);\n        }\n        super.onRemove(map, gl);\n    }\n    onZoomEnd() {\n        this.engine.onZoomEnd();\n    }\n    /**\n     * Start updating vehicles position.\n     *\n     * @public\n     */\n    start() {\n        var _a, _b, _c;\n        this.engine.start();\n        (_a = this.map) === null || _a === void 0 ? void 0 : _a.on('move', this.onMove);\n        (_b = this.map) === null || _b === void 0 ? void 0 : _b.on('moveend', this.onMoveEnd);\n        (_c = this.map) === null || _c === void 0 ? void 0 : _c.on('zoomend', this.onZoomEnd);\n    }\n    /**\n     * Stop updating vehicles position.\n     *\n     * @public\n     */\n    stop() {\n        var _a, _b, _c;\n        this.engine.stop();\n        (_a = this.map) === null || _a === void 0 ? void 0 : _a.off('move', this.onMove);\n        (_b = this.map) === null || _b === void 0 ? void 0 : _b.off('moveend', this.onMoveEnd);\n        (_c = this.map) === null || _c === void 0 ? void 0 : _c.off('zoomend', this.onZoomEnd);\n    }\n}\n_RealtimeLayer_internalId = new WeakMap();\nexport default RealtimeLayer;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/maplibre/layers/RealtimeLayer.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 428,
    "kind": "variable",
    "name": "__classPrivateFieldSet",
    "memberof": "build/maplibre/layers/RealtimeLayer.js",
    "static": true,
    "longname": "build/maplibre/layers/RealtimeLayer.js~__classPrivateFieldSet",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/maplibre/layers/RealtimeLayer.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 429,
    "kind": "variable",
    "name": "__classPrivateFieldGet",
    "memberof": "build/maplibre/layers/RealtimeLayer.js",
    "static": true,
    "longname": "build/maplibre/layers/RealtimeLayer.js~__classPrivateFieldGet",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/maplibre/layers/RealtimeLayer.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 430,
    "kind": "class",
    "name": "RealtimeLayer",
    "memberof": "build/maplibre/layers/RealtimeLayer.js",
    "static": true,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "access": "public",
    "export": true,
    "importPath": "mobility-toolbox-js/build/maplibre/layers/RealtimeLayer.js",
    "importStyle": "RealtimeLayer",
    "description": "A Maplibre layer able to display data from the [geOps Realtime API](https://developer.geops.io/apis/realtime/).",
    "examples": [
      "import { Map } from 'maplibre-gl';\nimport { RealtimeLayer } from 'mobility-toolbox-js/maplibre';\n\n// Define the map\nconst map = new Map({ ... });\n\n// Define your layer map\nconst layer = new RealtimeLayer({\n  apiKey: \"yourApiKey\"\n  // url: \"wss://api.geops.io/tracker-ws/v1/\",\n});\n\n// Add the layer to your map *\nmap.on('load', () => {\n  map.addLayer(layer);\n});"
    ],
    "see": [
      "<a href=\"/api/class/src/api/RealtimeAPI%20js~RealtimeAPI%20html\">RealtimeAPI</a>",
      "<a href=\"/example/mb-realtime>MapLibre Realtime layer example</a>"
    ],
    "lineNumber": 56,
    "unknown": [
      {
        "tagName": "@classproperty",
        "tagValue": "{function} filter - Filter out a train. This function must be fast, it is executed for every trajectory on every render frame."
      },
      {
        "tagName": "@classproperty",
        "tagValue": "{RealtimeMode} mode - The realtime mode to use."
      },
      {
        "tagName": "@classproperty",
        "tagValue": "{RealtimeMot[]} mots - Filter trains by its mode of transportation. It filters trains on backend side."
      },
      {
        "tagName": "@classproperty",
        "tagValue": "{RealtimeTenant} tenant - Filter trains by its tenant. It filters trains on backend side."
      },
      {
        "tagName": "@classproperty",
        "tagValue": "{function} sort - Sort trains. This function must be fast, it is executed on every render frame."
      },
      {
        "tagName": "@classproperty",
        "tagValue": "{function} style - Function to style the vehicles.\ns"
      }
    ],
    "interface": false,
    "extends": [
      "maplibregl.Evented"
    ],
    "implements": [
      "maplibregl.CustomLayerInterface"
    ]
  },
  {
    "__docId__": 431,
    "kind": "get",
    "name": "canvas",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#canvas",
    "access": "private",
    "description": null,
    "lineNumber": 57,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 432,
    "kind": "get",
    "name": "pixelRatio",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#pixelRatio",
    "access": "private",
    "description": null,
    "lineNumber": 60,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 433,
    "kind": "set",
    "name": "pixelRatio",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#pixelRatio",
    "access": "private",
    "description": null,
    "lineNumber": 63,
    "undocument": true
  },
  {
    "__docId__": 434,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#constructor",
    "access": "private",
    "description": "Constructor.",
    "lineNumber": 80,
    "params": [
      {
        "nullable": null,
        "types": [
          "RealtimeLayerOptions"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "options.apiKey",
        "description": "Access key for [geOps apis](https://developer.geops.io/)."
      },
      {
        "nullable": null,
        "types": [
          "FilterFunction"
        ],
        "spread": false,
        "optional": false,
        "name": "options.filter",
        "description": "Filter out a train. This function must be fast, it is executed for every trajectory on every render frame."
      },
      {
        "nullable": null,
        "types": [
          "getMotsByZoomFunction"
        ],
        "spread": false,
        "optional": false,
        "name": "options.getMotsByZoom",
        "description": "Returns for each zoom level the list of MOTs to display. It filters trains on backend side."
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "8",
        "defaultRaw": 8,
        "name": "options.minZoomInterpolation",
        "description": "Minimal zoom level where to start to interpolate train positions."
      },
      {
        "nullable": null,
        "types": [
          "RealtimeMode"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "'topographic'",
        "defaultRaw": "'topographic'",
        "name": "options.mode",
        "description": "The realtime mode to use."
      },
      {
        "nullable": null,
        "types": [
          "SortFunction"
        ],
        "spread": false,
        "optional": false,
        "name": "options.sort",
        "description": "Sort trains. This function must be fast, it is executed on every render frame."
      },
      {
        "nullable": null,
        "types": [
          "RealtimeStyleFunction"
        ],
        "spread": false,
        "optional": false,
        "name": "options.style",
        "description": "Function to style the vehicles."
      },
      {
        "nullable": null,
        "types": [
          "RealtimeTenant"
        ],
        "spread": false,
        "optional": false,
        "name": "options.tenant",
        "description": "Filter trains by its tenant. It filters trains on backend side."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "\"wss://api.geops.io/tracker-ws/v1/\"",
        "defaultRaw": "wss://api.geops.io/tracker-ws/v1/",
        "name": "options.url",
        "description": "The geOps Realtime API url."
      }
    ]
  },
  {
    "__docId__": 435,
    "kind": "member",
    "name": "engine",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#engine",
    "access": "private",
    "description": null,
    "lineNumber": 86,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 436,
    "kind": "member",
    "name": "sourceId",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#sourceId",
    "access": "private",
    "description": null,
    "lineNumber": 87,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 437,
    "kind": "member",
    "name": "source",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#source",
    "access": "private",
    "description": null,
    "lineNumber": 88,
    "undocument": true,
    "type": {
      "types": [
        "{\"animate\": boolean, \"attribution\": *, \"canvas\": *, \"coordinates\": *, \"loaded\": boolean, \"type\": string}"
      ]
    }
  },
  {
    "__docId__": 438,
    "kind": "member",
    "name": "layer",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#layer",
    "access": "private",
    "description": null,
    "lineNumber": 104,
    "undocument": true,
    "type": {
      "types": [
        "{\"id\": *, \"layout\": *, \"paint\": *, \"source\": *, \"type\": string}"
      ]
    }
  },
  {
    "__docId__": 443,
    "kind": "method",
    "name": "getViewState",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#getViewState",
    "access": "private",
    "description": "Return the current view state. Used by the RealtimeEngine.",
    "lineNumber": 126,
    "params": [],
    "return": {
      "types": [
        "{\"center\": *, \"extent\": *, \"pixelRatio\": *, \"resolution\": *, \"rotation\": *, \"size\": *, \"visible\": boolean, \"zoom\": *}"
      ]
    }
  },
  {
    "__docId__": 445,
    "kind": "method",
    "name": "onAdd",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#onAdd",
    "access": "private",
    "description": "Add sources, layers and listeners to the map.",
    "lineNumber": 171,
    "params": [
      {
        "name": "map",
        "types": [
          "*"
        ]
      },
      {
        "name": "gl",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 446,
    "kind": "method",
    "name": "onLoad",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#onLoad",
    "access": "private",
    "description": null,
    "lineNumber": 179,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 447,
    "kind": "method",
    "name": "onMove",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#onMove",
    "access": "private",
    "description": "Callback on 'move' event.",
    "lineNumber": 192,
    "params": [],
    "return": null
  },
  {
    "__docId__": 448,
    "kind": "method",
    "name": "onMoveEnd",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#onMoveEnd",
    "access": "private",
    "description": "Callback on 'moveend' event.",
    "lineNumber": 198,
    "params": [],
    "return": null
  },
  {
    "__docId__": 449,
    "kind": "method",
    "name": "onRealtimeEngineRender",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#onRealtimeEngineRender",
    "access": "private",
    "description": "Callback when the RealtimeEngine has rendered successfully.",
    "lineNumber": 207,
    "params": [],
    "return": null
  },
  {
    "__docId__": 450,
    "kind": "method",
    "name": "onRemove",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#onRemove",
    "access": "private",
    "description": "Remove source, layers and listeners from the map.",
    "lineNumber": 221,
    "params": [
      {
        "name": "map",
        "types": [
          "*"
        ]
      },
      {
        "name": "gl",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 451,
    "kind": "method",
    "name": "onZoomEnd",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#onZoomEnd",
    "access": "private",
    "description": null,
    "lineNumber": 233,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 452,
    "kind": "method",
    "name": "start",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#start",
    "access": "public",
    "description": "Start updating vehicles position.",
    "lineNumber": 241,
    "params": [],
    "return": null
  },
  {
    "__docId__": 453,
    "kind": "method",
    "name": "stop",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#stop",
    "access": "public",
    "description": "Stop updating vehicles position.",
    "lineNumber": 253,
    "params": [],
    "return": null
  },
  {
    "__docId__": 454,
    "kind": "file",
    "name": "build/maplibre/layers/index.js",
    "content": "export { default as Layer } from './Layer';\nexport { default as RealtimeLayer } from './RealtimeLayer';\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/maplibre/layers/index.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 455,
    "kind": "file",
    "name": "build/maplibre/utils/getMercatorResolution.js",
    "content": "import { getWidth, getHeight } from 'ol/extent';\nimport { fromLonLat } from 'ol/proj';\n/**\n * Get the current resolution of a Maplibre map.\n * @param {maplibregl.Map} map A map object.\n */\nconst getMercatorResolution = (map) => {\n    const bounds = map.getBounds().toArray();\n    const a = fromLonLat(bounds[0]);\n    const b = fromLonLat(bounds[1]);\n    const extent = [...a, ...b];\n    const { width, height } = map.getCanvas();\n    const xResolution = getWidth(extent) / width;\n    const yResolution = getHeight(extent) / height;\n    return Math.max(xResolution, yResolution);\n};\nexport default getMercatorResolution;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/maplibre/utils/getMercatorResolution.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 456,
    "kind": "function",
    "name": "getMercatorResolution",
    "memberof": "build/maplibre/utils/getMercatorResolution.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/maplibre/utils/getMercatorResolution.js~getMercatorResolution",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/maplibre/utils/getMercatorResolution.js",
    "importStyle": "getMercatorResolution",
    "description": "Get the current resolution of a Maplibre map.",
    "lineNumber": 7,
    "params": [
      {
        "nullable": null,
        "types": [
          "maplibregl.Map"
        ],
        "spread": false,
        "optional": false,
        "name": "map",
        "description": "A map object."
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 457,
    "kind": "file",
    "name": "build/maplibre/utils/getSourceCoordinates.js",
    "content": "/**\n * Get the canvas source coordinates of the current map's extent.\n * @param {maplibregl.Map} map A map object.\n * @param {number} [pixelRatio=1] The pixel ratio.\n */\nexport const getSourceCoordinates = (map, pixelRatio = 1) => {\n    // Requesting getBounds is not enough when we rotate the map, so we request manually each corner.\n    const { height, width } = map.getCanvas();\n    // @ts-expect-error - to fix\n    const leftTop = map.unproject({ x: 0, y: 0 });\n    // @ts-expect-error - to fix\n    const leftBottom = map.unproject({ x: 0, y: height / pixelRatio }); // southWest\n    // @ts-expect-error - to fix\n    const rightBottom = map.unproject({\n        x: width / pixelRatio,\n        y: height / pixelRatio,\n    });\n    // @ts-expect-error - to fix\n    const rightTop = map.unproject({ x: width / pixelRatio, y: 0 }); // north east\n    return [\n        [leftTop.lng, leftTop.lat],\n        [rightTop.lng, rightTop.lat],\n        [rightBottom.lng, rightBottom.lat],\n        [leftBottom.lng, leftBottom.lat],\n    ];\n};\nexport default getSourceCoordinates;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/maplibre/utils/getSourceCoordinates.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 458,
    "kind": "function",
    "name": "getSourceCoordinates",
    "memberof": "build/maplibre/utils/getSourceCoordinates.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/maplibre/utils/getSourceCoordinates.js~getSourceCoordinates",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/maplibre/utils/getSourceCoordinates.js",
    "importStyle": "{getSourceCoordinates}",
    "description": "Get the canvas source coordinates of the current map's extent.",
    "lineNumber": 6,
    "params": [
      {
        "nullable": null,
        "types": [
          "maplibregl.Map"
        ],
        "spread": false,
        "optional": false,
        "name": "map",
        "description": "A map object."
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "1",
        "defaultRaw": 1,
        "name": "pixelRatio",
        "description": "The pixel ratio."
      }
    ],
    "return": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 459,
    "kind": "file",
    "name": "build/maplibre/utils/index.js",
    "content": "export { default as getSourceCoordinates } from './getSourceCoordinates';\nexport { default as getMercatorResolution } from './getMercatorResolution';\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/maplibre/utils/index.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 460,
    "kind": "file",
    "name": "build/ol/controls/CopyrightControl.js",
    "content": "import Control from 'ol/control/Control';\nimport { inView } from 'ol/layer/Layer';\nimport createDefaultCopyrightElement from '../../common/utils/createDefaultCopyrightElt';\nimport removeDuplicate from '../../common/utils/removeDuplicate';\n/**\n * Display layer's copyrights. Adding the possibility to format them as you wish.\n *\n * @example\n * import { Map } from 'ol';\n * import { CopyrightControl } from 'mobility-toolbox-js/ol';\n *\n * const map = new Map({\n *   target: 'map',\n * });\n *\n * const control = new CopyrightControl();\n * map.addControl(control);\n *\n *\n * @see <a href=\"/example/ol-realtime>OpenLayers Realtime layer example</a>\n *\n * @extends {ol/control/Control~Control}\n *\n */\nclass CopyrightControl extends Control {\n    /**\n     * Constructor.\n     *\n     * @param {Object} options\n     * @param {Function} format Function used to format the list of copyrights available to a single string. By default join all the copyrights with a |.\n     * @public\n     */\n    constructor(options = {}) {\n        const element = createDefaultCopyrightElement();\n        element.className = options.className || 'mbt-copyright';\n        super(Object.assign({ element }, options));\n        this.format =\n            options.format ||\n                ((copyrights) => {\n                    return copyrights === null || copyrights === void 0 ? void 0 : copyrights.join(' | ');\n                });\n    }\n    render({ frameState }) {\n        if (!frameState) {\n            this.element.innerHTML = '';\n            return;\n        }\n        let copyrights = [];\n        // This code loop comes mainly from ol.\n        frameState === null || frameState === void 0 ? void 0 : frameState.layerStatesArray.forEach((layerState) => {\n            var _a;\n            const { layer } = layerState;\n            if (frameState && inView(layerState, frameState.viewState)) {\n                if ((_a = layer === null || layer === void 0 ? void 0 : layer.getSource()) === null || _a === void 0 ? void 0 : _a.getAttributions()) {\n                    copyrights = copyrights.concat(layer.getSource().getAttributions()(frameState));\n                }\n                if (layer === null || layer === void 0 ? void 0 : layer.get('copyrights')) {\n                    let copyProp = layer.get('copyrights');\n                    copyProp = !Array.isArray(copyProp) ? [copyProp] : copyProp;\n                    if (copyProp === null || copyProp === void 0 ? void 0 : copyProp.length) {\n                        copyrights.push(...copyProp);\n                    }\n                }\n            }\n        });\n        const unique = removeDuplicate(copyrights) || [];\n        this.element.innerHTML = this.format(unique);\n    }\n}\nexport default CopyrightControl;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/controls/CopyrightControl.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 461,
    "kind": "class",
    "name": "CopyrightControl",
    "memberof": "build/ol/controls/CopyrightControl.js",
    "static": true,
    "longname": "build/ol/controls/CopyrightControl.js~CopyrightControl",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/ol/controls/CopyrightControl.js",
    "importStyle": "CopyrightControl",
    "description": "Display layer's copyrights. Adding the possibility to format them as you wish.",
    "examples": [
      "import { Map } from 'ol';\nimport { CopyrightControl } from 'mobility-toolbox-js/ol';\n\nconst map = new Map({\n  target: 'map',\n});\n\nconst control = new CopyrightControl();\nmap.addControl(control);"
    ],
    "see": [
      "<a href=\"/example/ol-realtime>OpenLayers Realtime layer example</a>"
    ],
    "lineNumber": 25,
    "interface": false,
    "extends": [
      "ol/control/Control~Control"
    ]
  },
  {
    "__docId__": 462,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "build/ol/controls/CopyrightControl.js~CopyrightControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/CopyrightControl.js~CopyrightControl#constructor",
    "access": "public",
    "description": "Constructor.",
    "lineNumber": 33,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "format",
        "description": "Function used to format the list of copyrights available to a single string. By default join all the copyrights with a |."
      }
    ]
  },
  {
    "__docId__": 463,
    "kind": "member",
    "name": "format",
    "memberof": "build/ol/controls/CopyrightControl.js~CopyrightControl",
    "static": false,
    "longname": "build/ol/controls/CopyrightControl.js~CopyrightControl#format",
    "access": "private",
    "description": null,
    "lineNumber": 37,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 464,
    "kind": "method",
    "name": "render",
    "memberof": "build/ol/controls/CopyrightControl.js~CopyrightControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/CopyrightControl.js~CopyrightControl#render",
    "access": "private",
    "description": null,
    "lineNumber": 43,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"frameState\": *}"
        ],
        "defaultRaw": {
          "frameState": null
        },
        "defaultValue": "{\"frameState\":null}"
      }
    ],
    "return": null
  },
  {
    "__docId__": 465,
    "kind": "file",
    "name": "build/ol/controls/RoutingControl.js",
    "content": "import { Feature } from 'ol';\nimport Control from 'ol/control/Control';\nimport { click } from 'ol/events/condition';\nimport BaseEvent from 'ol/events/Event';\nimport { buffer } from 'ol/extent';\nimport { GeoJSON } from 'ol/format';\nimport { LineString, Point } from 'ol/geom';\nimport { Modify } from 'ol/interaction';\nimport VectorLayer from 'ol/layer/Vector';\nimport { unByKey } from 'ol/Observable';\nimport { fromLonLat, toLonLat } from 'ol/proj';\nimport VectorSource from 'ol/source/Vector';\nimport { RoutingAPI } from '../../api';\n// Examples for a single hop:\n// basel sbb a station named \"basel sbb\"\n// ZUE, station \"Zürich HB\" by its common abbreviation\n// Zürich Hauptbahnhof or HBF Zürich are all valid synonyms für \"Zürich HB\"\n// @47.37811,8.53935 a station at position 47.37811, 8.53935\n// @47.37811,8.53935$4 track 4 in a station at position 47.37811, 8.53935\n// zürich hb@47.37811,8.53935$8 track 8 in station \"Zürich HB\" at position 47.37811, 8.53935\nconst REGEX_VIA_POINT = /^([^@$!\\n]*)(@?([\\d.]+),([\\d.]+))?(\\$?([a-zA-Z0-9]{0,2}))$/;\n// Examples for a single hop:\n//\n// 47.37811,8.53935 a position 47.37811, 8.53935\nconst REGEX_VIA_POINT_COORD = /^([\\d.]+),([\\d.]+)$/;\n// Examples for a single hop:\n//\n// !8596126 a station with id 8596126\n// !8596126$4 a station with id 8596126\nconst REGEX_VIA_POINT_STATION_ID = /^!([^$]*)(\\$?([a-zA-Z0-9]{0,2}))$/;\nconst STOP_FETCH_ABORT_CONTROLLER_KEY = 'stop-fetch';\nconst getFlatCoordinatesFromSegments = (segmentArray) => {\n    const coords = [];\n    segmentArray.forEach((seg) => {\n        var _a;\n        // @ts-expect-error missing type\n        const coordArr = (_a = seg.getGeometry()) === null || _a === void 0 ? void 0 : _a.getCoordinates();\n        if (coordArr === null || coordArr === void 0 ? void 0 : coordArr.length) {\n            coords.push(...coordArr);\n        }\n    });\n    return coords;\n};\n/**\n * This OpenLayers control allows the user to add and modifiy via points to\n * a map and request a route from the [geOps Routing API](https://developer.geops.io/apis/routing/).\n *\n * @example\n * import { Map } from 'ol';\n * import { RoutingControl } from 'mobility-toolbox-js/ol';\n *\n * const map = new Map({\n *   target: 'map'\n * });\n *\n * const control = new RoutingControl();\n *\n * map.addControl(control);\n *\n * @classproperty {string} mot - Mean of transport to be used for routing.\n * @classproperty {VectorLayer} routingLayer - Layer for adding route features.\n * @classproperty {boolean} loading - True if the control is requesting the backend.\n *\n * @see <a href=\"/example/ol-routing\">Openlayers routing example</a>\n *\n * @extends {ol/control/Control~Control}\n *\n * @public\n */\nclass RoutingControl extends Control {\n    /**\n     * Constructor.\n     *\n     * @param {Object} options\n     * @param {string} options.apiKey Access key for [geOps APIs](https://developer.geops.io/).\n     * @param {Object} options.apiParams Request parameters. See [geOps Routing API documentation](https://developer.geops.io/apis/routing/).\n     * @param {Array.<Array<graph=\"osm\", minZoom=0, maxZoom=99>>} [options.graphs=[['osm', 0, 99]]] - Array of routing graphs and min/max zoom levels. If you use the control in combination with the [geOps Maps API](https://developer.geops.io/apis/maps/), you may want to use the optimal level of generalizations: \"[['gen4', 0, 8], ['gen3', 8, 9], ['gen2', 9, 11], ['gen1', 11, 13], ['osm', 13, 99]]\".\n     * @param {string} [options.mot=\"bus\"] Mean of transport to be used for routing.\n     * @param {function} options.onRouteError Callback on request errors.\n     * @param {VectorLayer} [options.routingLayer=new VectorLayer()] Vector layer for adding route features.\n     * @param {boolean} [options.snapToClosestStation=false] If true, the routing will snap the coordinate to the closest station. Default to false.\n     * @param {StyleLike} options.style Style of the default vector layer.\n     * @param {boolean} [options.useRawViaPoints=fale] Experimental property. If true, it allows the user to add via points using different kind of string. See \"via\" parameter defined by the [geOps Routing API](https://developer.geops.io/apis/routing/). Default to false, only array of coordinates and station's id are supported as via points.\n     * @param {string} [options.url='https://api.geops.io/routing/v1/'] [geOps Realtime API](https://developer.geops.io/apis/realtime/) url.\n     * @public\n     */\n    constructor(options = {}) {\n        super(options);\n        this.abortControllers = {};\n        this.cacheStationData = {};\n        this.format = new GeoJSON({ featureProjection: 'EPSG:3857' });\n        this.graphs = [];\n        this.initialRouteDrag = {};\n        this.segments = [];\n        this.snapToClosestStation = false;\n        this.useRawViaPoints = false;\n        this.viaPoints = [];\n        if (!this.element) {\n            this.createDefaultElement();\n        }\n        /** True if the control is requesting the backend. */\n        this.loading = false;\n        this.active = options.active || true;\n        this.graphs = options.graphs || [['osm', 0, 99]];\n        this.mot = options.mot || 'bus';\n        this.modify = options.modify !== false;\n        this.apiParams = options.apiParams;\n        this.useRawViaPoints = options.useRawViaPoints || false;\n        this.snapToClosestStation = options.snapToClosestStation || false;\n        this.apiKey = options.apiKey;\n        this.stopsApiKey = options.stopsApiKey || this.apiKey;\n        this.stopsApiUrl = options.stopsApiUrl || 'https://api.geops.io/stops/v1/';\n        this.api = new RoutingAPI(Object.assign({}, options));\n        this.routingLayer =\n            options.routingLayer ||\n                new VectorLayer({\n                    source: new VectorSource(),\n                    style: options.style,\n                });\n        this.onRouteError =\n            options.onRouteError ||\n                ((error) => {\n                    this.dispatchEvent(new BaseEvent('change:route'));\n                    this.reset();\n                    // eslint-disable-next-line no-console\n                    console.error(error);\n                });\n        this.onMapClick = this.onMapClick.bind(this);\n        this.onModifyEnd = this.onModifyEnd.bind(this);\n        this.onModifyStart = this.onModifyStart.bind(this);\n        this.createModifyInteraction();\n        this.on('propertychange', (evt) => {\n            if (evt.key === 'active') {\n                this.onActiveChange();\n            }\n            if (evt.key === 'mot') {\n                if (this.viaPoints) {\n                    this.drawRoute();\n                }\n            }\n        });\n    }\n    /**\n     * Calculate at which resolutions corresponds each generalizations.\n     *\n     * @private\n     */\n    static getGraphsResolutions(graphs, map) {\n        const view = map.getView();\n        return graphs.map(([, minZoom, maxZoom]) => [\n            view.getResolutionForZoom(minZoom),\n            view.getResolutionForZoom(maxZoom || minZoom + 1),\n        ]);\n    }\n    /**\n     * Aborts viapoint and route requests\n     * @private\n     */\n    abortRequests() {\n        var _a;\n        // Abort Routing API requests\n        this.graphs.forEach((graph) => {\n            const graphName = graph[0];\n            if (this.abortControllers[graphName]) {\n                this.abortControllers[graphName].abort();\n            }\n            this.abortControllers[graphName] = new AbortController();\n        });\n        // Abort Stops API requests\n        (_a = this.abortControllers[STOP_FETCH_ABORT_CONTROLLER_KEY]) === null || _a === void 0 ? void 0 : _a.abort();\n        this.abortControllers[STOP_FETCH_ABORT_CONTROLLER_KEY] =\n            new AbortController();\n        this.loading = false;\n    }\n    activate() {\n        var _a;\n        const map = this.getMap();\n        if (map) {\n            this.format = new GeoJSON({\n                featureProjection: map.getView().getProjection(),\n            });\n            this.graphsResolutions = RoutingControl.getGraphsResolutions(this.graphs, map);\n            // Clean the modifyInteraction if present\n            if (this.modifyInteraction) {\n                map.removeInteraction(this.modifyInteraction);\n            }\n            // Add modify interaction, RoutingLayer and listeners\n            // this.routingLayer?.attachToMap(this.getMap());\n            if (this.modifyInteraction) {\n                map.addInteraction(this.modifyInteraction);\n            }\n            (_a = this.modifyInteraction) === null || _a === void 0 ? void 0 : _a.setActive(this.modify);\n            this.addListeners();\n        }\n    }\n    /**\n     * Add click listener to map.\n     * @private\n     */\n    addListeners() {\n        var _a;\n        if (!this.modify) {\n            return;\n        }\n        this.removeListeners();\n        this.onMapClickKey = (_a = this.getMap()) === null || _a === void 0 ? void 0 : _a.on('singleclick', this.onMapClick);\n    }\n    /**\n     * Adds/Replaces a viaPoint to the viaPoints array and redraws route:\n     *   Adds a viaPoint at end of array by default.\n     *   If an index is passed a viaPoint is added at the specified index.\n     *   If an index is passed and overwrite x is > 0, x viaPoints at the specified\n     *     index are replaced with a single new viaPoint.\n     * @param {string | Coordinate} coordinatesOrString Array of coordinates or a string representing a station\n     * @param {number} [index=-1] Integer representing the index of the added viaPoint. If not specified, the viaPoint is added at the end of the array.\n     * @param {number} [overwrite=0] Marks the number of viaPoints that are removed at the specified index on add.\n     * @public\n     */\n    addViaPoint(coordinatesOrString, index = -1, overwrite = 0) {\n        /* Add/Insert/Overwrite viapoint and redraw route */\n        this.viaPoints.splice(index === -1 ? this.viaPoints.length : index, overwrite, coordinatesOrString);\n        this.drawRoute();\n        this.dispatchEvent(new BaseEvent('change:route'));\n    }\n    /**\n     * Define a default element.\n     *\n     * @private\n     */\n    createDefaultElement() {\n        this.element = document.createElement('button');\n        this.element.id = 'ol-toggle-routing';\n        this.element.innerHTML = 'Toggle Route Control';\n        this.element.onclick = () => this.active ? this.deactivate() : this.activate();\n        Object.assign(this.element.style, {\n            position: 'absolute',\n            right: '10px',\n            top: '10px',\n        });\n    }\n    /**\n     * Create the interaction used to modify vertexes of features.\n     * @private\n     */\n    createModifyInteraction() {\n        var _a;\n        /**\n         * @type {ol.interaction.Modify}\n         * @private\n         */\n        // Define and add modify interaction\n        this.modifyInteraction = new Modify({\n            // hitDetection: this.routingLayer, // TODO: wait for ol, fixed in https://github.com/openlayers/openlayers/pull/16393\n            deleteCondition: (e) => {\n                var _a;\n                const feats = ((_a = e.target) === null || _a === void 0 ? void 0 : _a.getFeaturesAtPixel(e.pixel, {\n                    hitTolerance: 5,\n                })) || [];\n                const viaPoint = feats.find((feat) => { var _a; return ((_a = feat.getGeometry()) === null || _a === void 0 ? void 0 : _a.getType()) === 'Point' && feat.get('index'); });\n                if (click(e) && viaPoint) {\n                    // Remove node & viaPoint if an existing viaPoint was clicked\n                    this.removeViaPoint(viaPoint.get('index'));\n                    return true;\n                }\n                return false;\n            },\n            pixelTolerance: 6,\n            source: ((_a = this.routingLayer) === null || _a === void 0 ? void 0 : _a.getSource()) || undefined,\n        });\n        this.modifyInteraction.on('modifystart', this.onModifyStart);\n        this.modifyInteraction.on('modifyend', this.onModifyEnd);\n        this.modifyInteraction.setActive(false);\n    }\n    deactivate() {\n        const map = this.getMap();\n        if (map) {\n            // Remove modify interaction, RoutingLayer, listeners and viaPoints\n            // this.routingLayer?.detachFromMap();\n            if (this.modifyInteraction) {\n                map.removeInteraction(this.modifyInteraction);\n            }\n            this.removeListeners();\n            this.reset();\n        }\n    }\n    /**\n     * Draws route on map using an array of coordinates:\n     *   If a single coordinate is passed a single point feature is added to map.\n     *   If two or more coordinates are passed a request to the RoutingAPI fetches\n     *       the route using the passed coordinates and the current mot.\n     * @private\n     */\n    drawRoute() {\n        var _a, _b;\n        /* Calls RoutingAPI to draw a route using the viaPoints array */\n        this.abortRequests();\n        (_b = (_a = this.routingLayer) === null || _a === void 0 ? void 0 : _a.getSource()) === null || _b === void 0 ? void 0 : _b.clear();\n        if (!this.viaPoints.length) {\n            return null;\n        }\n        if (this.viaPoints.length === 1) {\n            // Add point for first node\n            return this.drawViaPoint(this.viaPoints[0], 0, this.abortControllers[STOP_FETCH_ABORT_CONTROLLER_KEY]);\n        }\n        const formattedViaPoints = this.viaPoints.map((viaPoint) => {\n            var _a;\n            if (Array.isArray(viaPoint)) {\n                const projection = (_a = this.getMap()) === null || _a === void 0 ? void 0 : _a.getView().getProjection();\n                // viaPoint is a coordinate\n                // Coordinates need to be reversed as required by the backend RoutingAPI\n                const [lon, lat] = toLonLat(viaPoint, projection);\n                return this.snapToClosestStation ? [`@${lat}`, lon] : [lat, lon];\n            }\n            // viaPoint is a string to use as it is\n            return this.useRawViaPoints ? viaPoint : `!${viaPoint}`;\n        });\n        this.loading = true;\n        // Create point features for the viaPoints\n        this.viaPoints.forEach((viaPoint, idx) => {\n            this.drawViaPoint(viaPoint, idx, this.abortControllers[STOP_FETCH_ABORT_CONTROLLER_KEY]);\n        });\n        return Promise.all(this.graphs.map(([graph], index) => {\n            const { signal } = this.abortControllers[graph];\n            if (!this.api) {\n                return Promise.resolve([]);\n            }\n            return this.api\n                .route(Object.assign({ 'coord-punish': 1000.0, 'coord-radius': 100.0, \n                // @ts-expect-error  missing property in swagger\n                elevation: false, graph, mot: this.mot, 'resolve-hops': false, via: `${formattedViaPoints.join('|')}` }, (this.apiParams || {})), { signal })\n                .then((featureCollection) => {\n                var _a, _b, _c;\n                this.segments = this.format.readFeatures(featureCollection);\n                if (this.mot === 'foot') {\n                    // Extract unique values from viaPoint target value\n                    const uniqueVias = this.segments.reduce((resultVias, currentFeat) => {\n                        const segTrg = currentFeat.get('trg');\n                        return resultVias.find((via) => via[0] === segTrg[0] && via[1] === segTrg[1])\n                            ? resultVias\n                            : [...resultVias, segTrg];\n                    }, []);\n                    // Create LineString features from segments with same unique value\n                    this.segments = uniqueVias.map((via) => {\n                        const viaSegments = this.segments.filter((seg) => {\n                            const segTrg = seg.get('trg');\n                            return segTrg[0] === via[0] && segTrg[1] === via[1];\n                        });\n                        const coords = getFlatCoordinatesFromSegments(viaSegments);\n                        return new Feature({\n                            geometry: new LineString(coords),\n                        });\n                    });\n                }\n                // Create the new route. This route will be modifiable by the Modifiy interaction.\n                const coords = getFlatCoordinatesFromSegments(this.segments);\n                const routeFeature = new Feature({\n                    geometry: new LineString(coords),\n                });\n                routeFeature.set('graph', graph);\n                routeFeature.set('mot', this.mot);\n                if (this.graphsResolutions &&\n                    ((_a = this.graphsResolutions[index]) === null || _a === void 0 ? void 0 : _a.length) >= 2) {\n                    routeFeature.set('minResolution', this.graphsResolutions[index][0]);\n                    routeFeature.set('maxResolution', this.graphsResolutions[index][1]);\n                }\n                (_c = (_b = this.routingLayer) === null || _b === void 0 ? void 0 : _b.getSource()) === null || _c === void 0 ? void 0 : _c.addFeature(routeFeature);\n                this.loading = false;\n            })\n                .catch((error) => {\n                if (/AbortError/.test(error.name)) {\n                    // Ignore abort error\n                    return;\n                }\n                this.segments = [];\n                // Dispatch error event and execute error function\n                this.dispatchEvent(new BaseEvent('error'));\n                this.onRouteError(error, this);\n                this.loading = false;\n            });\n        }));\n    }\n    /**\n     * Draw a via point. This function can parse all the possibilitiies\n     *\n     * @private\n     */\n    drawViaPoint(viaPoint, idx, abortController) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        const pointFeature = new Feature();\n        pointFeature.set('viaPointIdx', idx);\n        // The via point is a coordinate using the current map's projection\n        if (Array.isArray(viaPoint)) {\n            pointFeature.setGeometry(new Point(viaPoint));\n            (_b = (_a = this.routingLayer) === null || _a === void 0 ? void 0 : _a.getSource()) === null || _b === void 0 ? void 0 : _b.addFeature(pointFeature);\n            return Promise.resolve(pointFeature);\n        }\n        // Possibility to parse:\n        //\n        // !8596126 a station with id 8596126\n        // !8596126$4 a station with id 8596126\n        if (!this.useRawViaPoints || REGEX_VIA_POINT_STATION_ID.test(viaPoint)) {\n            let stationId;\n            let track;\n            if (this.useRawViaPoints) {\n                [, stationId, , track] =\n                    REGEX_VIA_POINT_STATION_ID.exec(viaPoint) || [];\n            }\n            else {\n                [stationId, track] = viaPoint.split('$');\n            }\n            return fetch(`${this.stopsApiUrl}lookup/${stationId}?key=${this.stopsApiKey}`, { signal: abortController.signal })\n                .then((res) => res.json())\n                .then((stationData) => {\n                var _a, _b, _c, _d;\n                const { coordinates } = ((_b = (_a = stationData === null || stationData === void 0 ? void 0 : stationData.features) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.geometry) || {};\n                if (!coordinates) {\n                    console.log('No coordinates found for station ' + stationId, stationData);\n                }\n                this.cacheStationData[viaPoint] = fromLonLat(coordinates);\n                pointFeature.set('viaPointTrack', track);\n                pointFeature.setGeometry(new Point(fromLonLat(coordinates)));\n                (_d = (_c = this.routingLayer) === null || _c === void 0 ? void 0 : _c.getSource()) === null || _d === void 0 ? void 0 : _d.addFeature(pointFeature);\n                return pointFeature;\n            })\n                .catch((error) => {\n                var _a, _b;\n                if (/AbortError/.test(error.message)) {\n                    // Ignore abort error\n                    return;\n                }\n                // Dispatch error event and execute error function\n                this.dispatchEvent(new BaseEvent('error'));\n                this.onRouteError(error, this);\n                (_b = (_a = this.routingLayer) === null || _a === void 0 ? void 0 : _a.getSource()) === null || _b === void 0 ? void 0 : _b.clear();\n                this.loading = false;\n            });\n        }\n        // Only when this.useRawViaPoints is true.\n        // Possibility to parse:\n        //\n        // 47.37811,8.53935 a position 47.37811, 8.53935\n        if (this.useRawViaPoints && REGEX_VIA_POINT_COORD.test(viaPoint)) {\n            const [lat, lon] = REGEX_VIA_POINT_COORD.exec(viaPoint) || [];\n            if (lon && lat) {\n                const floatLon = parseFloat(lon);\n                const floatLat = parseFloat(lat);\n                const coordinates = fromLonLat([floatLon, floatLat], (_c = this.getMap()) === null || _c === void 0 ? void 0 : _c.getView().getProjection());\n                pointFeature.setGeometry(new Point(coordinates));\n                (_e = (_d = this.routingLayer) === null || _d === void 0 ? void 0 : _d.getSource()) === null || _e === void 0 ? void 0 : _e.addFeature(pointFeature);\n                return Promise.resolve(pointFeature);\n            }\n        }\n        // Only when this.useRawViaPoints is true.\n        // It will parse the via point to find some name, id, track coordinates.\n        //\n        // Possibility to parse:\n        //\n        // @47.37811,8.53935 a station at position 47.37811, 8.53935\n        // @47.37811,8.53935$4 track 4 in a station at position 47.37811, 8.53935\n        // zürich hb@47.37811,8.53935$8 track 8 in station \"Zürich HB\" at position 47.37811, 8.53935\n        const [, stationName, , lat, lon, , track] = REGEX_VIA_POINT.exec(viaPoint) || [];\n        if (lon && lat) {\n            const coordinates = fromLonLat([parseFloat(lon), parseFloat(lat)], (_f = this.getMap()) === null || _f === void 0 ? void 0 : _f.getView().getProjection());\n            pointFeature.set('viaPointTrack', track);\n            pointFeature.setGeometry(new Point(coordinates));\n            (_h = (_g = this.routingLayer) === null || _g === void 0 ? void 0 : _g.getSource()) === null || _h === void 0 ? void 0 : _h.addFeature(pointFeature);\n            return Promise.resolve(pointFeature);\n        }\n        if (stationName) {\n            return fetch(`${this.stopsApiUrl}?key=${this.stopsApiKey}&q=${stationName}&limit=1`, { signal: abortController.signal })\n                .then((res) => res.json())\n                .then((stationData) => {\n                var _a, _b;\n                const { coordinates } = stationData.features[0].geometry;\n                this.cacheStationData[viaPoint] = fromLonLat(coordinates);\n                pointFeature.set('viaPointTrack', track);\n                pointFeature.setGeometry(new Point(fromLonLat(coordinates)));\n                (_b = (_a = this.routingLayer) === null || _a === void 0 ? void 0 : _a.getSource()) === null || _b === void 0 ? void 0 : _b.addFeature(pointFeature);\n                return pointFeature;\n            })\n                .catch((error) => {\n                // Dispatch error event and execute error function\n                this.dispatchEvent(new BaseEvent('error'));\n                this.onRouteError(error, this);\n                this.loading = false;\n                return null;\n            });\n        }\n        return Promise.resolve(null);\n    }\n    /**\n     * Activet7deactivate the control when activ eproperty changes\n     * @private\n     */\n    onActiveChange() {\n        if (this.get('active')) {\n            this.activate();\n        }\n        else {\n            this.deactivate();\n        }\n        this.render();\n    }\n    /**\n     * Used on click on map while control is active:\n     *   By default adds a viaPoint to the end of array.\n     *   If an existing viaPoint is clicked removes the clicked viaPoint.\n     * @private\n     */\n    onMapClick(evt) {\n        const feats = evt.target.getFeaturesAtPixel(evt.pixel, {\n            hitTolerance: 5,\n            layerFilter: (layer) => layer === this.routingLayer,\n        });\n        const viaPoint = feats.find((feat) => {\n            var _a;\n            return ((_a = feat.getGeometry()) === null || _a === void 0 ? void 0 : _a.getType()) === 'Point' &&\n                feat.get('viaPointIdx') !== undefined;\n        });\n        if (viaPoint) {\n            // Remove existing viaPoint on click and abort viaPoint add\n            this.removeViaPoint(viaPoint.get('viaPointIdx'));\n            return;\n        }\n        this.addViaPoint(evt.coordinate);\n    }\n    /**\n     * Used on end of the modify interaction. Resolves feature modification:\n     *   Line drag creates new viaPoint at the final coordinate of drag.\n     *   Point drag replaces old viaPoint.\n     * @private\n     */\n    onModifyEnd(evt) {\n        const coord = evt.mapBrowserEvent.coordinate;\n        const { oldRoute, segmentIndex, viaPoint } = this.initialRouteDrag || {};\n        // If viaPoint is being relocated overwrite the old viaPoint\n        if (viaPoint) {\n            return this.addViaPoint(coord, viaPoint.get('viaPointIdx'), 1);\n        }\n        // In case there is no route overwrite first coordinate\n        if (!oldRoute) {\n            return this.addViaPoint(coord, 0, 1);\n        }\n        // We can't add a via point because we haven't found which segment has been modified.\n        if (segmentIndex === -1) {\n            return Promise.reject(new Error('No segment found'));\n        }\n        // Insert new viaPoint at the  modified segment index + 1\n        return this.addViaPoint(coord, (segmentIndex || 0) + 1);\n    }\n    /**\n     * Used on start of the modify interaction. Stores relevant data\n     * in this.initialRouteDrag object\n     * @private\n     */\n    onModifyStart(evt) {\n        var _a;\n        // When modify start, we search the index of the segment that is modifying.\n        let segmentIndex = -1;\n        const route = evt.features\n            .getArray()\n            .find((feat) => { var _a; return ((_a = feat.getGeometry()) === null || _a === void 0 ? void 0 : _a.getType()) === 'LineString'; });\n        // Find the segment index that is being modified\n        if ((route === null || route === void 0 ? void 0 : route.getGeometry()) && evt.mapBrowserEvent.coordinate) {\n            // We use a buff extent to fix floating issues , see https://github.com/openlayers/openlayers/issues/7130#issuecomment-535856422\n            const closestExtent = buffer(new Point(\n            // @ts-expect-error bad def\n            (_a = route.getGeometry()) === null || _a === void 0 ? void 0 : _a.getClosestPoint(evt.mapBrowserEvent.coordinate)).getExtent(), 0.001);\n            segmentIndex = this.segments.findIndex((segment) => { var _a; return (_a = segment.getGeometry()) === null || _a === void 0 ? void 0 : _a.intersectsExtent(closestExtent); });\n        }\n        // Find the viaPoint that is being modified\n        const viaPoint = (evt.features\n            .getArray()\n            .filter((feat) => { var _a; return ((_a = feat.getGeometry()) === null || _a === void 0 ? void 0 : _a.getType()) === 'Point'; }) ||\n            [])[0];\n        // Write object with modify info\n        this.initialRouteDrag = {\n            oldRoute: route === null || route === void 0 ? void 0 : route.clone(),\n            segmentIndex,\n            viaPoint,\n        };\n    }\n    /**\n     * Remove click listener from map.\n     * @private\n     */\n    removeListeners() {\n        if (this.onMapClickKey) {\n            unByKey(this.onMapClickKey);\n        }\n    }\n    /**\n     * Removes a viaPoint at the passed array index and redraws route\n     * By default the last viaPoint is removed.\n     * @param {number} index Integer representing the index of the viaPoint to delete.\n     * @public\n     */\n    removeViaPoint(index = (this.viaPoints || []).length - 1) {\n        /* Remove viapoint and redraw route */\n        if (this.viaPoints.length && this.viaPoints[index]) {\n            this.viaPoints.splice(index, 1);\n        }\n        this.drawRoute();\n        this.dispatchEvent(new BaseEvent('change:route'));\n    }\n    render() { }\n    /**\n     * Removes all viaPoints, clears the source and triggers a change event\n     * @public\n     */\n    reset() {\n        var _a, _b;\n        // Clear viaPoints and source\n        this.abortRequests();\n        this.viaPoints = [];\n        (_b = (_a = this.routingLayer) === null || _a === void 0 ? void 0 : _a.getSource()) === null || _b === void 0 ? void 0 : _b.clear();\n        this.dispatchEvent(new BaseEvent('change:route'));\n    }\n    setMap(map) {\n        super.setMap(map);\n        if (map && this.active) {\n            this.activate();\n        }\n        else if (!map) {\n            this.active = false;\n        }\n    }\n    /**\n     * Replaces the current viaPoints with a new coordinate array.\n     * @param {Array<Array<number>>} coordinateArray Array of nested coordinates\n     * @public\n     */\n    setViaPoints(coordinateArray) {\n        this.viaPoints = [...coordinateArray];\n        this.drawRoute();\n        this.dispatchEvent(new BaseEvent('change:route'));\n    }\n    get active() {\n        return this.get('active');\n    }\n    set active(newValue) {\n        this.set('active', newValue);\n    }\n    get loading() {\n        return this.get('loading');\n    }\n    set loading(newValue) {\n        this.set('loading', newValue);\n    }\n    get modify() {\n        return this.get('modify');\n    }\n    set modify(newValue) {\n        this.set('modify', newValue);\n    }\n    get mot() {\n        return this.get('mot');\n    }\n    set mot(newValue) {\n        this.set('mot', newValue);\n    }\n}\nexport default RoutingControl;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/controls/RoutingControl.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 466,
    "kind": "variable",
    "name": "REGEX_VIA_POINT",
    "memberof": "build/ol/controls/RoutingControl.js",
    "static": true,
    "longname": "build/ol/controls/RoutingControl.js~REGEX_VIA_POINT",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/controls/RoutingControl.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 21,
    "undocument": true,
    "type": {
      "types": [
        "undefined"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 467,
    "kind": "variable",
    "name": "REGEX_VIA_POINT_COORD",
    "memberof": "build/ol/controls/RoutingControl.js",
    "static": true,
    "longname": "build/ol/controls/RoutingControl.js~REGEX_VIA_POINT_COORD",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/controls/RoutingControl.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 25,
    "undocument": true,
    "type": {
      "types": [
        "undefined"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 468,
    "kind": "variable",
    "name": "REGEX_VIA_POINT_STATION_ID",
    "memberof": "build/ol/controls/RoutingControl.js",
    "static": true,
    "longname": "build/ol/controls/RoutingControl.js~REGEX_VIA_POINT_STATION_ID",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/controls/RoutingControl.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 30,
    "undocument": true,
    "type": {
      "types": [
        "undefined"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 469,
    "kind": "variable",
    "name": "STOP_FETCH_ABORT_CONTROLLER_KEY",
    "memberof": "build/ol/controls/RoutingControl.js",
    "static": true,
    "longname": "build/ol/controls/RoutingControl.js~STOP_FETCH_ABORT_CONTROLLER_KEY",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/controls/RoutingControl.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 31,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 470,
    "kind": "function",
    "name": "getFlatCoordinatesFromSegments",
    "memberof": "build/ol/controls/RoutingControl.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/ol/controls/RoutingControl.js~getFlatCoordinatesFromSegments",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/controls/RoutingControl.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "params": [
      {
        "name": "segmentArray",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 471,
    "kind": "class",
    "name": "RoutingControl",
    "memberof": "build/ol/controls/RoutingControl.js",
    "static": true,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl",
    "access": "public",
    "export": true,
    "importPath": "mobility-toolbox-js/build/ol/controls/RoutingControl.js",
    "importStyle": "RoutingControl",
    "description": "This OpenLayers control allows the user to add and modifiy via points to\na map and request a route from the [geOps Routing API](https://developer.geops.io/apis/routing/).",
    "examples": [
      "import { Map } from 'ol';\nimport { RoutingControl } from 'mobility-toolbox-js/ol';\n\nconst map = new Map({\n  target: 'map'\n});\n\nconst control = new RoutingControl();\n\nmap.addControl(control);"
    ],
    "see": [
      "<a href=\"/example/ol-routing\">Openlayers routing example</a>"
    ],
    "lineNumber": 70,
    "unknown": [
      {
        "tagName": "@classproperty",
        "tagValue": "{string} mot - Mean of transport to be used for routing."
      },
      {
        "tagName": "@classproperty",
        "tagValue": "{VectorLayer} routingLayer - Layer for adding route features."
      },
      {
        "tagName": "@classproperty",
        "tagValue": "{boolean} loading - True if the control is requesting the backend."
      }
    ],
    "interface": false,
    "extends": [
      "ol/control/Control~Control"
    ]
  },
  {
    "__docId__": 472,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#constructor",
    "access": "public",
    "description": "Constructor.",
    "lineNumber": 87,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "options.apiKey",
        "description": "Access key for [geOps APIs](https://developer.geops.io/)."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options.apiParams",
        "description": "Request parameters. See [geOps Routing API documentation](https://developer.geops.io/apis/routing/)."
      },
      {
        "nullable": null,
        "types": [
          "Array.<Array<graph=\"osm\", minZoom=0, maxZoom=99>>"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "[['osm', 0, 99]]",
        "defaultRaw": "[['osm', 0, 99]]",
        "name": "options.graphs",
        "description": "Array of routing graphs and min/max zoom levels. If you use the control in combination with the [geOps Maps API](https://developer.geops.io/apis/maps/), you may want to use the optimal level of generalizations: \"[['gen4', 0, 8], ['gen3', 8, 9], ['gen2', 9, 11], ['gen1', 11, 13], ['osm', 13, 99]]\"."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "\"bus\"",
        "defaultRaw": "bus",
        "name": "options.mot",
        "description": "Mean of transport to be used for routing."
      },
      {
        "nullable": null,
        "types": [
          "function"
        ],
        "spread": false,
        "optional": false,
        "name": "options.onRouteError",
        "description": "Callback on request errors."
      },
      {
        "nullable": null,
        "types": [
          "VectorLayer"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "new VectorLayer()",
        "defaultRaw": "new VectorLayer()",
        "name": "options.routingLayer",
        "description": "Vector layer for adding route features."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "options.snapToClosestStation",
        "description": "If true, the routing will snap the coordinate to the closest station. Default to false."
      },
      {
        "nullable": null,
        "types": [
          "StyleLike"
        ],
        "spread": false,
        "optional": false,
        "name": "options.style",
        "description": "Style of the default vector layer."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "fale",
        "defaultRaw": "fale",
        "name": "options.useRawViaPoints",
        "description": "Experimental property. If true, it allows the user to add via points using different kind of string. See \"via\" parameter defined by the [geOps Routing API](https://developer.geops.io/apis/routing/). Default to false, only array of coordinates and station's id are supported as via points."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "'https://api.geops.io/routing/v1/'",
        "defaultRaw": "'https://api.geops.io/routing/v1/'",
        "name": "options.url",
        "description": "[geOps Realtime API](https://developer.geops.io/apis/realtime/) url."
      }
    ]
  },
  {
    "__docId__": 473,
    "kind": "member",
    "name": "abortControllers",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#abortControllers",
    "access": "private",
    "description": null,
    "lineNumber": 89,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 474,
    "kind": "member",
    "name": "cacheStationData",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#cacheStationData",
    "access": "private",
    "description": null,
    "lineNumber": 90,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 475,
    "kind": "member",
    "name": "format",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#format",
    "access": "private",
    "description": null,
    "lineNumber": 91,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 476,
    "kind": "member",
    "name": "graphs",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#graphs",
    "access": "private",
    "description": null,
    "lineNumber": 92,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 477,
    "kind": "member",
    "name": "initialRouteDrag",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#initialRouteDrag",
    "access": "private",
    "description": null,
    "lineNumber": 93,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 478,
    "kind": "member",
    "name": "segments",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#segments",
    "access": "private",
    "description": null,
    "lineNumber": 94,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 479,
    "kind": "member",
    "name": "snapToClosestStation",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#snapToClosestStation",
    "access": "private",
    "description": null,
    "lineNumber": 95,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 480,
    "kind": "member",
    "name": "useRawViaPoints",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#useRawViaPoints",
    "access": "private",
    "description": null,
    "lineNumber": 96,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 481,
    "kind": "member",
    "name": "viaPoints",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#viaPoints",
    "access": "private",
    "description": null,
    "lineNumber": 97,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 487,
    "kind": "member",
    "name": "apiParams",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#apiParams",
    "access": "private",
    "description": null,
    "lineNumber": 107,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 490,
    "kind": "member",
    "name": "apiKey",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#apiKey",
    "access": "private",
    "description": null,
    "lineNumber": 110,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 491,
    "kind": "member",
    "name": "stopsApiKey",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#stopsApiKey",
    "access": "private",
    "description": null,
    "lineNumber": 111,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 492,
    "kind": "member",
    "name": "stopsApiUrl",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#stopsApiUrl",
    "access": "private",
    "description": null,
    "lineNumber": 112,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 493,
    "kind": "member",
    "name": "api",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#api",
    "access": "private",
    "description": null,
    "lineNumber": 113,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 494,
    "kind": "member",
    "name": "routingLayer",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#routingLayer",
    "access": "private",
    "description": null,
    "lineNumber": 114,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 495,
    "kind": "member",
    "name": "onRouteError",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#onRouteError",
    "access": "private",
    "description": null,
    "lineNumber": 120,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 499,
    "kind": "method",
    "name": "getGraphsResolutions",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl.getGraphsResolutions",
    "access": "private",
    "description": "Calculate at which resolutions corresponds each generalizations.",
    "lineNumber": 148,
    "params": [
      {
        "name": "graphs",
        "types": [
          "*"
        ]
      },
      {
        "name": "map",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 500,
    "kind": "method",
    "name": "abortRequests",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#abortRequests",
    "access": "private",
    "description": "Aborts viapoint and route requests",
    "lineNumber": 159,
    "params": [],
    "return": null
  },
  {
    "__docId__": 502,
    "kind": "method",
    "name": "activate",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#activate",
    "access": "private",
    "description": null,
    "lineNumber": 175,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 504,
    "kind": "member",
    "name": "graphsResolutions",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#graphsResolutions",
    "access": "private",
    "description": null,
    "lineNumber": 182,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 505,
    "kind": "method",
    "name": "addListeners",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#addListeners",
    "access": "private",
    "description": "Add click listener to map.",
    "lineNumber": 200,
    "params": [],
    "return": null
  },
  {
    "__docId__": 506,
    "kind": "member",
    "name": "onMapClickKey",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#onMapClickKey",
    "access": "private",
    "description": null,
    "lineNumber": 206,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 507,
    "kind": "method",
    "name": "addViaPoint",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#addViaPoint",
    "access": "public",
    "description": "Adds/Replaces a viaPoint to the viaPoints array and redraws route:\n  Adds a viaPoint at end of array by default.\n  If an index is passed a viaPoint is added at the specified index.\n  If an index is passed and overwrite x is > 0, x viaPoints at the specified\n    index are replaced with a single new viaPoint.",
    "lineNumber": 219,
    "params": [
      {
        "nullable": null,
        "types": [
          "string ",
          " Coordinate"
        ],
        "spread": false,
        "optional": false,
        "name": "coordinatesOrString",
        "description": "Array of coordinates or a string representing a station"
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "-1",
        "defaultRaw": -1,
        "name": "index",
        "description": "Integer representing the index of the added viaPoint. If not specified, the viaPoint is added at the end of the array."
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "0",
        "defaultRaw": 0,
        "name": "overwrite",
        "description": "Marks the number of viaPoints that are removed at the specified index on add."
      }
    ],
    "return": null
  },
  {
    "__docId__": 508,
    "kind": "method",
    "name": "createDefaultElement",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#createDefaultElement",
    "access": "private",
    "description": "Define a default element.",
    "lineNumber": 230,
    "params": [],
    "return": null
  },
  {
    "__docId__": 509,
    "kind": "member",
    "name": "element",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#element",
    "access": "private",
    "description": null,
    "lineNumber": 231,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 510,
    "kind": "method",
    "name": "createModifyInteraction",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#createModifyInteraction",
    "access": "private",
    "description": "Create the interaction used to modify vertexes of features.",
    "lineNumber": 245,
    "params": [],
    "return": null
  },
  {
    "__docId__": 511,
    "kind": "member",
    "name": "modifyInteraction",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#modifyInteraction",
    "access": "private",
    "description": "",
    "lineNumber": 252,
    "type": {
      "nullable": null,
      "types": [
        "ol.interaction.Modify"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 512,
    "kind": "method",
    "name": "deactivate",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#deactivate",
    "access": "private",
    "description": null,
    "lineNumber": 274,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 513,
    "kind": "method",
    "name": "drawRoute",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#drawRoute",
    "access": "private",
    "description": "Draws route on map using an array of coordinates:\n  If a single coordinate is passed a single point feature is added to map.\n  If two or more coordinates are passed a request to the RoutingAPI fetches\n      the route using the passed coordinates and the current mot.",
    "lineNumber": 293,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 520,
    "kind": "method",
    "name": "drawViaPoint",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#drawViaPoint",
    "access": "private",
    "description": "Draw a via point. This function can parse all the possibilitiies",
    "lineNumber": 387,
    "params": [
      {
        "name": "viaPoint",
        "types": [
          "*"
        ]
      },
      {
        "name": "idx",
        "types": [
          "*"
        ]
      },
      {
        "name": "abortController",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 523,
    "kind": "method",
    "name": "onActiveChange",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#onActiveChange",
    "access": "private",
    "description": "Activet7deactivate the control when activ eproperty changes",
    "lineNumber": 495,
    "params": [],
    "return": null
  },
  {
    "__docId__": 524,
    "kind": "method",
    "name": "onMapClick",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#onMapClick",
    "access": "private",
    "description": "Used on click on map while control is active:\n  By default adds a viaPoint to the end of array.\n  If an existing viaPoint is clicked removes the clicked viaPoint.",
    "lineNumber": 510,
    "params": [
      {
        "name": "evt",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 525,
    "kind": "method",
    "name": "onModifyEnd",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#onModifyEnd",
    "access": "private",
    "description": "Used on end of the modify interaction. Resolves feature modification:\n  Line drag creates new viaPoint at the final coordinate of drag.\n  Point drag replaces old viaPoint.",
    "lineNumber": 533,
    "params": [
      {
        "name": "evt",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 526,
    "kind": "method",
    "name": "onModifyStart",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#onModifyStart",
    "access": "private",
    "description": "Used on start of the modify interaction. Stores relevant data\nin this.initialRouteDrag object",
    "lineNumber": 556,
    "params": [
      {
        "name": "evt",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 528,
    "kind": "method",
    "name": "removeListeners",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#removeListeners",
    "access": "private",
    "description": "Remove click listener from map.",
    "lineNumber": 587,
    "params": [],
    "return": null
  },
  {
    "__docId__": 529,
    "kind": "method",
    "name": "removeViaPoint",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#removeViaPoint",
    "access": "public",
    "description": "Removes a viaPoint at the passed array index and redraws route\nBy default the last viaPoint is removed.",
    "lineNumber": 598,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": "Integer representing the index of the viaPoint to delete."
      }
    ],
    "return": null
  },
  {
    "__docId__": 530,
    "kind": "method",
    "name": "render",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#render",
    "access": "private",
    "description": null,
    "lineNumber": 606,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 531,
    "kind": "method",
    "name": "reset",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#reset",
    "access": "public",
    "description": "Removes all viaPoints, clears the source and triggers a change event",
    "lineNumber": 611,
    "params": [],
    "return": null
  },
  {
    "__docId__": 533,
    "kind": "method",
    "name": "setMap",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#setMap",
    "access": "private",
    "description": null,
    "lineNumber": 619,
    "undocument": true,
    "params": [
      {
        "name": "map",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 535,
    "kind": "method",
    "name": "setViaPoints",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#setViaPoints",
    "access": "public",
    "description": "Replaces the current viaPoints with a new coordinate array.",
    "lineNumber": 633,
    "params": [
      {
        "nullable": null,
        "types": [
          "Array<Array<number>>"
        ],
        "spread": false,
        "optional": false,
        "name": "coordinateArray",
        "description": "Array of nested coordinates"
      }
    ],
    "return": null
  },
  {
    "__docId__": 537,
    "kind": "get",
    "name": "active",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#active",
    "access": "private",
    "description": null,
    "lineNumber": 638,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 538,
    "kind": "set",
    "name": "active",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#active",
    "access": "private",
    "description": null,
    "lineNumber": 641,
    "undocument": true
  },
  {
    "__docId__": 539,
    "kind": "get",
    "name": "loading",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#loading",
    "access": "private",
    "description": null,
    "lineNumber": 644,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 540,
    "kind": "set",
    "name": "loading",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#loading",
    "access": "private",
    "description": null,
    "lineNumber": 647,
    "undocument": true
  },
  {
    "__docId__": 541,
    "kind": "get",
    "name": "modify",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#modify",
    "access": "private",
    "description": null,
    "lineNumber": 650,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 542,
    "kind": "set",
    "name": "modify",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#modify",
    "access": "private",
    "description": null,
    "lineNumber": 653,
    "undocument": true
  },
  {
    "__docId__": 543,
    "kind": "get",
    "name": "mot",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#mot",
    "access": "private",
    "description": null,
    "lineNumber": 656,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 544,
    "kind": "set",
    "name": "mot",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#mot",
    "access": "private",
    "description": null,
    "lineNumber": 659,
    "undocument": true
  },
  {
    "__docId__": 545,
    "kind": "file",
    "name": "build/ol/controls/StopFinderControl.js",
    "content": "import Control from 'ol/control/Control';\nimport { fromLonLat } from 'ol/proj';\nimport StopFinderControlCommon from '../../common/controls/StopFinderControlCommon';\nimport createDefaultStopFinderElement from '../../common/utils/createDefaultStopFinderElt';\n/**\n * This OpenLayers control allows to search stations from the [geOps Stops API](https://developer.geops.io/apis/stops/).\n *\n * @example\n * import { Map } from 'ol';\n * import { StopFinderControl } from 'mobility-toolbox-js/ol';\n *\n * const map = new Map({\n *   target: 'map',\n * });\n *\n * const control = new StopFinderControl({\n *   apiKey: [yourApiKey]\n * });\n *\n * map.addControl(control);\n *\n *\n * @see <a href=\"/example/ol-search\">Openlayers search example</a>\n *\n * @extends {ol/control/Control~Control}\n *\n * @public\n */\nclass StopFinderControl extends Control {\n    /**\n     * Constructor.\n     *\n     * @param {Object} options\n     * @param {HTMLElement} options.element HTML element where to attach input and suggestions.\n     * @param {string} options.apiKey Access key for [geOps APIs](https://developer.geops.io/).\n     * @param {StopsSearchParams} [options.apiParams={ limit: 20 }] Request parameters. See [geOps Stops API documentation](https://developer.geops.io/apis/5dcbd702a256d90001cf1361/).\n     * @param {string} [options.placeholder='Search for a stop...'] Input field placeholder.\n     * @param {string} [options.url='https://api.geops.io/stops/v1/'] [geOps Stops API](https://developer.geops.io/apis/stops/) url.\n     * @public\n     */\n    constructor(options) {\n        const element = createDefaultStopFinderElement();\n        element.className = (options === null || options === void 0 ? void 0 : options.className) || 'mbt-stop-finder';\n        const opt = Object.assign({ element }, (options || {}));\n        super(opt);\n        this.controller = new StopFinderControlCommon(Object.assign({ onSuggestionClick: this.onSuggestionClick.bind(this) }, opt));\n    }\n    onSuggestionClick(suggestion) {\n        var _a;\n        const coord = fromLonLat(suggestion.geometry.coordinates);\n        (_a = this.getMap()) === null || _a === void 0 ? void 0 : _a.getView().setCenter(coord);\n    }\n    /**\n     * Search for stations using a query.\n     *\n     * @param {string} q Query used to search stops.\n     * @param {AbortController} abortController  Abort controller used to abort requests.\n     * @returns {Promise<Array<GeoJSONFeature>>}\n     * @public\n     */\n    search(q, abortController) {\n        return this.controller.search(q, abortController);\n    }\n}\nexport default StopFinderControl;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/controls/StopFinderControl.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 546,
    "kind": "class",
    "name": "StopFinderControl",
    "memberof": "build/ol/controls/StopFinderControl.js",
    "static": true,
    "longname": "build/ol/controls/StopFinderControl.js~StopFinderControl",
    "access": "public",
    "export": true,
    "importPath": "mobility-toolbox-js/build/ol/controls/StopFinderControl.js",
    "importStyle": "StopFinderControl",
    "description": "This OpenLayers control allows to search stations from the [geOps Stops API](https://developer.geops.io/apis/stops/).",
    "examples": [
      "import { Map } from 'ol';\nimport { StopFinderControl } from 'mobility-toolbox-js/ol';\n\nconst map = new Map({\n  target: 'map',\n});\n\nconst control = new StopFinderControl({\n  apiKey: [yourApiKey]\n});\n\nmap.addControl(control);"
    ],
    "see": [
      "<a href=\"/example/ol-search\">Openlayers search example</a>"
    ],
    "lineNumber": 29,
    "interface": false,
    "extends": [
      "ol/control/Control~Control"
    ]
  },
  {
    "__docId__": 547,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "build/ol/controls/StopFinderControl.js~StopFinderControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/StopFinderControl.js~StopFinderControl#constructor",
    "access": "public",
    "description": "Constructor.",
    "lineNumber": 41,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "HTMLElement"
        ],
        "spread": false,
        "optional": false,
        "name": "options.element",
        "description": "HTML element where to attach input and suggestions."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "options.apiKey",
        "description": "Access key for [geOps APIs](https://developer.geops.io/)."
      },
      {
        "nullable": null,
        "types": [
          "StopsSearchParams"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{ limit: 20 }",
        "defaultRaw": "{ limit: 20 }",
        "name": "options.apiParams",
        "description": "Request parameters. See [geOps Stops API documentation](https://developer.geops.io/apis/5dcbd702a256d90001cf1361/)."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "'Search for a stop...'",
        "defaultRaw": "'Search for a stop...'",
        "name": "options.placeholder",
        "description": "Input field placeholder."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "'https://api.geops.io/stops/v1/'",
        "defaultRaw": "'https://api.geops.io/stops/v1/'",
        "name": "options.url",
        "description": "[geOps Stops API](https://developer.geops.io/apis/stops/) url."
      }
    ]
  },
  {
    "__docId__": 548,
    "kind": "member",
    "name": "controller",
    "memberof": "build/ol/controls/StopFinderControl.js~StopFinderControl",
    "static": false,
    "longname": "build/ol/controls/StopFinderControl.js~StopFinderControl#controller",
    "access": "private",
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 549,
    "kind": "method",
    "name": "onSuggestionClick",
    "memberof": "build/ol/controls/StopFinderControl.js~StopFinderControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/StopFinderControl.js~StopFinderControl#onSuggestionClick",
    "access": "private",
    "description": null,
    "lineNumber": 48,
    "undocument": true,
    "params": [
      {
        "name": "suggestion",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 550,
    "kind": "method",
    "name": "search",
    "memberof": "build/ol/controls/StopFinderControl.js~StopFinderControl",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/controls/StopFinderControl.js~StopFinderControl#search",
    "access": "public",
    "description": "Search for stations using a query.",
    "lineNumber": 61,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Array<GeoJSONFeature>>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "q",
        "description": "Query used to search stops."
      },
      {
        "nullable": null,
        "types": [
          "AbortController"
        ],
        "spread": false,
        "optional": false,
        "name": "abortController",
        "description": "Abort controller used to abort requests."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Array<GeoJSONFeature>>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 551,
    "kind": "file",
    "name": "build/ol/controls/index.js",
    "content": "export { default as CopyrightControl } from './CopyrightControl';\nexport { default as RoutingControl } from './RoutingControl';\nexport { default as StopFinderControl } from './StopFinderControl';\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/controls/index.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 552,
    "kind": "file",
    "name": "build/ol/index.js",
    "content": "export * from '../api';\nexport * from '../common';\nexport * from './controls';\nexport * from './layers';\nexport * from './styles';\nexport * from './utils';\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/index.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 553,
    "kind": "file",
    "name": "build/ol/layers/Layer.js",
    "content": "import debounce from 'lodash.debounce';\nimport OLLayer from 'ol/layer/Layer';\nimport LayerRenderer from 'ol/renderer/Layer';\nimport defineDeprecatedProperties from '../utils/defineDeprecatedProperties';\nlet deprecated = () => { };\nif (typeof window !== 'undefined' &&\n    new URLSearchParams(window.location.search).get('deprecated')) {\n    deprecated = debounce((message) => {\n        // eslint-disable-next-line no-console\n        console.warn(message);\n    }, 1000);\n}\nclass EmptyLayerRenderer extends LayerRenderer {\n    prepareFrame() {\n        return true;\n    }\n    renderFrame() {\n        return null;\n    }\n}\n/**\n * An OpenLayers layer here only for backward compatibility v2.\n * @deprecated Use an OpenLayers Layer instead.\n */\nclass Layer extends OLLayer {\n    constructor(options) {\n        super(options);\n        defineDeprecatedProperties(this, options);\n        deprecated('Layer is deprecated. Use an OpenLayers Layer instead.');\n    }\n    clone(newOptions) {\n        return new Layer(Object.assign(Object.assign({}, (this.get('options') || {})), (newOptions || {})));\n    }\n    // ol does not like when it returns null.\n    createRenderer() {\n        return new EmptyLayerRenderer(this);\n    }\n}\nexport default Layer;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/layers/Layer.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 554,
    "kind": "function",
    "name": "deprecated",
    "memberof": "build/ol/layers/Layer.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/ol/layers/Layer.js~deprecated",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/layers/Layer.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 555,
    "kind": "class",
    "name": "EmptyLayerRenderer",
    "memberof": "build/ol/layers/Layer.js",
    "static": true,
    "longname": "build/ol/layers/Layer.js~EmptyLayerRenderer",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/layers/Layer.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "interface": false,
    "extends": [
      "ol/renderer/Layer~LayerRenderer"
    ],
    "ignore": true
  },
  {
    "__docId__": 556,
    "kind": "method",
    "name": "prepareFrame",
    "memberof": "build/ol/layers/Layer.js~EmptyLayerRenderer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/Layer.js~EmptyLayerRenderer#prepareFrame",
    "access": "private",
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 557,
    "kind": "method",
    "name": "renderFrame",
    "memberof": "build/ol/layers/Layer.js~EmptyLayerRenderer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/Layer.js~EmptyLayerRenderer#renderFrame",
    "access": "private",
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 558,
    "kind": "class",
    "name": "Layer",
    "memberof": "build/ol/layers/Layer.js",
    "static": true,
    "longname": "build/ol/layers/Layer.js~Layer",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/ol/layers/Layer.js",
    "importStyle": "Layer",
    "description": "An OpenLayers layer here only for backward compatibility v2.",
    "lineNumber": 25,
    "deprecated": "Use an OpenLayers Layer instead.",
    "interface": false,
    "extends": [
      "ol/layer/Layer~OLLayer"
    ]
  },
  {
    "__docId__": 559,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "build/ol/layers/Layer.js~Layer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/Layer.js~Layer#constructor",
    "access": "private",
    "description": null,
    "lineNumber": 26,
    "undocument": true
  },
  {
    "__docId__": 560,
    "kind": "method",
    "name": "clone",
    "memberof": "build/ol/layers/Layer.js~Layer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/Layer.js~Layer#clone",
    "access": "private",
    "description": null,
    "lineNumber": 31,
    "undocument": true,
    "params": [
      {
        "name": "newOptions",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 561,
    "kind": "method",
    "name": "createRenderer",
    "memberof": "build/ol/layers/Layer.js~Layer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/Layer.js~Layer#createRenderer",
    "access": "private",
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 562,
    "kind": "file",
    "name": "build/ol/layers/MaplibreLayer.js",
    "content": "import { MapLibreLayer } from '@geoblocks/ol-maplibre-layer/lib';\nimport debounce from 'lodash.debounce';\nimport { unByKey } from 'ol/Observable';\nimport { getUrlWithParams } from '../../common/utils';\nimport MaplibreLayerRenderer from '../renderers/MaplibreLayerRenderer';\nimport defineDeprecatedProperties from '../utils/defineDeprecatedProperties';\nconst buildStyleUrl = (url, style, apiKey, apiKeyName) => {\n    return getUrlWithParams(`${url}/styles/${style}/style.json`, {\n        [apiKeyName]: apiKey,\n    }).toString();\n};\nlet deprecated = () => { };\nif (typeof window !== 'undefined' &&\n    new URLSearchParams(window.location.search).get('deprecated')) {\n    deprecated = debounce((message) => {\n        // eslint-disable-next-line no-console\n        console.warn(message);\n    }, 1000);\n}\n/**\n * An OpenLayers layer able to display data from the [geOps Maps API](https://developer.geops.io/apis/maps).\n *\n * @example\n * import { MaplibreLayer } from 'mobility-toolbox-js/ol';\n *\n * const layer = new MaplibreLayer({\n *   apiKey: 'yourApiKey',\n *   // apiKeyName: 'key',\n *   // mapLibreOptions: {\n *   //   interactive: false,\n *   //   trackResize: false,\n *   //   attributionControl: false,\n *   // }\n *   // queryRenderedFeaturesOptions: {\n *   //   layers: ['waters_lakes'], // map.getFeaturesAtPixel will only return lakes.\n *   // },\n *   // style: 'travic_v2',\n *   // url: 'https://maps.geops.io',\n * });\n *\n * @classproperty {maplibregl.Map} mapLibreMap - The Maplibre map object. Readonly.\n * @classproperty {string} style - The [geOps Maps API](https://developer.geops.io/apis/maps) style.\n *\n *\n * @see <a href=\"/example/ol-maplibre-layer\">OpenLayers Maplibre layer example</a>\n *\n * @extends {geoblocks/ol-maplibre-layer/MapLibreLayer}\n * @public\n */\nclass MaplibreLayer extends MapLibreLayer {\n    set apiKey(newValue) {\n        this.set('apiKey', newValue);\n    }\n    get apiKey() {\n        return this.get('apiKey');\n    }\n    set apiKeyName(newValue) {\n        this.set('apiKeyName', newValue);\n    }\n    get apiKeyName() {\n        return this.get('apiKeyName');\n    }\n    /**\n     * @deprecated Use layer.mapLibreMap.\n     */\n    get maplibreMap() {\n        deprecated('MaplibreLayer.maplibreMap is deprecated. Use layer.mapLibreMap.');\n        return this.mapLibreMap;\n    }\n    // get queryRenderedFeaturesOptions(): maplibregl.QueryRenderedFeaturesOptions {\n    //   return this.get('queryRenderedFeaturesOptions');\n    // }\n    // set queryRenderedFeaturesOptions(\n    //   newValue: maplibregl.QueryRenderedFeaturesOptions,\n    // ) {\n    //   this.set('queryRenderedFeaturesOptions', newValue);\n    // }\n    /**\n     * @deprecated Use layer.mapLibreMap.\n     */\n    get mbMap() {\n        deprecated('MaplibreLayer.mbMap is deprecated. Use layer.maplibreMap.');\n        return this.maplibreMap;\n    }\n    get style() {\n        return this.get('style');\n    }\n    set style(newValue) {\n        this.set('style', newValue);\n    }\n    get url() {\n        return this.get('url');\n    }\n    set url(newValue) {\n        this.set('url', newValue);\n    }\n    /**\n     * Constructor.\n     *\n     * @param {Object} options\n     * @param {string} options.apiKey Accesss key for [geOps APIs](https://developer.geops.io/).\n     * @param {string} [options.apiKeyName=\"key\"] The [geOps Maps API](https://developer.geops.io/apis/maps) key name.\n     * @param {maplibregl.MapOptions} [options.mapLibreOptions={ interactive: false, trackResize: false, attributionControl: false }] MapLibre map options.\n     * @param {string} [options.style=\"travic_v2\"] The [geOps Maps API](https://developer.geops.io/apis/maps) style.\n     * @param {string} [options.url=\"https://maps.geops.io\"] The [geOps Maps API](https://developer.geops.io/apis/maps) url.\n     */\n    constructor(options) {\n        var _a;\n        const newOptions = Object.assign(Object.assign({ apiKeyName: 'key', style: 'travic_v2', url: 'https://maps.geops.io' }, (options || {})), { mapLibreOptions: Object.assign({}, (options.mapLibreOptions || {})) });\n        if (!newOptions.mapLibreOptions.style &&\n            ((_a = newOptions.url) === null || _a === void 0 ? void 0 : _a.includes('style.json'))) {\n            newOptions.mapLibreOptions.style = newOptions.url;\n        }\n        else if (!newOptions.mapLibreOptions.style &&\n            newOptions.apiKey &&\n            newOptions.style &&\n            typeof newOptions.style === 'string') {\n            newOptions.mapLibreOptions.style = buildStyleUrl(newOptions.url, newOptions.style, newOptions.apiKey, newOptions.apiKeyName);\n        }\n        super(newOptions);\n        this.olEventsKeys = [];\n        // For backward compatibility with v2\n        defineDeprecatedProperties(this, options);\n        // We save the options to be able to clone the layer.\n        // and to see if the style is defined by the maplibreOptions given by the user.\n        this.set('options', options);\n    }\n    /**\n     * Initialize the layer and listen to feature clicks.\n     */\n    attachToMap() {\n        const updateMaplibreMapDebounced = debounce(this.updateMaplibreMap.bind(this), 150);\n        updateMaplibreMapDebounced();\n        this.olEventsKeys.push(this.on('propertychange', (evt) => {\n            if (/(url|style|apiKey|apiKeyName)/.test(evt.key)) {\n                updateMaplibreMapDebounced();\n            }\n        }));\n    }\n    /**\n     * Create a copy of the MaplibreLayer.\n     *\n     * @param {Object} newOptions Options to override. See constructor.\n     * @return {MaplibreLayer} A MaplibreLayer layer\n     * @public\n     */\n    clone(newOptions) {\n        return new MaplibreLayer(Object.assign(Object.assign({}, (this.get('options') || {})), (newOptions || {})));\n    }\n    createRenderer() {\n        return new MaplibreLayerRenderer(this);\n    }\n    detachFromMap() {\n        unByKey(this.olEventsKeys);\n    }\n    disposeInternal() {\n        const source = this.getSource();\n        super.disposeInternal();\n        // We don't want the source removed\n        this.setSource(source);\n    }\n    getStyle() {\n        var _a, _b;\n        // If the style is a complete style object, use it directly.\n        if (this.style &&\n            typeof this.style === 'object' &&\n            this.style.name &&\n            this.style.version) {\n            return this.style;\n        }\n        // If the url set is already a complete style url, use it directly.\n        if (this.url.includes('style.json')) {\n            return this.url;\n        }\n        // If the user has defined the style by the maplibreOptions, we use it directly.\n        if ((_b = (_a = this.get('options')) === null || _a === void 0 ? void 0 : _a.mapLibreOptions) === null || _b === void 0 ? void 0 : _b.style) {\n            return this.get('options').mapLibreOptions.style;\n        }\n        /// Otherwise build the complete style url.\n        return buildStyleUrl(this.url, this.style, this.apiKey, this.apiKeyName);\n    }\n    setMapInternal(map) {\n        if (map) {\n            super.setMapInternal(map);\n            this.attachToMap();\n        }\n        else {\n            this.detachFromMap();\n            super.setMapInternal(map);\n        }\n    }\n    updateMaplibreMap() {\n        var _a;\n        try {\n            (_a = this.mapLibreMap) === null || _a === void 0 ? void 0 : _a.setStyle(this.getStyle(), { diff: false });\n        }\n        catch (e) {\n            // eslint-disable-next-line no-console\n            console.error('Error while updating MaplibreMap', e);\n        }\n    }\n}\nexport default MaplibreLayer;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/layers/MaplibreLayer.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 563,
    "kind": "function",
    "name": "buildStyleUrl",
    "memberof": "build/ol/layers/MaplibreLayer.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/ol/layers/MaplibreLayer.js~buildStyleUrl",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/layers/MaplibreLayer.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "params": [
      {
        "name": "url",
        "types": [
          "*"
        ]
      },
      {
        "name": "style",
        "types": [
          "*"
        ]
      },
      {
        "name": "apiKey",
        "types": [
          "*"
        ]
      },
      {
        "name": "apiKeyName",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 564,
    "kind": "function",
    "name": "deprecated",
    "memberof": "build/ol/layers/MaplibreLayer.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/ol/layers/MaplibreLayer.js~deprecated",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/layers/MaplibreLayer.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 565,
    "kind": "class",
    "name": "MaplibreLayer",
    "memberof": "build/ol/layers/MaplibreLayer.js",
    "static": true,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "access": "public",
    "export": true,
    "importPath": "mobility-toolbox-js/build/ol/layers/MaplibreLayer.js",
    "importStyle": "MaplibreLayer",
    "description": "An OpenLayers layer able to display data from the [geOps Maps API](https://developer.geops.io/apis/maps).",
    "examples": [
      "import { MaplibreLayer } from 'mobility-toolbox-js/ol';\n\nconst layer = new MaplibreLayer({\n  apiKey: 'yourApiKey',\n  // apiKeyName: 'key',\n  // mapLibreOptions: {\n  //   interactive: false,\n  //   trackResize: false,\n  //   attributionControl: false,\n  // }\n  // queryRenderedFeaturesOptions: {\n  //   layers: ['waters_lakes'], // map.getFeaturesAtPixel will only return lakes.\n  // },\n  // style: 'travic_v2',\n  // url: 'https://maps.geops.io',\n});"
    ],
    "see": [
      "<a href=\"/example/ol-maplibre-layer\">OpenLayers Maplibre layer example</a>"
    ],
    "lineNumber": 50,
    "unknown": [
      {
        "tagName": "@classproperty",
        "tagValue": "{maplibregl.Map} mapLibreMap - The Maplibre map object. Readonly."
      },
      {
        "tagName": "@classproperty",
        "tagValue": "{string} style - The [geOps Maps API](https://developer.geops.io/apis/maps) style."
      }
    ],
    "interface": false,
    "extends": [
      "geoblocks/ol-maplibre-layer/MapLibreLayer"
    ]
  },
  {
    "__docId__": 566,
    "kind": "set",
    "name": "apiKey",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#apiKey",
    "access": "private",
    "description": null,
    "lineNumber": 51,
    "undocument": true
  },
  {
    "__docId__": 567,
    "kind": "get",
    "name": "apiKey",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#apiKey",
    "access": "private",
    "description": null,
    "lineNumber": 54,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 568,
    "kind": "set",
    "name": "apiKeyName",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#apiKeyName",
    "access": "private",
    "description": null,
    "lineNumber": 57,
    "undocument": true
  },
  {
    "__docId__": 569,
    "kind": "get",
    "name": "apiKeyName",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#apiKeyName",
    "access": "private",
    "description": null,
    "lineNumber": 60,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 570,
    "kind": "get",
    "name": "maplibreMap",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#maplibreMap",
    "access": "private",
    "description": "",
    "lineNumber": 66,
    "deprecated": "Use layer.mapLibreMap.",
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 571,
    "kind": "get",
    "name": "mbMap",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#mbMap",
    "access": "private",
    "description": "",
    "lineNumber": 81,
    "deprecated": "Use layer.mapLibreMap.",
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 572,
    "kind": "get",
    "name": "style",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#style",
    "access": "private",
    "description": null,
    "lineNumber": 85,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 573,
    "kind": "set",
    "name": "style",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#style",
    "access": "private",
    "description": null,
    "lineNumber": 88,
    "undocument": true
  },
  {
    "__docId__": 574,
    "kind": "get",
    "name": "url",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#url",
    "access": "private",
    "description": null,
    "lineNumber": 91,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 575,
    "kind": "set",
    "name": "url",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#url",
    "access": "private",
    "description": null,
    "lineNumber": 94,
    "undocument": true
  },
  {
    "__docId__": 576,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#constructor",
    "access": "private",
    "description": "Constructor.",
    "lineNumber": 107,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "options.apiKey",
        "description": "Accesss key for [geOps APIs](https://developer.geops.io/)."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "\"key\"",
        "defaultRaw": "key",
        "name": "options.apiKeyName",
        "description": "The [geOps Maps API](https://developer.geops.io/apis/maps) key name."
      },
      {
        "nullable": null,
        "types": [
          "maplibregl.MapOptions"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{ interactive: false, trackResize: false, attributionControl: false }",
        "defaultRaw": "{ interactive: false, trackResize: false, attributionControl: false }",
        "name": "options.mapLibreOptions",
        "description": "MapLibre map options."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "\"travic_v2\"",
        "defaultRaw": "travic_v2",
        "name": "options.style",
        "description": "The [geOps Maps API](https://developer.geops.io/apis/maps) style."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "\"https://maps.geops.io\"",
        "defaultRaw": "https://maps.geops.io",
        "name": "options.url",
        "description": "The [geOps Maps API](https://developer.geops.io/apis/maps) url."
      }
    ]
  },
  {
    "__docId__": 577,
    "kind": "member",
    "name": "olEventsKeys",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#olEventsKeys",
    "access": "private",
    "description": null,
    "lineNumber": 121,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 578,
    "kind": "method",
    "name": "attachToMap",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#attachToMap",
    "access": "private",
    "description": "Initialize the layer and listen to feature clicks.",
    "lineNumber": 131,
    "params": [],
    "return": null
  },
  {
    "__docId__": 579,
    "kind": "method",
    "name": "clone",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#clone",
    "access": "public",
    "description": "Create a copy of the MaplibreLayer.",
    "lineNumber": 147,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "newOptions",
        "description": "Options to override. See constructor."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "MaplibreLayer"
      ],
      "spread": false,
      "description": "A MaplibreLayer layer"
    }
  },
  {
    "__docId__": 580,
    "kind": "method",
    "name": "createRenderer",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#createRenderer",
    "access": "private",
    "description": null,
    "lineNumber": 150,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 581,
    "kind": "method",
    "name": "detachFromMap",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#detachFromMap",
    "access": "private",
    "description": null,
    "lineNumber": 153,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 582,
    "kind": "method",
    "name": "disposeInternal",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#disposeInternal",
    "access": "private",
    "description": null,
    "lineNumber": 156,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 583,
    "kind": "method",
    "name": "getStyle",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#getStyle",
    "access": "private",
    "description": null,
    "lineNumber": 162,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 584,
    "kind": "method",
    "name": "setMapInternal",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#setMapInternal",
    "access": "private",
    "description": null,
    "lineNumber": 182,
    "undocument": true,
    "params": [
      {
        "name": "map",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 585,
    "kind": "method",
    "name": "updateMaplibreMap",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#updateMaplibreMap",
    "access": "private",
    "description": null,
    "lineNumber": 192,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 586,
    "kind": "file",
    "name": "build/ol/layers/MaplibreStyleLayer.js",
    "content": "import debounce from 'lodash.debounce';\nimport { Layer } from 'ol/layer';\nimport { unByKey } from 'ol/Observable';\nimport { Source } from 'ol/source';\nimport { VECTOR_TILE_FEATURE_PROPERTY } from '../../common';\nimport MaplibreStyleLayerRenderer from '../renderers/MaplibreStyleLayerRenderer';\nimport defineDeprecatedProperties from '../utils/defineDeprecatedProperties';\nlet deprecated = () => { };\nif (typeof window !== 'undefined' &&\n    new URLSearchParams(window.location.search).get('deprecated')) {\n    deprecated = debounce((...messages) => {\n        // eslint-disable-next-line no-console\n        console.warn(...messages);\n    }, 1000);\n}\n/**\n * Layer that helps show/hide a specific subset of style layers of a [MaplibreLayer](./MaplibreLayer.js~MaplibreLayer.html).\n *\n * @example\n * import { MaplibreLayer, MaplibreStyleLayer } from 'mobility-toolbox-js/ol';\n *\n * const maplibreLayer = new MaplibreLayer({\n *   apiKey: 'yourApiKey',\n * });\n *\n * const layer = new MaplibreStyleLayer({\n *   maplibreLayer: maplibreLayer,\n *   layersFilter: (layer) => {\n *     // show/hide only style layers related to stations\n *     return /station/.test(layer.id);\n *   },\n * });\n *\n * @see <a href=\"/example/ol-maplibre-style-layer\">OpenLayers MaplibreStyle layer example</a>\n * @extends {ol/layer/Layer~Layer}\n * @public\n */\nclass MaplibreStyleLayer extends Layer {\n    get beforeId() {\n        return this.get('beforeId');\n    }\n    set beforeId(newValue) {\n        this.set('beforeId', newValue);\n    }\n    get layers() {\n        return this.get('layers');\n    }\n    set layers(newValue) {\n        this.set('layers', newValue);\n    }\n    get layersFilter() {\n        return this.get('layersFilter');\n    }\n    set layersFilter(newValue) {\n        this.set('layersFilter', newValue);\n    }\n    /**\n     * @deprecated Use MaplibreStyleLayer.maplibreLayer instead.\n     */\n    get mapboxLayer() {\n        deprecated('Deprecated. Use maplibreLayer instead.');\n        return this.get('maplibreLayer');\n    }\n    get maplibreLayer() {\n        return this.get('maplibreLayer');\n    }\n    set maplibreLayer(newValue) {\n        this.set('maplibreLayer', newValue);\n    }\n    get queryRenderedLayersFilter() {\n        return this.get('queryRenderedLayersFilter');\n    }\n    set queryRenderedLayersFilter(newValue) {\n        this.set('queryRenderedLayersFilter', newValue);\n    }\n    get sources() {\n        return this.get('sources');\n    }\n    set sources(newValue) {\n        this.set('sources', newValue);\n    }\n    /**\n     * @deprecated Use MaplibreStyleLayer.layer instead.\n     */\n    get styleLayer() {\n        deprecated('Deprecated. Use MaplibreStyleLayer.layer instead.');\n        return this.layers[0];\n    }\n    /**\n     * @deprecated\n     */\n    set styleLayer(newValue) {\n        deprecated('MaplibreStyleLayer.styleLayer is deprecated. Use MaplibreStyleLayer.layer instead.');\n        this.layers = [newValue];\n    }\n    /**\n     * Apply visibility to style layers that fits the styleLayersFilter function.\n     */\n    /**\n     * @deprecated\n     */\n    get styleLayers() {\n        deprecated('MaplibreStyleLayer.styleLayers is deprecated. Use MaplibreStyleLayer.layers instead.');\n        return this.layers;\n    }\n    /**\n     * @deprecated\n     */\n    set styleLayers(newValue) {\n        deprecated('MaplibreStyleLayer.styleLayers is deprecated. Use MaplibreStyleLayer.layers instead.');\n        this.layers = newValue;\n    }\n    /**\n     * Constructor.\n     *\n     * @param {Object} options\n     * @param {string} [options.beforeId] The style layer id to use when the options.layers property is defined, unsused otherwise.\n     * @param {maplibregl.AddLayerObject[]} [options.layers] The layers to add to the style on load.\n     * @param {FilterFunction} [options.layersFilter] Filter function to decide which style layer to apply visiblity on. If not provided, the 'layers' property is used.\n     * @param {MaplibreLayer} [options.maplibreLayer] The MaplibreLayer to use.\n     * @param {FilterFunction} [options.queryRenderedLayersFilter] Filter function to decide which style layer are available for query.\n     * @param {{[id: string]:maplibregl.SourceSpecification}} [options.sources] The sources to add to the style on load.\n     * @public\n     */\n    constructor(options = {\n        mapLibreOptions: { style: { layers: [], sources: {}, version: 8 } },\n    }) {\n        /** Manage renamed property for backward compatibility with v2  */\n        if (options.mapboxLayer) {\n            deprecated('options.mapboxLayer is deprecated. Use options.maplibreLayer instead.');\n            // eslint-disable-next-line no-param-reassign\n            options.maplibreLayer = options.mapboxLayer;\n            // eslint-disable-next-line no-param-reassign\n            delete options.mapboxLayer;\n        }\n        if (options.styleLayers) {\n            deprecated('options.styleLayers is deprecated. Use options.layers instead.');\n            // eslint-disable-next-line no-param-reassign\n            options.layers = options.styleLayers;\n            // eslint-disable-next-line no-param-reassign\n            delete options.styleLayers;\n        }\n        if (options.styleLayersFilter) {\n            deprecated('options.styleLayersFilter is deprecated. Use options.layersFilter instead.');\n            // eslint-disable-next-line no-param-reassign\n            options.layersFilter = options.styleLayersFilter;\n            // eslint-disable-next-line no-param-reassign\n            delete options.styleLayersFilter;\n        }\n        super(Object.assign({ source: new Source({}) }, options));\n        this.highlightedFeatures = [];\n        this.olEventsKeys = [];\n        this.selectedFeatures = [];\n        // For backward compatibility with v2\n        defineDeprecatedProperties(this, options);\n        // For cloning\n        this.set('options', options);\n        this.beforeId = options.beforeId;\n        this.onLoad = this.onLoad.bind(this);\n        if (!this.layersFilter && this.layers) {\n            this.layersFilter = (layer) => {\n                return !!this.layers.find((l) => layer.id === l.id);\n            };\n        }\n    }\n    addLayers() {\n        var _a;\n        if (!((_a = this.maplibreLayer) === null || _a === void 0 ? void 0 : _a.mapLibreMap) || !Array.isArray(this.layers)) {\n            return;\n        }\n        const { mapLibreMap } = this.maplibreLayer;\n        if (mapLibreMap) {\n            this.layers.forEach((layer) => {\n                // @ts-expect-error  source is optional but exists in TS definition\n                const { id, source } = layer;\n                if ((!source || (source && mapLibreMap.getSource(source))) &&\n                    id &&\n                    !mapLibreMap.getLayer(id)) {\n                    mapLibreMap.addLayer(layer, this.beforeId);\n                }\n            });\n            this.applyLayoutVisibility();\n        }\n    }\n    addSources() {\n        var _a;\n        if (!((_a = this.maplibreLayer) === null || _a === void 0 ? void 0 : _a.mapLibreMap) || !this.sources) {\n            return;\n        }\n        const { mapLibreMap } = this.maplibreLayer;\n        if (mapLibreMap) {\n            Object.entries(this.sources).forEach(([id, source]) => {\n                if (!mapLibreMap.getSource(id)) {\n                    mapLibreMap.addSource(id, source);\n                }\n            });\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    applyLayoutVisibility(evt) {\n        var _a, _b;\n        if (!((_b = (_a = this.maplibreLayer) === null || _a === void 0 ? void 0 : _a.mapLibreMap) === null || _b === void 0 ? void 0 : _b.getStyle()) || !this.layersFilter) {\n            return;\n        }\n        const { mapLibreMap } = this.maplibreLayer;\n        const style = mapLibreMap.getStyle();\n        const visibilityValue = this.getVisible() ? 'visible' : 'none';\n        const layers = style.layers || [];\n        for (let i = 0; i < layers.length; i += 1) {\n            const layer = layers[i];\n            if (this.layersFilter(layer)) {\n                const { id } = layer;\n                if (mapLibreMap.getLayer(id)) {\n                    mapLibreMap.setLayoutProperty(id, 'visibility', visibilityValue);\n                    if (this.getMinZoom() || this.getMaxZoom()) {\n                        mapLibreMap.setLayerZoomRange(id, this.getMinZoom() ? this.getMinZoom() - 1 : 0, // Maplibre zoom = ol zoom - 1\n                        this.getMaxZoom() ? this.getMaxZoom() - 1 : 24);\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Initialize the layer.\n     * @param {ol/Map~Map} map the Maplibre map.\n     * @override\n     */\n    attachToMap(map) {\n        const mapInternal = this.getMapInternal();\n        if (!mapInternal || !this.maplibreLayer) {\n            return;\n        }\n        // Apply the initial visibility if possible otherwise we wait for the load event of the layer\n        const { mapLibreMap } = this.maplibreLayer;\n        if (mapLibreMap) {\n            // mapLibreMap.loaded() and mapLibreMap.isStyleLoaded() are reliable only on the first call of init.\n            // On the next call (when a topic change for example), these functions returns false because\n            // the style is being modified.\n            // That's why we rely on a property instead for the next calls.\n            if (mapLibreMap.loaded()) {\n                this.onLoad();\n            }\n            else {\n                mapLibreMap.once('load', this.onLoad);\n            }\n        }\n        // Apply the visibiltity when layer's visibility change.\n        this.olEventsKeys.push(\n        // @ts-expect-error  'load' is a custom event\n        this.maplibreLayer.on('load', this.onLoad.bind(this)), this.on('change:visible', (evt) => {\n            // Once the map is loaded we can apply visiblity without waiting\n            // the style. Maplibre take care of the application of style changes.\n            this.applyLayoutVisibility(evt);\n        }), this.on('propertychange', (evt) => {\n            if (/(sources|layers|layersFilter|maplibreLayer|beforeId)/.test(evt.key)) {\n                this.detachFromMap();\n                this.attachToMap(map);\n            }\n        }), \n        // When the style changes we wait that it is loaded to relaunch the onLoad\n        this.maplibreLayer.on('propertychange', (evt) => {\n            if (evt.key === 'style') {\n                evt.target.maplibreMap.once('styledata', () => {\n                    evt.target.maplibreMap.once('idle', () => {\n                        this.onLoad();\n                    });\n                });\n            }\n        }));\n    }\n    /**\n     * Create a copy of the MaplibreStyleLayer.\n     *\n     * @param {Object} newOptions Options to override. See constructor.\n     * @return {MapboxStyleLayer} A MaplibreStyleLayer.\n     * @public\n     */\n    clone(newOptions) {\n        return new MaplibreStyleLayer(Object.assign(Object.assign({}, this.get('options')), newOptions));\n    }\n    createRenderer() {\n        return new MaplibreStyleLayerRenderer(this);\n    }\n    /**\n     * Terminate the layer.\n     * @override\n     */\n    detachFromMap() {\n        var _a;\n        unByKey(this.olEventsKeys);\n        if ((_a = this.maplibreLayer) === null || _a === void 0 ? void 0 : _a.mapLibreMap) {\n            this.maplibreLayer.mapLibreMap.off('load', this.onLoad);\n            this.removeLayers();\n            this.removeSources();\n        }\n    }\n    /**\n     * Request feature information for a given coordinate.\n     * @param {ol/coordinate~Coordinate} coordinate Coordinate to request the information at.\n     * @return {Promise<FeatureInfo>} Promise with features, layer and coordinate.\n     * @deprecated Use getFeatureInfoAtCoordinate([layer], coordinate) from mobility-toolbox-ol package instead.\n     */\n    getFeatureInfoAtCoordinate(coordinate) {\n        var _a;\n        deprecated(`Deprecated. getFeatureInfoAtCoordinate([layer], coordinate) from ol package instead.`);\n        if (!((_a = this.maplibreLayer) === null || _a === void 0 ? void 0 : _a.mapLibreMap)) {\n            return Promise.resolve({ coordinate, features: [], layer: this });\n        }\n        const { mapLibreMap } = this.maplibreLayer;\n        // Ignore the getFeatureInfo until the Maplibre map is loaded\n        if (!mapLibreMap.isStyleLoaded()) {\n            return Promise.resolve({ coordinate, features: [], layer: this });\n        }\n        // We query features only on style layers used by this layer.\n        let layers = this.layers || [];\n        if (this.layersFilter) {\n            layers = mapLibreMap.getStyle().layers.filter(this.layersFilter);\n            console.log(layers);\n        }\n        if (this.queryRenderedLayersFilter) {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            layers = mapLibreMap\n                .getStyle()\n                .layers.filter(this.queryRenderedLayersFilter);\n        }\n        return Promise.resolve({\n            coordinate,\n            features: [],\n            layer: this,\n        });\n        // this.maplibreLayer\n        //   .getFeatureInfoAtCoordinate(coordinate, {\n        //     layers: layers.map((layer) => layer && layer.id),\n        //     validate: false,\n        //   })\n        //   .then((featureInfo: LayerGetFeatureInfoResponse) => {\n        //     const features: Feature[] = featureInfo.features.filter(\n        //       (feature: Feature) => {\n        //         // @ts-expect-error\n        //         return this.featureInfoFilter(\n        //           feature,\n        //           this.map?.getView().getResolution(),\n        //         ) as Feature[];\n        //       },\n        //     );\n        //     this.highlight(features);\n        //     return { ...featureInfo, features, layer: this };\n        //   });\n    }\n    /**\n     * Highlight a list of features.\n     * @param {Array<ol/Feature~Feature>} [features=[]] Features to highlight.\n     * @deprecated Use layer.setFeatureState(features, {hover: true|false}) instead.\n     */\n    highlight(features = []) {\n        var _a;\n        deprecated(`Deprecated. Use layer.setFeatureState(features, {hover: true}) instead.`);\n        // Filter out selected features\n        const filtered = ((_a = this.highlightedFeatures) === null || _a === void 0 ? void 0 : _a.filter((feature) => !(this.selectedFeatures || [])\n            .map((feat) => feat.getId())\n            .includes(feature.getId()))) || [];\n        // Remove previous highlight\n        this.setHoverState(filtered, false);\n        this.highlightedFeatures = features;\n        // Add highlight\n        this.setHoverState(this.highlightedFeatures, true);\n    }\n    /**\n     * On Maplibre map load callback function. Add style layers and dynaimc filters.\n     */\n    onLoad() {\n        var _a;\n        if (!((_a = this.maplibreLayer) === null || _a === void 0 ? void 0 : _a.mapLibreMap)) {\n            return;\n        }\n        this.addSources();\n        this.addLayers();\n        const { mapLibreMap } = this.maplibreLayer;\n        const style = mapLibreMap.getStyle();\n        if ((style === null || style === void 0 ? void 0 : style.layers) && this.layersFilter) {\n            const styles = style.layers.filter(this.layersFilter);\n            this.set('disabled', !styles.length);\n        }\n        this.applyLayoutVisibility();\n    }\n    removeLayers() {\n        var _a;\n        if (!((_a = this.maplibreLayer) === null || _a === void 0 ? void 0 : _a.mapLibreMap) || !Array.isArray(this.layers)) {\n            return;\n        }\n        const { mapLibreMap } = this.maplibreLayer;\n        if (mapLibreMap) {\n            this.layers.forEach((styleLayer) => {\n                const { id } = styleLayer;\n                if (id && mapLibreMap.getLayer(id)) {\n                    mapLibreMap.removeLayer(id);\n                }\n            });\n        }\n    }\n    // /**\n    //  * Set filter that determines which features should be rendered in a style layer.\n    //  * @param {maplibregl.filter} filter Determines which features should be rendered in a style layer.\n    //  */\n    // setFilter(filter: { [key: string]: any }) {\n    //   if (!this.maplibreLayer?.mapLibreMap) {\n    //     return;\n    //   }\n    //   const { mapLibreMap } = this.maplibreLayer;\n    //   this.styleLayers.forEach(({ id }) => {\n    //     if (id && filter && mapLibreMap.getLayer(id)) {\n    //       // @ts-expect-error\n    //       mapLibreMap.setFilter(id, filter);\n    //     }\n    //   });\n    // }\n    removeSources() {\n        var _a;\n        if (!((_a = this.maplibreLayer) === null || _a === void 0 ? void 0 : _a.mapLibreMap) || !this.sources) {\n            return;\n        }\n        const { mapLibreMap } = this.maplibreLayer;\n        if (mapLibreMap) {\n            Object.keys(this.sources).forEach((id) => {\n                if (mapLibreMap.getSource(id)) {\n                    mapLibreMap.removeSource(id);\n                }\n            });\n        }\n    }\n    /**\n     * Select a list of features.\n     * @param {Array<ol/Feature~Feature>} [features=[]] Features to select.\n     * @deprecated Use layer.setFeatureState(features, {selected: true|false}) instead.\n     */\n    select(features = []) {\n        deprecated(`Deprecated. Use layer.setFeatureState(features, {selected: true}) instead.`);\n        this.setHoverState(this.selectedFeatures || [], false);\n        this.selectedFeatures = features;\n        this.setHoverState(this.selectedFeatures || [], true);\n    }\n    /**\n     * Set the [feature state](https://maplibre.org/maplibre-style-spec/expressions/#feature-state) of the features.\n     *\n     * @param {ol/Feature~Feature[]} features\n     * @param {{[key: string]: any}} state The feature state\n     * @public\n     */\n    setFeatureState(features, state) {\n        var _a;\n        if (!((_a = this.maplibreLayer) === null || _a === void 0 ? void 0 : _a.mapLibreMap) || !features.length) {\n            return;\n        }\n        const mapLibreMap = this.maplibreLayer.mapLibreMap;\n        features.forEach((feature) => {\n            const { source, sourceLayer } = feature.get(VECTOR_TILE_FEATURE_PROPERTY) || {};\n            if ((!source && !sourceLayer) || !feature.getId()) {\n                if (!feature.getId()) {\n                    deprecated(\"No feature's id found. To use the feature state functionnality, tiles must be generated with --generate-ids. See https://github.com/Maplibre/tippecanoe#adding-calculated-attributes.\", feature.getProperties());\n                }\n                return;\n            }\n            mapLibreMap.setFeatureState({\n                id: feature.getId(),\n                source,\n                sourceLayer,\n            }, state);\n        });\n    }\n    /**\n     * Set if features are hovered or not.\n     * @param {Array<ol/Feature~Feature>} features\n     * @param {boolean} state Is the feature hovered\n     * @deprecated Use layer.setFeatureState(features, {hover: true|false}) instead.\n     */\n    setHoverState(features, state) {\n        deprecated(`Deprecated. Use layer.setFeatureState(features, {hover: ${state}}) instead.`);\n        this.setFeatureState(features, { hover: state });\n    }\n    setMapInternal(map) {\n        if (map) {\n            super.setMapInternal(map);\n            this.attachToMap(map);\n        }\n        else {\n            this.detachFromMap();\n            super.setMapInternal(map);\n        }\n    }\n}\nexport default MaplibreStyleLayer;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/layers/MaplibreStyleLayer.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 587,
    "kind": "function",
    "name": "deprecated",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~deprecated",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/layers/MaplibreStyleLayer.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 588,
    "kind": "class",
    "name": "MaplibreStyleLayer",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js",
    "static": true,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "access": "public",
    "export": true,
    "importPath": "mobility-toolbox-js/build/ol/layers/MaplibreStyleLayer.js",
    "importStyle": "MaplibreStyleLayer",
    "description": "Layer that helps show/hide a specific subset of style layers of a [MaplibreLayer](./MaplibreLayer.js~MaplibreLayer.html).",
    "examples": [
      "import { MaplibreLayer, MaplibreStyleLayer } from 'mobility-toolbox-js/ol';\n\nconst maplibreLayer = new MaplibreLayer({\n  apiKey: 'yourApiKey',\n});\n\nconst layer = new MaplibreStyleLayer({\n  maplibreLayer: maplibreLayer,\n  layersFilter: (layer) => {\n    // show/hide only style layers related to stations\n    return /station/.test(layer.id);\n  },\n});"
    ],
    "see": [
      "<a href=\"/example/ol-maplibre-style-layer\">OpenLayers MaplibreStyle layer example</a>"
    ],
    "lineNumber": 38,
    "interface": false,
    "extends": [
      "ol/layer/Layer~Layer"
    ]
  },
  {
    "__docId__": 589,
    "kind": "get",
    "name": "beforeId",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#beforeId",
    "access": "private",
    "description": null,
    "lineNumber": 39,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 590,
    "kind": "set",
    "name": "beforeId",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#beforeId",
    "access": "private",
    "description": null,
    "lineNumber": 42,
    "undocument": true
  },
  {
    "__docId__": 591,
    "kind": "get",
    "name": "layers",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#layers",
    "access": "private",
    "description": null,
    "lineNumber": 45,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 592,
    "kind": "set",
    "name": "layers",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#layers",
    "access": "private",
    "description": null,
    "lineNumber": 48,
    "undocument": true
  },
  {
    "__docId__": 593,
    "kind": "get",
    "name": "layersFilter",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#layersFilter",
    "access": "private",
    "description": null,
    "lineNumber": 51,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 594,
    "kind": "set",
    "name": "layersFilter",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#layersFilter",
    "access": "private",
    "description": null,
    "lineNumber": 54,
    "undocument": true
  },
  {
    "__docId__": 595,
    "kind": "get",
    "name": "mapboxLayer",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#mapboxLayer",
    "access": "private",
    "description": "",
    "lineNumber": 60,
    "deprecated": "Use MaplibreStyleLayer.maplibreLayer instead.",
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 596,
    "kind": "get",
    "name": "maplibreLayer",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#maplibreLayer",
    "access": "private",
    "description": null,
    "lineNumber": 64,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 597,
    "kind": "set",
    "name": "maplibreLayer",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#maplibreLayer",
    "access": "private",
    "description": null,
    "lineNumber": 67,
    "undocument": true
  },
  {
    "__docId__": 598,
    "kind": "get",
    "name": "queryRenderedLayersFilter",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#queryRenderedLayersFilter",
    "access": "private",
    "description": null,
    "lineNumber": 70,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 599,
    "kind": "set",
    "name": "queryRenderedLayersFilter",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#queryRenderedLayersFilter",
    "access": "private",
    "description": null,
    "lineNumber": 73,
    "undocument": true
  },
  {
    "__docId__": 600,
    "kind": "get",
    "name": "sources",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#sources",
    "access": "private",
    "description": null,
    "lineNumber": 76,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 601,
    "kind": "set",
    "name": "sources",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#sources",
    "access": "private",
    "description": null,
    "lineNumber": 79,
    "undocument": true
  },
  {
    "__docId__": 602,
    "kind": "get",
    "name": "styleLayer",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#styleLayer",
    "access": "private",
    "description": "",
    "lineNumber": 85,
    "deprecated": "Use MaplibreStyleLayer.layer instead.",
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 603,
    "kind": "set",
    "name": "styleLayer",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#styleLayer",
    "access": "private",
    "description": "",
    "lineNumber": 92,
    "deprecated": true
  },
  {
    "__docId__": 605,
    "kind": "get",
    "name": "styleLayers",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#styleLayers",
    "access": "private",
    "description": "",
    "lineNumber": 102,
    "deprecated": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 606,
    "kind": "set",
    "name": "styleLayers",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#styleLayers",
    "access": "private",
    "description": "",
    "lineNumber": 109,
    "deprecated": true
  },
  {
    "__docId__": 608,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#constructor",
    "access": "public",
    "description": "Constructor.",
    "lineNumber": 125,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "name": "options.beforeId",
        "description": "The style layer id to use when the options.layers property is defined, unsused otherwise."
      },
      {
        "nullable": null,
        "types": [
          "maplibregl.AddLayerObject[]"
        ],
        "spread": false,
        "optional": true,
        "name": "options.layers",
        "description": "The layers to add to the style on load."
      },
      {
        "nullable": null,
        "types": [
          "FilterFunction"
        ],
        "spread": false,
        "optional": true,
        "name": "options.layersFilter",
        "description": "Filter function to decide which style layer to apply visiblity on. If not provided, the 'layers' property is used."
      },
      {
        "nullable": null,
        "types": [
          "MaplibreLayer"
        ],
        "spread": false,
        "optional": true,
        "name": "options.maplibreLayer",
        "description": "The MaplibreLayer to use."
      },
      {
        "nullable": null,
        "types": [
          "FilterFunction"
        ],
        "spread": false,
        "optional": true,
        "name": "options.queryRenderedLayersFilter",
        "description": "Filter function to decide which style layer are available for query."
      },
      {
        "nullable": null,
        "types": [
          "{[id: string]:maplibregl.SourceSpecification}"
        ],
        "spread": false,
        "optional": true,
        "name": "options.sources",
        "description": "The sources to add to the style on load."
      }
    ]
  },
  {
    "__docId__": 609,
    "kind": "member",
    "name": "highlightedFeatures",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#highlightedFeatures",
    "access": "private",
    "description": null,
    "lineNumber": 151,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 610,
    "kind": "member",
    "name": "olEventsKeys",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#olEventsKeys",
    "access": "private",
    "description": null,
    "lineNumber": 152,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 611,
    "kind": "member",
    "name": "selectedFeatures",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#selectedFeatures",
    "access": "private",
    "description": null,
    "lineNumber": 153,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 615,
    "kind": "method",
    "name": "addLayers",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#addLayers",
    "access": "private",
    "description": null,
    "lineNumber": 166,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 616,
    "kind": "method",
    "name": "addSources",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#addSources",
    "access": "private",
    "description": null,
    "lineNumber": 185,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 617,
    "kind": "method",
    "name": "applyLayoutVisibility",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#applyLayoutVisibility",
    "access": "private",
    "description": null,
    "lineNumber": 200,
    "undocument": true,
    "params": [
      {
        "name": "evt",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 618,
    "kind": "method",
    "name": "attachToMap",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#attachToMap",
    "access": "private",
    "description": "Initialize the layer.",
    "lineNumber": 228,
    "params": [
      {
        "nullable": null,
        "types": [
          "ol/Map~Map"
        ],
        "spread": false,
        "optional": false,
        "name": "map",
        "description": "the Maplibre map."
      }
    ],
    "override": true,
    "return": null
  },
  {
    "__docId__": 619,
    "kind": "method",
    "name": "clone",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#clone",
    "access": "public",
    "description": "Create a copy of the MaplibreStyleLayer.",
    "lineNumber": 278,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "newOptions",
        "description": "Options to override. See constructor."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "MapboxStyleLayer"
      ],
      "spread": false,
      "description": "A MaplibreStyleLayer."
    }
  },
  {
    "__docId__": 620,
    "kind": "method",
    "name": "createRenderer",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#createRenderer",
    "access": "private",
    "description": null,
    "lineNumber": 281,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 621,
    "kind": "method",
    "name": "detachFromMap",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#detachFromMap",
    "access": "private",
    "description": "Terminate the layer.",
    "lineNumber": 288,
    "override": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 622,
    "kind": "method",
    "name": "getFeatureInfoAtCoordinate",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#getFeatureInfoAtCoordinate",
    "access": "private",
    "description": "Request feature information for a given coordinate.",
    "lineNumber": 303,
    "deprecated": "Use getFeatureInfoAtCoordinate([layer], coordinate) from mobility-toolbox-ol package instead.",
    "params": [
      {
        "nullable": null,
        "types": [
          "ol/coordinate~Coordinate"
        ],
        "spread": false,
        "optional": false,
        "name": "coordinate",
        "description": "Coordinate to request the information at."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<FeatureInfo>"
      ],
      "spread": false,
      "description": "Promise with features, layer and coordinate."
    }
  },
  {
    "__docId__": 623,
    "kind": "method",
    "name": "highlight",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#highlight",
    "access": "private",
    "description": "Highlight a list of features.",
    "lineNumber": 355,
    "deprecated": "Use layer.setFeatureState(features, {hover: true|false}) instead.",
    "params": [
      {
        "nullable": null,
        "types": [
          "Array<ol/Feature~Feature>"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "[]",
        "defaultRaw": [],
        "name": "features",
        "description": "Features to highlight."
      }
    ],
    "return": null
  },
  {
    "__docId__": 625,
    "kind": "method",
    "name": "onLoad",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#onLoad",
    "access": "private",
    "description": "On Maplibre map load callback function. Add style layers and dynaimc filters.",
    "lineNumber": 371,
    "params": [],
    "return": null
  },
  {
    "__docId__": 626,
    "kind": "method",
    "name": "removeLayers",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#removeLayers",
    "access": "private",
    "description": null,
    "lineNumber": 386,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 627,
    "kind": "method",
    "name": "removeSources",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#removeSources",
    "access": "private",
    "description": null,
    "lineNumber": 417,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 628,
    "kind": "method",
    "name": "select",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#select",
    "access": "private",
    "description": "Select a list of features.",
    "lineNumber": 436,
    "deprecated": "Use layer.setFeatureState(features, {selected: true|false}) instead.",
    "params": [
      {
        "nullable": null,
        "types": [
          "Array<ol/Feature~Feature>"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "[]",
        "defaultRaw": [],
        "name": "features",
        "description": "Features to select."
      }
    ],
    "return": null
  },
  {
    "__docId__": 630,
    "kind": "method",
    "name": "setFeatureState",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#setFeatureState",
    "access": "public",
    "description": "Set the [feature state](https://maplibre.org/maplibre-style-spec/expressions/#feature-state) of the features.",
    "lineNumber": 449,
    "params": [
      {
        "nullable": null,
        "types": [
          "ol/Feature~Feature[]"
        ],
        "spread": false,
        "optional": false,
        "name": "features",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "{[key: string]: any}"
        ],
        "spread": false,
        "optional": false,
        "name": "state",
        "description": "The feature state"
      }
    ],
    "return": null
  },
  {
    "__docId__": 631,
    "kind": "method",
    "name": "setHoverState",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#setHoverState",
    "access": "private",
    "description": "Set if features are hovered or not.",
    "lineNumber": 476,
    "deprecated": "Use layer.setFeatureState(features, {hover: true|false}) instead.",
    "params": [
      {
        "nullable": null,
        "types": [
          "Array<ol/Feature~Feature>"
        ],
        "spread": false,
        "optional": false,
        "name": "features",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "state",
        "description": "Is the feature hovered"
      }
    ],
    "return": null
  },
  {
    "__docId__": 632,
    "kind": "method",
    "name": "setMapInternal",
    "memberof": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/MaplibreStyleLayer.js~MaplibreStyleLayer#setMapInternal",
    "access": "private",
    "description": null,
    "lineNumber": 480,
    "undocument": true,
    "params": [
      {
        "name": "map",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 633,
    "kind": "file",
    "name": "build/ol/layers/RealtimeLayer.js",
    "content": "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport debounce from 'lodash.debounce';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport Layer from 'ol/layer/Layer';\nimport VectorLayer from 'ol/layer/Vector';\nimport { unByKey } from 'ol/Observable';\nimport { Vector as VectorSource } from 'ol/source';\nimport Source from 'ol/source/Source';\nimport RealtimeEngine from '../../common/utils/RealtimeEngine';\nimport RealtimeLayerRenderer from '../renderers/RealtimeLayerRenderer';\nimport { fullTrajectoryStyle } from '../styles';\nimport defineDeprecatedProperties from '../utils/defineDeprecatedProperties';\nconst format = new GeoJSON();\n/**\n * An OpenLayers layer able to display data from the [geOps Realtime API](https://developer.geops.io/apis/realtime/).\n *\n * @example\n * import { RealtimeLayer } from 'mobility-toolbox-js/ol';\n *\n * const layer = new RealtimeLayer({\n *   apiKey: \"yourApiKey\"\n *   // allowRenderWhenAnimating: false,\n *   // url: \"wss://api.geops.io/tracker-ws/v1/\",\n * });\n *\n *\n * @see <a href=\"/api/class/src/api/RealtimeAPI%20js~RealtimeAPI%20html\">RealtimeAPI</a>\n * @see <a href=\"/example/ol-realtime\">OpenLayers Realtime layer example</a>\n *\n *\n * @extends {ol/layer/Layer~Layer}\n *\n *\n * @classproperty {boolean} allowRenderWhenAnimating - Allow rendering of the layer when the map is animating.\n * @public\n */\nclass RealtimeLayer extends Layer {\n    get api() {\n        return this.engine.api;\n    }\n    set api(api) {\n        this.engine.api = api;\n    }\n    get canvas() {\n        return this.engine.canvas;\n    }\n    get filter() {\n        return this.engine.filter;\n    }\n    set filter(filter) {\n        this.engine.filter = filter;\n    }\n    get hoverVehicleId() {\n        return this.engine.hoverVehicleId;\n    }\n    set hoverVehicleId(id) {\n        this.engine.hoverVehicleId = id;\n    }\n    get mode() {\n        return this.engine.mode;\n    }\n    set mode(mode) {\n        this.engine.mode = mode;\n    }\n    get pixelRatio() {\n        return this.engine.pixelRatio;\n    }\n    get selectedVehicleId() {\n        return this.engine.selectedVehicleId;\n    }\n    set selectedVehicleId(id) {\n        this.engine.selectedVehicleId = id;\n    }\n    get sort() {\n        return this.engine.sort;\n    }\n    set sort(sort) {\n        this.engine.sort = sort;\n    }\n    get trajectories() {\n        return this.engine.trajectories;\n    }\n    /**\n     * Constructor.\n     *\n     * @param {RealtimeLayerOptions} options\n     * @param {boolean} [options.allowRenderWhenAnimating=false] Allow rendering of the layer when the map is animating.\n     * @param {string} options.apiKey Access key for [geOps APIs](https://developer.geops.io/).\n     * @param {string} [options.url=\"wss://api.geops.io/tracker-ws/v1/\"] The [geOps Realtime API](https://developer.geops.io/apis/realtime/) url.\n     * @public\n     */\n    constructor(options) {\n        // We use a group to be able to add custom vector layer in extended class.\n        // For example TrajservLayer use a vectorLayer to display the complete trajectory.\n        super(Object.assign({ source: new Source({}) }, options));\n        this.allowRenderWhenAnimating = false;\n        this.maxNbFeaturesRequested = 100;\n        this.olEventsKeys = [];\n        // For backward compatibility with v2\n        defineDeprecatedProperties(this, options);\n        this.engine = new RealtimeEngine(Object.assign({ getViewState: this.getViewState.bind(this), onIdle: this.onRealtimeEngineIdle.bind(this), onRender: this.onRealtimeEngineRender.bind(this) }, options));\n        this.allowRenderWhenAnimating = !!options.allowRenderWhenAnimating;\n        // We store the layer used to highlight the full Trajectory\n        this.vectorLayer = new VectorLayer({\n            source: new VectorSource({ features: [] }),\n            style: (feature, resolution) => {\n                return (options.fullTrajectoryStyle || fullTrajectoryStyle)(feature, resolution, this.engine.styleOptions);\n            },\n            updateWhileAnimating: this.allowRenderWhenAnimating,\n            updateWhileInteracting: true,\n        });\n        this.onZoomEndDebounced = debounce(this.onZoomEnd, 100);\n        this.onMoveEndDebounced = debounce(this.onMoveEnd, 100);\n    }\n    attachToMap() {\n        this.engine.attachToMap();\n        const mapInternal = this.getMapInternal();\n        if (mapInternal) {\n            // If the layer is visible we start  the rendering clock\n            if (this.getVisible()) {\n                this.engine.start();\n            }\n            this.olEventsKeys.push(mapInternal.on('movestart', () => {\n                if (this.engine.isUpdateBboxOnMoveEnd) {\n                    this.engine.updateIdleState();\n                }\n            }), ...mapInternal.on(['moveend', 'change:target'], \n            // @ts-expect-error  - bad ol definitions\n            (evt) => {\n                const view = (evt.map || evt.target).getView();\n                if (!view || (view === null || view === void 0 ? void 0 : view.getAnimating()) || (view === null || view === void 0 ? void 0 : view.getInteracting())) {\n                    return;\n                }\n                const zoom = view.getZoom();\n                // Update the interval between render updates\n                if (this.currentZoom !== zoom) {\n                    this.onZoomEndDebounced(evt);\n                }\n                this.currentZoom = zoom;\n                this.onMoveEndDebounced(evt);\n            }), this.on('change:visible', (evt) => {\n                if (evt.target.getVisible()) {\n                    this.engine.start();\n                }\n                else {\n                    this.engine.stop();\n                }\n            }), this.on('propertychange', (evt) => {\n                // We apply every property change event related to visiblity to the vectorlayer\n                if (/(opacity|visible|zIndex|minResolution|maxResolution|minZoom|maxZoom)/.test(evt.key)) {\n                    this.vectorLayer.set(evt.key, evt.target.get(evt.key));\n                }\n            }));\n        }\n    }\n    cleanVectorLayer() {\n        var _a, _b, _c;\n        (_b = (_a = this.vectorLayer) === null || _a === void 0 ? void 0 : _a.getSource()) === null || _b === void 0 ? void 0 : _b.clear(true);\n        (_c = this.vectorLayer.getMapInternal()) === null || _c === void 0 ? void 0 : _c.removeLayer(this.vectorLayer);\n    }\n    /**\n     * Create a copy of the RealtimeLayer.\n     *\n     * @param {Object} newOptions Options to override. See constructor.\n     * @return {RealtimeLayer} A RealtimeLayer\n     * @public\n     */\n    clone(newOptions) {\n        return new RealtimeLayer(Object.assign(Object.assign({}, this.get('options')), newOptions));\n    }\n    createRenderer() {\n        return new RealtimeLayerRenderer(this);\n    }\n    /**\n     * Destroy the container of the tracker.\n     */\n    detachFromMap() {\n        var _a;\n        unByKey(this.olEventsKeys);\n        (_a = this.getMapInternal()) === null || _a === void 0 ? void 0 : _a.removeLayer(this.vectorLayer);\n        this.engine.detachFromMap();\n    }\n    /**\n     * Get the full trajectory of a vehicle as features.\n     *\n     * @param {string} id A vehicle's id.\n     * @returns {Promise<Feature[]>} A list of features representing a full trajectory.\n     * @public\n     */\n    getFullTrajectory(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a, _b, _c, _d;\n            const data = yield this.engine.api.getFullTrajectory(id, this.engine.mode, this.engine.getGeneralizationLevelByZoom(Math.floor(((_b = (_a = this.getMapInternal()) === null || _a === void 0 ? void 0 : _a.getView()) === null || _b === void 0 ? void 0 : _b.getZoom()) || 0)));\n            if ((_d = (_c = data === null || data === void 0 ? void 0 : data.content) === null || _c === void 0 ? void 0 : _c.features) === null || _d === void 0 ? void 0 : _d.length) {\n                return format.readFeatures(data === null || data === void 0 ? void 0 : data.content);\n            }\n            return [];\n        });\n    }\n    /**\n     * Get the stop sequences of a vehicle.\n     *\n     * @param {string} id A vehicle's id.\n     * @returns {Promise<RealtimeStopSequence[]>} An array of stop sequences.\n     * @public\n     */\n    getStopSequences(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = yield this.engine.api.getStopSequence(id);\n            return data === null || data === void 0 ? void 0 : data.content;\n        });\n    }\n    /**\n     * Get full trajectory and stop sequences  of a vehicle.\n     *\n     * @param {RealtimeTrainId} id A vehicle's id.\n     * @returns {Promise<{fullTrajectory: Feature[], stopSequences: RealtimeStopSequence[]}>} An object containing the full trajectory and the stop sequences.\n     */\n    getTrajectoryInfos(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // When a vehicle is selected, we request the complete stop sequence and the complete full trajectory.\n            // Then we combine them in one response.\n            const promises = [this.getStopSequences(id), this.getFullTrajectory(id)];\n            const [stopSequences, fullTrajectory] = yield Promise.all(promises);\n            return {\n                fullTrajectory: fullTrajectory,\n                stopSequences: stopSequences,\n            };\n        });\n    }\n    getVehicles(filterFunc) {\n        return this.engine.getVehicles(filterFunc);\n    }\n    getViewState() {\n        const mapInternal = this.getMapInternal();\n        if (!(mapInternal === null || mapInternal === void 0 ? void 0 : mapInternal.getView())) {\n            return {};\n        }\n        const view = mapInternal.getView();\n        return {\n            center: view.getCenter(),\n            extent: view.calculateExtent(),\n            pixelRatio: this.engine.pixelRatio,\n            resolution: view.getResolution(),\n            rotation: view.getRotation(),\n            size: mapInternal.getSize(),\n            visible: this.getVisible(),\n            zoom: view.getZoom(),\n        };\n    }\n    highlight(feature) {\n        const id = feature === null || feature === void 0 ? void 0 : feature.get('train_id');\n        if (this.hoverVehicleId !== id) {\n            this.hoverVehicleId = id;\n            this.engine.renderTrajectories(true);\n        }\n    }\n    /**\n     * Highlight the trajectory of journey.\n     */\n    highlightTrajectory(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a, _b, _c, _d, _e, _f;\n            if (!id) {\n                this.cleanVectorLayer();\n                return;\n            }\n            const features = yield this.getFullTrajectory(id);\n            if (!(features === null || features === void 0 ? void 0 : features.length)) {\n                this.cleanVectorLayer();\n                return;\n            }\n            if (features.length) {\n                (_b = (_a = this.vectorLayer) === null || _a === void 0 ? void 0 : _a.getSource()) === null || _b === void 0 ? void 0 : _b.addFeatures(features);\n            }\n            if (this.vectorLayer.getMapInternal() &&\n                this.vectorLayer.getMapInternal() !== this.getMapInternal()) {\n                (_c = this.vectorLayer.getMapInternal()) === null || _c === void 0 ? void 0 : _c.removeLayer(this.vectorLayer);\n            }\n            // Add the vector layer to the map\n            const zIndex = this.getZIndex();\n            if (zIndex !== undefined) {\n                this.vectorLayer.setZIndex(zIndex - 1);\n                if (!this.vectorLayer.getMapInternal()) {\n                    (_d = this.getMapInternal()) === null || _d === void 0 ? void 0 : _d.addLayer(this.vectorLayer);\n                }\n            }\n            else if (!this.vectorLayer.getMapInternal()) {\n                const index = ((_e = this.getMapInternal()) === null || _e === void 0 ? void 0 : _e.getLayers().getArray().indexOf(this)) || 0;\n                if (index) {\n                    (_f = this.getMapInternal()) === null || _f === void 0 ? void 0 : _f.getLayers().insertAt(index, this.vectorLayer);\n                }\n            }\n            return features;\n        });\n    }\n    onMoveEnd() {\n        if (!this.engine.isUpdateBboxOnMoveEnd || !this.getVisible()) {\n            return;\n        }\n        this.engine.setBbox();\n    }\n    onRealtimeEngineIdle() {\n        this.changed();\n    }\n    /**\n     * Callback when the RealtimeEngine has rendered successfully.\n     */\n    onRealtimeEngineRender(renderState, viewState) {\n        this.renderedViewState = Object.assign({}, viewState);\n        // @ts-expect-error  - we are in the same class\n        const { container } = this.getRenderer();\n        if (container) {\n            container.style.transform = '';\n        }\n    }\n    onZoomEnd() {\n        this.engine.onZoomEnd();\n        if (!this.engine.isUpdateBboxOnMoveEnd || !this.getVisible()) {\n            return;\n        }\n        if (this.selectedVehicleId) {\n            this.highlightTrajectory(this.selectedVehicleId);\n        }\n    }\n    select(feature) {\n        const id = feature === null || feature === void 0 ? void 0 : feature.get('train_id');\n        if (this.selectedVehicleId !== id) {\n            this.selectedVehicleId = id;\n            this.engine.renderTrajectories(true);\n        }\n        this.highlightTrajectory(id);\n    }\n    setMapInternal(map) {\n        if (map) {\n            super.setMapInternal(map);\n            this.attachToMap();\n        }\n        else {\n            this.detachFromMap();\n            super.setMapInternal(map);\n        }\n    }\n    shouldRender() {\n        var _a, _b;\n        return this.allowRenderWhenAnimating\n            ? false\n            : ((_a = this.getMapInternal()) === null || _a === void 0 ? void 0 : _a.getView().getAnimating()) ||\n                ((_b = this.getMapInternal()) === null || _b === void 0 ? void 0 : _b.getView().getInteracting());\n    }\n    /**\n     * Start the rendering.\n     *\n     * @public\n     */\n    start() {\n        this.engine.start();\n    }\n    /**\n     * Stop the rendering.\n     *\n     * @public\n     */\n    stop() {\n        this.engine.stop();\n    }\n}\nexport default RealtimeLayer;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/layers/RealtimeLayer.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 634,
    "kind": "variable",
    "name": "__awaiter",
    "memberof": "build/ol/layers/RealtimeLayer.js",
    "static": true,
    "longname": "build/ol/layers/RealtimeLayer.js~__awaiter",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/layers/RealtimeLayer.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 635,
    "kind": "variable",
    "name": "format",
    "memberof": "build/ol/layers/RealtimeLayer.js",
    "static": true,
    "longname": "build/ol/layers/RealtimeLayer.js~format",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/layers/RealtimeLayer.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 21,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 636,
    "kind": "class",
    "name": "RealtimeLayer",
    "memberof": "build/ol/layers/RealtimeLayer.js",
    "static": true,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "access": "public",
    "export": true,
    "importPath": "mobility-toolbox-js/build/ol/layers/RealtimeLayer.js",
    "importStyle": "RealtimeLayer",
    "description": "An OpenLayers layer able to display data from the [geOps Realtime API](https://developer.geops.io/apis/realtime/).",
    "examples": [
      "import { RealtimeLayer } from 'mobility-toolbox-js/ol';\n\nconst layer = new RealtimeLayer({\n  apiKey: \"yourApiKey\"\n  // allowRenderWhenAnimating: false,\n  // url: \"wss://api.geops.io/tracker-ws/v1/\",\n});"
    ],
    "see": [
      "<a href=\"/api/class/src/api/RealtimeAPI%20js~RealtimeAPI%20html\">RealtimeAPI</a>",
      "<a href=\"/example/ol-realtime\">OpenLayers Realtime layer example</a>"
    ],
    "lineNumber": 45,
    "unknown": [
      {
        "tagName": "@classproperty",
        "tagValue": "{boolean} allowRenderWhenAnimating - Allow rendering of the layer when the map is animating."
      }
    ],
    "interface": false,
    "extends": [
      "ol/layer/Layer~Layer"
    ]
  },
  {
    "__docId__": 637,
    "kind": "get",
    "name": "api",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#api",
    "access": "private",
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 638,
    "kind": "set",
    "name": "api",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#api",
    "access": "private",
    "description": null,
    "lineNumber": 49,
    "undocument": true
  },
  {
    "__docId__": 639,
    "kind": "get",
    "name": "canvas",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#canvas",
    "access": "private",
    "description": null,
    "lineNumber": 52,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 640,
    "kind": "get",
    "name": "filter",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#filter",
    "access": "private",
    "description": null,
    "lineNumber": 55,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 641,
    "kind": "set",
    "name": "filter",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#filter",
    "access": "private",
    "description": null,
    "lineNumber": 58,
    "undocument": true
  },
  {
    "__docId__": 642,
    "kind": "get",
    "name": "hoverVehicleId",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#hoverVehicleId",
    "access": "private",
    "description": null,
    "lineNumber": 61,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 643,
    "kind": "set",
    "name": "hoverVehicleId",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#hoverVehicleId",
    "access": "private",
    "description": null,
    "lineNumber": 64,
    "undocument": true
  },
  {
    "__docId__": 644,
    "kind": "get",
    "name": "mode",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#mode",
    "access": "private",
    "description": null,
    "lineNumber": 67,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 645,
    "kind": "set",
    "name": "mode",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#mode",
    "access": "private",
    "description": null,
    "lineNumber": 70,
    "undocument": true
  },
  {
    "__docId__": 646,
    "kind": "get",
    "name": "pixelRatio",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#pixelRatio",
    "access": "private",
    "description": null,
    "lineNumber": 73,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 647,
    "kind": "get",
    "name": "selectedVehicleId",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#selectedVehicleId",
    "access": "private",
    "description": null,
    "lineNumber": 76,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 648,
    "kind": "set",
    "name": "selectedVehicleId",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#selectedVehicleId",
    "access": "private",
    "description": null,
    "lineNumber": 79,
    "undocument": true
  },
  {
    "__docId__": 649,
    "kind": "get",
    "name": "sort",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#sort",
    "access": "private",
    "description": null,
    "lineNumber": 82,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 650,
    "kind": "set",
    "name": "sort",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#sort",
    "access": "private",
    "description": null,
    "lineNumber": 85,
    "undocument": true
  },
  {
    "__docId__": 651,
    "kind": "get",
    "name": "trajectories",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#trajectories",
    "access": "private",
    "description": null,
    "lineNumber": 88,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 652,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#constructor",
    "access": "public",
    "description": "Constructor.",
    "lineNumber": 100,
    "params": [
      {
        "nullable": null,
        "types": [
          "RealtimeLayerOptions"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "options.allowRenderWhenAnimating",
        "description": "Allow rendering of the layer when the map is animating."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "options.apiKey",
        "description": "Access key for [geOps APIs](https://developer.geops.io/)."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "\"wss://api.geops.io/tracker-ws/v1/\"",
        "defaultRaw": "wss://api.geops.io/tracker-ws/v1/",
        "name": "options.url",
        "description": "The [geOps Realtime API](https://developer.geops.io/apis/realtime/) url."
      }
    ]
  },
  {
    "__docId__": 653,
    "kind": "member",
    "name": "allowRenderWhenAnimating",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#allowRenderWhenAnimating",
    "access": "private",
    "description": null,
    "lineNumber": 104,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 654,
    "kind": "member",
    "name": "maxNbFeaturesRequested",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#maxNbFeaturesRequested",
    "access": "private",
    "description": null,
    "lineNumber": 105,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 655,
    "kind": "member",
    "name": "olEventsKeys",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#olEventsKeys",
    "access": "private",
    "description": null,
    "lineNumber": 106,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 656,
    "kind": "member",
    "name": "engine",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#engine",
    "access": "private",
    "description": null,
    "lineNumber": 109,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 658,
    "kind": "member",
    "name": "vectorLayer",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#vectorLayer",
    "access": "private",
    "description": null,
    "lineNumber": 112,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 659,
    "kind": "member",
    "name": "onZoomEndDebounced",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#onZoomEndDebounced",
    "access": "private",
    "description": null,
    "lineNumber": 120,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 660,
    "kind": "member",
    "name": "onMoveEndDebounced",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#onMoveEndDebounced",
    "access": "private",
    "description": null,
    "lineNumber": 121,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 661,
    "kind": "method",
    "name": "attachToMap",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#attachToMap",
    "access": "private",
    "description": null,
    "lineNumber": 123,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 662,
    "kind": "member",
    "name": "currentZoom",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#currentZoom",
    "access": "private",
    "description": null,
    "lineNumber": 147,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 663,
    "kind": "method",
    "name": "cleanVectorLayer",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#cleanVectorLayer",
    "access": "private",
    "description": null,
    "lineNumber": 164,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 664,
    "kind": "method",
    "name": "clone",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#clone",
    "access": "public",
    "description": "Create a copy of the RealtimeLayer.",
    "lineNumber": 176,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "newOptions",
        "description": "Options to override. See constructor."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "RealtimeLayer"
      ],
      "spread": false,
      "description": "A RealtimeLayer"
    }
  },
  {
    "__docId__": 665,
    "kind": "method",
    "name": "createRenderer",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#createRenderer",
    "access": "private",
    "description": null,
    "lineNumber": 179,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 666,
    "kind": "method",
    "name": "detachFromMap",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#detachFromMap",
    "access": "private",
    "description": "Destroy the container of the tracker.",
    "lineNumber": 185,
    "params": [],
    "return": null
  },
  {
    "__docId__": 667,
    "kind": "method",
    "name": "getFullTrajectory",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#getFullTrajectory",
    "access": "public",
    "description": "Get the full trajectory of a vehicle as features.",
    "lineNumber": 198,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Feature[]>} A list of features representing a full trajectory."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "id",
        "description": "A vehicle's id."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Feature[]>"
      ],
      "spread": false,
      "description": "A list of features representing a full trajectory."
    }
  },
  {
    "__docId__": 668,
    "kind": "method",
    "name": "getStopSequences",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#getStopSequences",
    "access": "public",
    "description": "Get the stop sequences of a vehicle.",
    "lineNumber": 215,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<RealtimeStopSequence[]>} An array of stop sequences."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "id",
        "description": "A vehicle's id."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<RealtimeStopSequence[]>"
      ],
      "spread": false,
      "description": "An array of stop sequences."
    }
  },
  {
    "__docId__": 669,
    "kind": "method",
    "name": "getTrajectoryInfos",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#getTrajectoryInfos",
    "access": "private",
    "description": "Get full trajectory and stop sequences  of a vehicle.",
    "lineNumber": 227,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<{fullTrajectory: Feature[], stopSequences: RealtimeStopSequence[]}>} An object containing the full trajectory and the stop sequences."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "RealtimeTrainId"
        ],
        "spread": false,
        "optional": false,
        "name": "id",
        "description": "A vehicle's id."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<{fullTrajectory: Feature[], stopSequences: RealtimeStopSequence[]}>"
      ],
      "spread": false,
      "description": "An object containing the full trajectory and the stop sequences."
    }
  },
  {
    "__docId__": 670,
    "kind": "method",
    "name": "getVehicles",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#getVehicles",
    "access": "private",
    "description": null,
    "lineNumber": 239,
    "undocument": true,
    "params": [
      {
        "name": "filterFunc",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 671,
    "kind": "method",
    "name": "getViewState",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#getViewState",
    "access": "private",
    "description": null,
    "lineNumber": 242,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"center\": *, \"extent\": *, \"pixelRatio\": *, \"resolution\": *, \"rotation\": *, \"size\": *, \"visible\": *, \"zoom\": *}"
      ]
    }
  },
  {
    "__docId__": 672,
    "kind": "method",
    "name": "highlight",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#highlight",
    "access": "private",
    "description": null,
    "lineNumber": 259,
    "undocument": true,
    "params": [
      {
        "name": "feature",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 674,
    "kind": "method",
    "name": "highlightTrajectory",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#highlightTrajectory",
    "access": "private",
    "description": "Highlight the trajectory of journey.",
    "lineNumber": 269,
    "params": [
      {
        "name": "id",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 675,
    "kind": "method",
    "name": "onMoveEnd",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#onMoveEnd",
    "access": "private",
    "description": null,
    "lineNumber": 305,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 676,
    "kind": "method",
    "name": "onRealtimeEngineIdle",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#onRealtimeEngineIdle",
    "access": "private",
    "description": null,
    "lineNumber": 311,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 677,
    "kind": "method",
    "name": "onRealtimeEngineRender",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#onRealtimeEngineRender",
    "access": "private",
    "description": "Callback when the RealtimeEngine has rendered successfully.",
    "lineNumber": 317,
    "params": [
      {
        "name": "renderState",
        "types": [
          "*"
        ]
      },
      {
        "name": "viewState",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 678,
    "kind": "member",
    "name": "renderedViewState",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#renderedViewState",
    "access": "private",
    "description": null,
    "lineNumber": 318,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 679,
    "kind": "method",
    "name": "onZoomEnd",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#onZoomEnd",
    "access": "private",
    "description": null,
    "lineNumber": 325,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 680,
    "kind": "method",
    "name": "select",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#select",
    "access": "private",
    "description": null,
    "lineNumber": 334,
    "undocument": true,
    "params": [
      {
        "name": "feature",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 682,
    "kind": "method",
    "name": "setMapInternal",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#setMapInternal",
    "access": "private",
    "description": null,
    "lineNumber": 342,
    "undocument": true,
    "params": [
      {
        "name": "map",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 683,
    "kind": "method",
    "name": "shouldRender",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#shouldRender",
    "access": "private",
    "description": null,
    "lineNumber": 352,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 684,
    "kind": "method",
    "name": "start",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#start",
    "access": "public",
    "description": "Start the rendering.",
    "lineNumber": 364,
    "params": [],
    "return": null
  },
  {
    "__docId__": 685,
    "kind": "method",
    "name": "stop",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#stop",
    "access": "public",
    "description": "Stop the rendering.",
    "lineNumber": 372,
    "params": [],
    "return": null
  },
  {
    "__docId__": 686,
    "kind": "file",
    "name": "build/ol/layers/VectorLayer.js",
    "content": "import Layer from './Layer';\n/**\n * @deprecated\n */\nclass VectorLayer extends Layer {\n    /**\n     * @deprecated\n     */\n    clone(newOptions) {\n        return new VectorLayer(Object.assign(Object.assign({}, this.get('options')), newOptions));\n    }\n    /**\n     * @deprecated\n     */\n    getFeatureInfoAtCoordinate(coordinate) {\n        let features = [];\n        const mapInternal = this.getMapInternal();\n        if (mapInternal) {\n            const pixel = mapInternal.getPixelFromCoordinate(coordinate);\n            features =\n                mapInternal.getFeaturesAtPixel(pixel, {\n                    hitTolerance: this.get('hitTolerance') || 5,\n                    layerFilter: (l) => l === this,\n                }) || [];\n        }\n        return Promise.resolve({\n            coordinate,\n            features,\n            layer: this,\n        });\n    }\n}\nexport default VectorLayer;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/layers/VectorLayer.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 687,
    "kind": "class",
    "name": "VectorLayer",
    "memberof": "build/ol/layers/VectorLayer.js",
    "static": true,
    "longname": "build/ol/layers/VectorLayer.js~VectorLayer",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/ol/layers/VectorLayer.js",
    "importStyle": "VectorLayer",
    "description": "",
    "lineNumber": 5,
    "deprecated": true,
    "interface": false,
    "extends": [
      "build/ol/layers/Layer.js~Layer"
    ]
  },
  {
    "__docId__": 688,
    "kind": "method",
    "name": "clone",
    "memberof": "build/ol/layers/VectorLayer.js~VectorLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/VectorLayer.js~VectorLayer#clone",
    "access": "private",
    "description": "",
    "lineNumber": 9,
    "deprecated": true,
    "params": [
      {
        "name": "newOptions",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 689,
    "kind": "method",
    "name": "getFeatureInfoAtCoordinate",
    "memberof": "build/ol/layers/VectorLayer.js~VectorLayer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/layers/VectorLayer.js~VectorLayer#getFeatureInfoAtCoordinate",
    "access": "private",
    "description": "",
    "lineNumber": 15,
    "deprecated": true,
    "params": [
      {
        "name": "coordinate",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 690,
    "kind": "file",
    "name": "build/ol/layers/index.js",
    "content": "export { default as MaplibreLayer } from './MaplibreLayer';\nexport { default as MaplibreStyleLayer } from './MaplibreStyleLayer';\nexport { default as RealtimeLayer } from './RealtimeLayer';\n// Deprecated export\nexport { default as Layer } from './Layer';\nexport { default as VectorLayer } from './VectorLayer';\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/layers/index.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 691,
    "kind": "file",
    "name": "build/ol/renderers/MaplibreLayerRenderer.js",
    "content": "import { MapLibreLayerRenderer } from '@geoblocks/ol-maplibre-layer/lib';\n// /**\n//  * This class is usea renderer for Maplibre Layer to be able to use the native ol\n//  * functionnalities like map.getFeaturesAtPixel or map.hasFeatureAtPixel.\n//  * @private\n//  */\n// // @ts-expect-error\nexport default class MaplibreLayerRenderer extends MapLibreLayerRenderer {\n    constructor(layer) {\n        super(layer);\n        this.ignoreNextRender = false;\n        this.setIsReady = this.setIsReady.bind(this);\n        this.ignoreNextRender = false;\n    }\n    renderFrame(frameState) {\n        const layer = this.getLayer();\n        const { mapLibreMap } = layer;\n        const map = layer.getMapInternal();\n        if (!layer || !map || !mapLibreMap) {\n            // @ts-expect-error - can return null\n            return null;\n        }\n        if (this.ready && this.ignoreNextRender) {\n            this.ignoreNextRender = false;\n            return mapLibreMap === null || mapLibreMap === void 0 ? void 0 : mapLibreMap.getContainer();\n        }\n        this.ready = false;\n        this.ignoreNextRender = false;\n        this.updateReadyState();\n        const container = super.renderFrame(frameState);\n        // Mark the renderer as ready when the map is idle\n        mapLibreMap === null || mapLibreMap === void 0 ? void 0 : mapLibreMap.once('idle', this.setIsReady);\n        return container;\n    }\n    setIsReady() {\n        if (!this.ready) {\n            this.ready = true;\n            this.ignoreNextRender = true;\n            this.getLayer().changed();\n        }\n    }\n    updateReadyState() {\n        var _a, _b, _c, _d;\n        (_b = (_a = this.getLayer()) === null || _a === void 0 ? void 0 : _a.mapLibreMap) === null || _b === void 0 ? void 0 : _b.off('idle', this.setIsReady);\n        (_d = (_c = this.getLayer()) === null || _c === void 0 ? void 0 : _c.mapLibreMap) === null || _d === void 0 ? void 0 : _d.once('idle', this.setIsReady);\n    }\n}\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/renderers/MaplibreLayerRenderer.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 692,
    "kind": "class",
    "name": "MaplibreLayerRenderer",
    "memberof": "build/ol/renderers/MaplibreLayerRenderer.js",
    "static": true,
    "longname": "build/ol/renderers/MaplibreLayerRenderer.js~MaplibreLayerRenderer",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/ol/renderers/MaplibreLayerRenderer.js",
    "importStyle": "MaplibreLayerRenderer",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "interface": false,
    "extends": [
      "@geoblocks/ol-maplibre-layer/lib~MapLibreLayerRenderer"
    ]
  },
  {
    "__docId__": 693,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "build/ol/renderers/MaplibreLayerRenderer.js~MaplibreLayerRenderer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/renderers/MaplibreLayerRenderer.js~MaplibreLayerRenderer#constructor",
    "access": "private",
    "description": null,
    "lineNumber": 9,
    "undocument": true
  },
  {
    "__docId__": 694,
    "kind": "member",
    "name": "ignoreNextRender",
    "memberof": "build/ol/renderers/MaplibreLayerRenderer.js~MaplibreLayerRenderer",
    "static": false,
    "longname": "build/ol/renderers/MaplibreLayerRenderer.js~MaplibreLayerRenderer#ignoreNextRender",
    "access": "private",
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 697,
    "kind": "method",
    "name": "renderFrame",
    "memberof": "build/ol/renderers/MaplibreLayerRenderer.js~MaplibreLayerRenderer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/renderers/MaplibreLayerRenderer.js~MaplibreLayerRenderer#renderFrame",
    "access": "private",
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "params": [
      {
        "name": "frameState",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 699,
    "kind": "member",
    "name": "ready",
    "memberof": "build/ol/renderers/MaplibreLayerRenderer.js~MaplibreLayerRenderer",
    "static": false,
    "longname": "build/ol/renderers/MaplibreLayerRenderer.js~MaplibreLayerRenderer#ready",
    "access": "private",
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 701,
    "kind": "method",
    "name": "setIsReady",
    "memberof": "build/ol/renderers/MaplibreLayerRenderer.js~MaplibreLayerRenderer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/renderers/MaplibreLayerRenderer.js~MaplibreLayerRenderer#setIsReady",
    "access": "private",
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 704,
    "kind": "method",
    "name": "updateReadyState",
    "memberof": "build/ol/renderers/MaplibreLayerRenderer.js~MaplibreLayerRenderer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/renderers/MaplibreLayerRenderer.js~MaplibreLayerRenderer#updateReadyState",
    "access": "private",
    "description": null,
    "lineNumber": 42,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 705,
    "kind": "file",
    "name": "build/ol/renderers/MaplibreStyleLayerRenderer.js",
    "content": "import GeoJSON from 'ol/format/GeoJSON';\nimport { toLonLat } from 'ol/proj';\nimport LayerRenderer from 'ol/renderer/Layer';\nimport { VECTOR_TILE_FEATURE_PROPERTY } from '../../common';\n/**\n * @private\n */\nconst formats = {\n    'EPSG:3857': new GeoJSON({\n        featureProjection: 'EPSG:3857',\n    }),\n};\n/**\n * This class is a renderer for Maplibre Layer to be able to use the native ol\n * functionnalities like map.getFeaturesAtPixel or map.hasFeatureAtPixel.\n * @private\n */\nexport default class MaplibreStyleLayerRenderer extends LayerRenderer {\n    forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback) {\n        const features = this.getFeaturesAtCoordinate(coordinate, hitTolerance);\n        features.forEach((feature) => {\n            // @ts-expect-error improve ts types\n            callback(feature, this.layer_, feature.getGeometry());\n        });\n        return features === null || features === void 0 ? void 0 : features[0];\n    }\n    getFeatures(pixel) {\n        var _a, _b;\n        const coordinate = (_b = (_a = this.getLayer()) === null || _a === void 0 ? void 0 : _a.getMapInternal()) === null || _b === void 0 ? void 0 : _b.getCoordinateFromPixel(pixel);\n        return Promise.resolve(this.getFeaturesAtCoordinate(coordinate));\n    }\n    getFeaturesAtCoordinate(coordinate, hitTolerance = 5) {\n        var _a, _b;\n        if (!coordinate) {\n            return [];\n        }\n        const layer = this.getLayer();\n        const map = layer.getMapInternal();\n        const mapLibreMap = layer.maplibreLayer.mapLibreMap;\n        const projection = ((_b = (_a = map === null || map === void 0 ? void 0 : map.getView()) === null || _a === void 0 ? void 0 : _a.getProjection()) === null || _b === void 0 ? void 0 : _b.getCode()) || 'EPSG:3857';\n        let features = [];\n        if (!formats[projection]) {\n            formats[projection] = new GeoJSON({\n                featureProjection: projection,\n            });\n        }\n        if (mapLibreMap === null || mapLibreMap === void 0 ? void 0 : mapLibreMap.isStyleLoaded()) {\n            const pixel = coordinate &&\n                mapLibreMap.project(toLonLat(coordinate));\n            if ((pixel === null || pixel === void 0 ? void 0 : pixel.x) && (pixel === null || pixel === void 0 ? void 0 : pixel.y)) {\n                let pixels = [\n                    pixel.x,\n                    pixel.y,\n                ];\n                if (hitTolerance) {\n                    const [x, y] = pixels;\n                    pixels = [\n                        [x - hitTolerance, y - hitTolerance],\n                        [x + hitTolerance, y + hitTolerance],\n                    ];\n                }\n                // We query features only on style layers used by this layer.\n                let layers = layer.layers || [];\n                if (layer.layersFilter) {\n                    layers = mapLibreMap.getStyle().layers.filter(layer.layersFilter);\n                }\n                if (layer.queryRenderedLayersFilter) {\n                    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                    layers = mapLibreMap\n                        .getStyle()\n                        .layers.filter(layer.queryRenderedLayersFilter);\n                }\n                // At this point we get GeoJSON Maplibre feature, we transform it to an OpenLayers\n                // feature to be consistent with other layers.\n                features = mapLibreMap\n                    .queryRenderedFeatures(pixels, {\n                    layers: layers.map((l) => l.id),\n                    validate: false,\n                    // ...layer.queryRenderedFeaturesOptions,\n                })\n                    .map((feature) => {\n                    const olFeature = formats[projection].readFeature(feature);\n                    if (olFeature) {\n                        // We save the original Maplibre feature to avoid losing informations\n                        // potentially needed for other functionnality like highlighting\n                        // (id, layer id, source, sourceLayer ...)\n                        olFeature.set(VECTOR_TILE_FEATURE_PROPERTY, feature);\n                    }\n                    return olFeature;\n                });\n            }\n        }\n        return features;\n    }\n    // eslint-disable-next-line class-methods-use-this\n    prepareFrame() {\n        return true;\n    }\n    // eslint-disable-next-line class-methods-use-this\n    renderFrame() {\n        return null;\n    }\n}\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/renderers/MaplibreStyleLayerRenderer.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 706,
    "kind": "variable",
    "name": "formats",
    "memberof": "build/ol/renderers/MaplibreStyleLayerRenderer.js",
    "static": true,
    "longname": "build/ol/renderers/MaplibreStyleLayerRenderer.js~formats",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/renderers/MaplibreStyleLayerRenderer.js",
    "importStyle": null,
    "description": "",
    "lineNumber": 8,
    "type": {
      "types": [
        "{\"EPSG:3857\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 707,
    "kind": "class",
    "name": "MaplibreStyleLayerRenderer",
    "memberof": "build/ol/renderers/MaplibreStyleLayerRenderer.js",
    "static": true,
    "longname": "build/ol/renderers/MaplibreStyleLayerRenderer.js~MaplibreStyleLayerRenderer",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/ol/renderers/MaplibreStyleLayerRenderer.js",
    "importStyle": "MaplibreStyleLayerRenderer",
    "description": "This class is a renderer for Maplibre Layer to be able to use the native ol\nfunctionnalities like map.getFeaturesAtPixel or map.hasFeatureAtPixel.",
    "lineNumber": 18,
    "interface": false,
    "extends": [
      "ol/renderer/Layer~LayerRenderer"
    ]
  },
  {
    "__docId__": 708,
    "kind": "method",
    "name": "forEachFeatureAtCoordinate",
    "memberof": "build/ol/renderers/MaplibreStyleLayerRenderer.js~MaplibreStyleLayerRenderer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/renderers/MaplibreStyleLayerRenderer.js~MaplibreStyleLayerRenderer#forEachFeatureAtCoordinate",
    "access": "private",
    "description": null,
    "lineNumber": 19,
    "undocument": true,
    "params": [
      {
        "name": "coordinate",
        "types": [
          "*"
        ]
      },
      {
        "name": "frameState",
        "types": [
          "*"
        ]
      },
      {
        "name": "hitTolerance",
        "types": [
          "*"
        ]
      },
      {
        "name": "callback",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 709,
    "kind": "method",
    "name": "getFeatures",
    "memberof": "build/ol/renderers/MaplibreStyleLayerRenderer.js~MaplibreStyleLayerRenderer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/renderers/MaplibreStyleLayerRenderer.js~MaplibreStyleLayerRenderer#getFeatures",
    "access": "private",
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "params": [
      {
        "name": "pixel",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 710,
    "kind": "method",
    "name": "getFeaturesAtCoordinate",
    "memberof": "build/ol/renderers/MaplibreStyleLayerRenderer.js~MaplibreStyleLayerRenderer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/renderers/MaplibreStyleLayerRenderer.js~MaplibreStyleLayerRenderer#getFeaturesAtCoordinate",
    "access": "private",
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "params": [
      {
        "name": "coordinate",
        "types": [
          "*"
        ]
      },
      {
        "name": "hitTolerance",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 5,
        "defaultValue": "5"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 711,
    "kind": "method",
    "name": "prepareFrame",
    "memberof": "build/ol/renderers/MaplibreStyleLayerRenderer.js~MaplibreStyleLayerRenderer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/renderers/MaplibreStyleLayerRenderer.js~MaplibreStyleLayerRenderer#prepareFrame",
    "access": "private",
    "description": null,
    "lineNumber": 96,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 712,
    "kind": "method",
    "name": "renderFrame",
    "memberof": "build/ol/renderers/MaplibreStyleLayerRenderer.js~MaplibreStyleLayerRenderer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/renderers/MaplibreStyleLayerRenderer.js~MaplibreStyleLayerRenderer#renderFrame",
    "access": "private",
    "description": null,
    "lineNumber": 100,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 713,
    "kind": "file",
    "name": "build/ol/renderers/RealtimeLayerRenderer.js",
    "content": "import GeoJSON from 'ol/format/GeoJSON';\nimport CanvasLayerRenderer from 'ol/renderer/canvas/Layer';\nimport { composeCssTransform } from 'ol/transform';\nconst format = new GeoJSON();\n/**\n * This class is a renderer for Maplibre Layer to be able to use the native ol\n * functionnalities like map.getFeaturesAtPixel or map.hasFeatureAtPixel.\n * @private\n */\nexport default class RealtimeLayerRenderer extends CanvasLayerRenderer {\n    forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback) {\n        const features = this.getFeaturesAtCoordinate(coordinate, hitTolerance);\n        features.forEach((feature) => {\n            // @ts-expect-error defintion to fix\n            callback(feature, this.layer_, feature.getGeometry());\n        });\n        return features === null || features === void 0 ? void 0 : features[0];\n    }\n    getData(pixel) {\n        var _a;\n        let data;\n        try {\n            const { pixelRatio } = this.getLayer();\n            const context = (_a = this.canvas) === null || _a === void 0 ? void 0 : _a.getContext('2d', {\n                willReadFrequently: true,\n            });\n            data =\n                (context === null || context === void 0 ? void 0 : context.getImageData(pixel[0] * (pixelRatio || 1), pixel[1] * (pixelRatio || 1), 1, 1).data) || null; // [3];\n            return data;\n        }\n        catch (err) {\n            // eslint-disable-next-line no-console\n            console.error('error getting data', err);\n        }\n        return null;\n    }\n    getFeatures(pixel) {\n        var _a, _b;\n        const coordinate = (_b = (_a = this.getLayer()) === null || _a === void 0 ? void 0 : _a.getMapInternal()) === null || _b === void 0 ? void 0 : _b.getCoordinateFromPixel(pixel);\n        return Promise.resolve(this.getFeaturesAtCoordinate(coordinate));\n    }\n    getFeaturesAtCoordinate(coordinate, hitTolerance = 5) {\n        if (!coordinate) {\n            return [];\n        }\n        const layer = this.getLayer();\n        const featureCollection = layer.engine.getVehiclesAtCoordinate(coordinate, {\n            hitTolerance,\n            nb: layer.maxNbFeaturesRequested,\n        });\n        return format.readFeatures(featureCollection);\n    }\n    // eslint-disable-next-line class-methods-use-this\n    prepareFrame() {\n        return true;\n    }\n    renderFrame(frameState) {\n        var _a;\n        const { canvas, engine, renderedViewState } = this.getLayer();\n        this.getLayer().engine.pixelRatio = frameState.pixelRatio;\n        this.ready = !!((_a = engine.renderState) === null || _a === void 0 ? void 0 : _a.renderedTrajectories) && engine.isIdle;\n        if (!this.container) {\n            this.container = document.createElement('div');\n            this.container.className = this.getLayer().getClassName();\n            this.container.style.position = 'absolute';\n            this.container.style.width = '100%';\n            this.container.style.height = '100%';\n            if (canvas instanceof HTMLCanvasElement) {\n                canvas.style.position = 'absolute';\n                canvas.style.top = '0';\n                canvas.style.left = '0';\n                canvas.style.transformOrigin = 'top left';\n                this.container.appendChild(canvas);\n            }\n        }\n        if (renderedViewState) {\n            const { center, resolution, rotation } = frameState.viewState;\n            const { center: renderedCenter, resolution: renderedResolution, rotation: renderedRotation, } = renderedViewState;\n            if (renderedResolution / resolution >= 3) {\n                // Avoid having really big points when zooming fast.\n                const context = canvas === null || canvas === void 0 ? void 0 : canvas.getContext('2d');\n                if ((canvas === null || canvas === void 0 ? void 0 : canvas.width) && (canvas === null || canvas === void 0 ? void 0 : canvas.height)) {\n                    context === null || context === void 0 ? void 0 : context.clearRect(0, 0, canvas.width, canvas.height);\n                }\n            }\n            else {\n                const map = this.getLayer().getMapInternal();\n                const pixelCenterRendered = map === null || map === void 0 ? void 0 : map.getPixelFromCoordinate(renderedCenter);\n                const pixelCenter = map === null || map === void 0 ? void 0 : map.getPixelFromCoordinate(center);\n                if (pixelCenterRendered && pixelCenter) {\n                    this.container.style.transform = composeCssTransform(pixelCenterRendered[0] - pixelCenter[0], pixelCenterRendered[1] - pixelCenter[1], renderedResolution / resolution, renderedResolution / resolution, rotation - renderedRotation, 0, 0);\n                }\n            }\n        }\n        return this.container;\n    }\n}\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/renderers/RealtimeLayerRenderer.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 714,
    "kind": "variable",
    "name": "format",
    "memberof": "build/ol/renderers/RealtimeLayerRenderer.js",
    "static": true,
    "longname": "build/ol/renderers/RealtimeLayerRenderer.js~format",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/renderers/RealtimeLayerRenderer.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 715,
    "kind": "class",
    "name": "RealtimeLayerRenderer",
    "memberof": "build/ol/renderers/RealtimeLayerRenderer.js",
    "static": true,
    "longname": "build/ol/renderers/RealtimeLayerRenderer.js~RealtimeLayerRenderer",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/ol/renderers/RealtimeLayerRenderer.js",
    "importStyle": "RealtimeLayerRenderer",
    "description": "This class is a renderer for Maplibre Layer to be able to use the native ol\nfunctionnalities like map.getFeaturesAtPixel or map.hasFeatureAtPixel.",
    "lineNumber": 10,
    "interface": false,
    "extends": [
      "ol/renderer/canvas/Layer~CanvasLayerRenderer"
    ]
  },
  {
    "__docId__": 716,
    "kind": "method",
    "name": "forEachFeatureAtCoordinate",
    "memberof": "build/ol/renderers/RealtimeLayerRenderer.js~RealtimeLayerRenderer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/renderers/RealtimeLayerRenderer.js~RealtimeLayerRenderer#forEachFeatureAtCoordinate",
    "access": "private",
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "params": [
      {
        "name": "coordinate",
        "types": [
          "*"
        ]
      },
      {
        "name": "frameState",
        "types": [
          "*"
        ]
      },
      {
        "name": "hitTolerance",
        "types": [
          "*"
        ]
      },
      {
        "name": "callback",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 717,
    "kind": "method",
    "name": "getData",
    "memberof": "build/ol/renderers/RealtimeLayerRenderer.js~RealtimeLayerRenderer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/renderers/RealtimeLayerRenderer.js~RealtimeLayerRenderer#getData",
    "access": "private",
    "description": null,
    "lineNumber": 19,
    "undocument": true,
    "params": [
      {
        "name": "pixel",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 718,
    "kind": "method",
    "name": "getFeatures",
    "memberof": "build/ol/renderers/RealtimeLayerRenderer.js~RealtimeLayerRenderer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/renderers/RealtimeLayerRenderer.js~RealtimeLayerRenderer#getFeatures",
    "access": "private",
    "description": null,
    "lineNumber": 37,
    "undocument": true,
    "params": [
      {
        "name": "pixel",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 719,
    "kind": "method",
    "name": "getFeaturesAtCoordinate",
    "memberof": "build/ol/renderers/RealtimeLayerRenderer.js~RealtimeLayerRenderer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/renderers/RealtimeLayerRenderer.js~RealtimeLayerRenderer#getFeaturesAtCoordinate",
    "access": "private",
    "description": null,
    "lineNumber": 42,
    "undocument": true,
    "params": [
      {
        "name": "coordinate",
        "types": [
          "*"
        ]
      },
      {
        "name": "hitTolerance",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 5,
        "defaultValue": "5"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 720,
    "kind": "method",
    "name": "prepareFrame",
    "memberof": "build/ol/renderers/RealtimeLayerRenderer.js~RealtimeLayerRenderer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/renderers/RealtimeLayerRenderer.js~RealtimeLayerRenderer#prepareFrame",
    "access": "private",
    "description": null,
    "lineNumber": 54,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 721,
    "kind": "method",
    "name": "renderFrame",
    "memberof": "build/ol/renderers/RealtimeLayerRenderer.js~RealtimeLayerRenderer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "build/ol/renderers/RealtimeLayerRenderer.js~RealtimeLayerRenderer#renderFrame",
    "access": "private",
    "description": null,
    "lineNumber": 57,
    "undocument": true,
    "params": [
      {
        "name": "frameState",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 722,
    "kind": "member",
    "name": "ready",
    "memberof": "build/ol/renderers/RealtimeLayerRenderer.js~RealtimeLayerRenderer",
    "static": false,
    "longname": "build/ol/renderers/RealtimeLayerRenderer.js~RealtimeLayerRenderer#ready",
    "access": "private",
    "description": null,
    "lineNumber": 61,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 723,
    "kind": "member",
    "name": "container",
    "memberof": "build/ol/renderers/RealtimeLayerRenderer.js~RealtimeLayerRenderer",
    "static": false,
    "longname": "build/ol/renderers/RealtimeLayerRenderer.js~RealtimeLayerRenderer#container",
    "access": "private",
    "description": null,
    "lineNumber": 63,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 724,
    "kind": "file",
    "name": "build/ol/styles/fullTrajectoryDelayStyle.js",
    "content": "import { Circle, Fill, Stroke, Style } from 'ol/style';\nconst stroke = new Style({\n    image: new Circle({\n        fill: new Fill({\n            color: '#000000',\n        }),\n        radius: 5,\n    }),\n    stroke: new Stroke({\n        color: '#000000',\n        width: 6,\n    }),\n    zIndex: 2,\n});\nconst fill = new Style({\n    image: new Circle({\n        fill: new Fill({\n            color: '#a0a0a0',\n        }),\n        radius: 4,\n    }),\n    stroke: new Stroke({\n        color: '#a0a0a0',\n        width: 4,\n    }),\n    zIndex: 3,\n});\n/**\n * @private\n */\nconst fullTrajectoryDelaystyle = () => {\n    return [stroke, fill];\n};\nexport default fullTrajectoryDelaystyle;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/styles/fullTrajectoryDelayStyle.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 725,
    "kind": "variable",
    "name": "stroke",
    "memberof": "build/ol/styles/fullTrajectoryDelayStyle.js",
    "static": true,
    "longname": "build/ol/styles/fullTrajectoryDelayStyle.js~stroke",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/styles/fullTrajectoryDelayStyle.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 2,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 726,
    "kind": "variable",
    "name": "fill",
    "memberof": "build/ol/styles/fullTrajectoryDelayStyle.js",
    "static": true,
    "longname": "build/ol/styles/fullTrajectoryDelayStyle.js~fill",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/styles/fullTrajectoryDelayStyle.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 727,
    "kind": "function",
    "name": "fullTrajectoryDelaystyle",
    "memberof": "build/ol/styles/fullTrajectoryDelayStyle.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/ol/styles/fullTrajectoryDelayStyle.js~fullTrajectoryDelaystyle",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/ol/styles/fullTrajectoryDelayStyle.js",
    "importStyle": "fullTrajectoryDelaystyle",
    "description": "",
    "lineNumber": 31,
    "params": [],
    "return": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 728,
    "kind": "file",
    "name": "build/ol/styles/fullTrajectoryStyle.js",
    "content": "import { Circle, Fill, Stroke, Style } from 'ol/style';\nconst borderStyle = new Style({\n    image: new Circle({\n        fill: new Fill({\n            color: '#000000',\n        }),\n        radius: 5,\n    }),\n    stroke: new Stroke({\n        color: '#000000',\n        width: 6,\n    }),\n    zIndex: 2,\n});\nconst fullTrajectorystyle = (feature, resolution, options) => {\n    let lineColor = '#ffffff'; // white\n    const type = feature.get('type');\n    let stroke = feature.get('stroke');\n    if (stroke && stroke[0] !== '#') {\n        stroke = `#${stroke}`;\n    }\n    lineColor = stroke || (options === null || options === void 0 ? void 0 : options.getBgColor(type));\n    // Don't allow white lines, use red instead.\n    lineColor = /#ffffff/i.test(lineColor) ? '#ff0000' : lineColor;\n    const style = [\n        borderStyle,\n        new Style({\n            image: new Circle({\n                fill: new Fill({\n                    color: lineColor,\n                }),\n                radius: 4,\n            }),\n            stroke: new Stroke({\n                color: lineColor,\n                width: 4,\n            }),\n            zIndex: 3,\n        }),\n    ];\n    return style;\n};\nexport default fullTrajectorystyle;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/styles/fullTrajectoryStyle.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 729,
    "kind": "variable",
    "name": "borderStyle",
    "memberof": "build/ol/styles/fullTrajectoryStyle.js",
    "static": true,
    "longname": "build/ol/styles/fullTrajectoryStyle.js~borderStyle",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/styles/fullTrajectoryStyle.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 2,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 730,
    "kind": "function",
    "name": "fullTrajectorystyle",
    "memberof": "build/ol/styles/fullTrajectoryStyle.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/ol/styles/fullTrajectoryStyle.js~fullTrajectorystyle",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/ol/styles/fullTrajectoryStyle.js",
    "importStyle": "fullTrajectorystyle",
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "params": [
      {
        "name": "feature",
        "types": [
          "*"
        ]
      },
      {
        "name": "resolution",
        "types": [
          "*"
        ]
      },
      {
        "name": "options",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 731,
    "kind": "file",
    "name": "build/ol/styles/index.js",
    "content": "export { default as fullTrajectoryStyle } from './fullTrajectoryStyle';\nexport { default as fullTrajectoryDelayStyle } from './fullTrajectoryDelayStyle';\nexport { default as routingStyle } from './routingStyle';\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/styles/index.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 732,
    "kind": "file",
    "name": "build/ol/styles/routingStyle.js",
    "content": "import { Circle, Fill, Stroke } from 'ol/style';\nimport Style from 'ol/style/Style';\nconst circleStyle = new Circle({\n    fill: new Fill({\n        color: [255, 0, 0, 1],\n    }),\n    radius: 6,\n    stroke: new Stroke({\n        color: [0, 0, 0, 1],\n        width: 1,\n    }),\n});\nconst blackBorder = new Style({\n    stroke: new Stroke({\n        color: [0, 0, 0, 1],\n        width: 5,\n    }),\n});\nconst redLine = new Style({\n    image: circleStyle,\n    stroke: new Stroke({\n        color: [255, 0, 0, 1],\n        width: 3,\n    }),\n});\nconst dashedRedLine = new Style({\n    image: circleStyle,\n    stroke: new Stroke({\n        color: [255, 0, 0, 1],\n        lineDash: [1, 10],\n        width: 3,\n    }),\n});\nconst routingStyle = (feature, resolution) => {\n    var _a;\n    const minResolution = feature.get('minResolution');\n    const maxResolution = feature.get('maxResolution');\n    const inRange = resolution <= minResolution && resolution > maxResolution;\n    if (minResolution && maxResolution && !inRange) {\n        return [];\n    }\n    const zIndex = ((_a = feature === null || feature === void 0 ? void 0 : feature.getGeometry()) === null || _a === void 0 ? void 0 : _a.getType()) === 'Point' ? 100 : 0;\n    let styles = [blackBorder, redLine];\n    const mot = feature.get('mot');\n    if (mot === 'foot') {\n        styles = [dashedRedLine];\n    }\n    styles = styles.map((style) => {\n        const tmp = style.clone();\n        tmp.setZIndex(zIndex);\n        return tmp;\n    });\n    return styles;\n};\nexport default routingStyle;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/styles/routingStyle.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 733,
    "kind": "variable",
    "name": "circleStyle",
    "memberof": "build/ol/styles/routingStyle.js",
    "static": true,
    "longname": "build/ol/styles/routingStyle.js~circleStyle",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/styles/routingStyle.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 734,
    "kind": "variable",
    "name": "blackBorder",
    "memberof": "build/ol/styles/routingStyle.js",
    "static": true,
    "longname": "build/ol/styles/routingStyle.js~blackBorder",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/styles/routingStyle.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 735,
    "kind": "variable",
    "name": "redLine",
    "memberof": "build/ol/styles/routingStyle.js",
    "static": true,
    "longname": "build/ol/styles/routingStyle.js~redLine",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/styles/routingStyle.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 19,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 736,
    "kind": "variable",
    "name": "dashedRedLine",
    "memberof": "build/ol/styles/routingStyle.js",
    "static": true,
    "longname": "build/ol/styles/routingStyle.js~dashedRedLine",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/styles/routingStyle.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 26,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 737,
    "kind": "function",
    "name": "routingStyle",
    "memberof": "build/ol/styles/routingStyle.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/ol/styles/routingStyle.js~routingStyle",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/ol/styles/routingStyle.js",
    "importStyle": "routingStyle",
    "description": null,
    "lineNumber": 34,
    "undocument": true,
    "params": [
      {
        "name": "feature",
        "types": [
          "*"
        ]
      },
      {
        "name": "resolution",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 738,
    "kind": "file",
    "name": "build/ol/utils/defineDeprecatedProperties.js",
    "content": "import debounce from 'lodash.debounce';\nlet deprecated = () => {};\nif (\n  typeof window !== 'undefined' &&\n  new URLSearchParams(window.location.search).get('deprecated')\n) {\n  deprecated = debounce((message) => {\n    // eslint-disable-next-line no-console\n    console.warn(message);\n  }, 1000);\n}\nconst onChildrenChange = (layer, oldValue) => {\n  // Set the parent property\n  (oldValue || []).forEach((child) => {\n    child.set('parent', undefined);\n  });\n  (layer.get('children') || []).forEach((child) => {\n    child.set('parent', this);\n  });\n};\n/**\n * obj function defines properties taht were used in mbt v2.\n * They are all marked als deprecated.\n * @param obj\n * @param options\n * @returns\n */\nconst defineDeprecatedProperties = (obj, options) => {\n  if (options.properties) {\n    deprecated(\n      \"Deprecated. Don't use properties options. Pass the values directly in options object.\",\n    );\n    obj.setProperties(options.properties);\n  }\n  // Update parent property\n  obj.on('propertychange', (evt) => {\n    if (evt.key === 'children') {\n      onChildrenChange(evt.target, evt.oldValue);\n    }\n    if (evt.key === 'map') {\n      const map = evt.target.get(evt.key);\n      if (map) {\n        (evt.target.get('children') || []).forEach((child) => {\n          map.addLayer(child);\n        });\n      } else if (evt.oldValue) {\n        (evt.target.get('children') || []).forEach((child) => {\n          evt.oldValue.removeLayer(child);\n        });\n      }\n    }\n  });\n  // Save options for cloning\n  obj.set('options', options);\n  obj.set('children', options.children || []); // Trigger the on children change event\n  Object.defineProperties(obj, {\n    children: {\n      /** @deprecated */\n      get: () => {\n        deprecated(\n          \"Layer.children is deprecated. Use the Layer.get('children') method instead.\",\n        );\n        return obj.get('children') || [];\n      },\n      /** @deprecated */\n      set: (newValue) => {\n        deprecated(\n          \"Layer.children is deprecated. Use the Layer.set('children', children) method instead.\",\n        );\n        obj.set('children', newValue || []);\n      },\n    },\n    copyrights: {\n      /** @deprecated */\n      get: () => {\n        deprecated(\n          'Layer.copyrights is deprecated. Get the attributions from the source object',\n        );\n        return obj.get('copyrights');\n      },\n      /** @deprecated */\n      set: (newCopyrights) => {\n        deprecated(\n          'Layer.copyrights is deprecated. Set the attributions to the source object.',\n        );\n        const arrValue =\n          newCopyrights && !Array.isArray(newCopyrights)\n            ? [newCopyrights]\n            : newCopyrights;\n        obj.set('copyrights', arrValue || []);\n      },\n    },\n    disabled: {\n      /** @deprecated */\n      get() {\n        deprecated(\n          \"Layer.disabled is deprecated. Use the Layer.get('disabled') method instead.\",\n        );\n        return obj.get('disabled');\n      },\n      /** @deprecated */\n      set(newValue) {\n        deprecated(\n          \"Layer.disabled is deprecated. Use the Layer.set('disabled', newValue) method instead.\",\n        );\n        obj.set('disabled', newValue);\n      },\n    },\n    group: {\n      /** @deprecated */\n      get() {\n        deprecated(\n          \"Layer.group is deprecated. Use the Layer.get('group') method instead.\",\n        );\n        return obj.get('group');\n      },\n    },\n    hitTolerance: {\n      /** @deprecated */\n      get() {\n        deprecated(\n          'Layer.hitTolerance is deprecated. Pass the hitTolerance when you request the features.',\n        );\n        return obj.get('hitTolerance') || 5;\n      },\n      /** @deprecated */\n      set(newValue) {\n        deprecated(\n          'Layer.hitTolerance is deprecated. Pass the hitTolerance when you request the features.',\n        );\n        obj.set('hitTolerance', newValue);\n      },\n    },\n    key: {\n      /** @deprecated */\n      get() {\n        deprecated(\n          'Layer.key is deprecated. Use the Layer.get(\"key\") method instead.',\n        );\n        return obj.get('key') || obj.get('name');\n      },\n    },\n    map: {\n      /** @deprecated */\n      get() {\n        deprecated(\n          'Layer.map is deprecated. Use the Layer.get(\"map\") method instead.',\n        );\n        return obj.getMapInternal();\n      },\n    },\n    name: {\n      /** @deprecated */\n      get() {\n        deprecated(\n          \"Layer.name is deprecated. Use the Layer.get('name') method instead.\",\n        );\n        return obj.get('name');\n      },\n    },\n    olLayer: {\n      /** @deprecated */\n      get() {\n        deprecated(\n          \"Layer.olLayer is deprecated. mobility-toolbox-js/ol layers inherits now from ol/layer/Layer class. obj getter is only a redirect to the current 'this' object.\",\n        );\n        return obj;\n      },\n      /** @deprecated */\n      set() {\n        deprecated(\n          'Layer.olLayer is deprecated. mobility-toolbox-js/ol layers inherits now from ol/layer/Layer class. obj setter has no effect.',\n        );\n      },\n    },\n    options: {\n      /** @deprecated */\n      get() {\n        deprecated(\n          'Layer.options is deprecated. Use the Layer.get(\"options\") method instead.',\n        );\n        return obj.get('options');\n      },\n      set(newValue) {\n        deprecated(\n          'Layer.options is deprecated.  Use the Layer.set(\"options\", newValue) method instead.',\n        );\n        return obj.set('options', newValue);\n      },\n    },\n    parent: {\n      /** @deprecated */\n      get() {\n        deprecated(\n          \"Layer.parent is deprecated. Use the Layer.get('parent') method instead.\",\n        );\n        return obj.get('parent');\n      },\n      /** @deprecated */\n      set(newValue) {\n        deprecated(\n          \"Layer.parent is deprecated. Use the Layer.set('parent', parent) method instead.\",\n        );\n        obj.set('parent', newValue);\n      },\n    },\n    visible: {\n      /** @deprecated */\n      get() {\n        deprecated(\n          'Layer.visible is deprecated. Use the Layer.getVisible() method instead.',\n        );\n        return obj.getVisible();\n      },\n      /** @deprecated */\n      set(newValue) {\n        deprecated(\n          'Layer.visible is deprecated. Use the Layer.setVisible(newValue) method instead.',\n        );\n        obj.setVisible(newValue);\n      },\n    },\n  });\n};\nexport default defineDeprecatedProperties;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/utils/defineDeprecatedProperties.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 739,
    "kind": "function",
    "name": "deprecated",
    "memberof": "build/ol/utils/defineDeprecatedProperties.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/ol/utils/defineDeprecatedProperties.js~deprecated",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/utils/defineDeprecatedProperties.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 2,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 740,
    "kind": "function",
    "name": "onChildrenChange",
    "memberof": "build/ol/utils/defineDeprecatedProperties.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/ol/utils/defineDeprecatedProperties.js~onChildrenChange",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/utils/defineDeprecatedProperties.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "params": [
      {
        "name": "layer",
        "types": [
          "*"
        ]
      },
      {
        "name": "oldValue",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 741,
    "kind": "function",
    "name": "defineDeprecatedProperties",
    "memberof": "build/ol/utils/defineDeprecatedProperties.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/ol/utils/defineDeprecatedProperties.js~defineDeprecatedProperties",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/ol/utils/defineDeprecatedProperties.js",
    "importStyle": "defineDeprecatedProperties",
    "description": "obj function defines properties taht were used in mbt v2.\nThey are all marked als deprecated.",
    "lineNumber": 28,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "obj",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 742,
    "kind": "file",
    "name": "build/ol/utils/getFeatureInfoAtCoordinate.js",
    "content": "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { getUid } from 'ol';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport { getLayersAsFlatArray } from '../../common';\n/**\n * @private\n */\nconst format = new GeoJSON();\n/**\n * @private\n */\nconst getFeaturesFromWMS = (source, options, abortController) => {\n    let url;\n    const { coordinate, params, projection, resolution } = options;\n    if (source && resolution && projection) {\n        url = source.getFeatureInfoUrl(coordinate, resolution, projection, Object.assign({ info_format: 'application/json', query_layers: source.getParams().layers }, params));\n    }\n    // @ts-expect-error\n    return fetch(url, { signal: abortController.signal })\n        .then((resp) => resp.json())\n        .then((featureCollection) => format.readFeatures(featureCollection))\n        .catch(() => []);\n};\n/**\n * @private\n */\nlet abortControllers = {};\n/**\n * @private\n */\nconst getFeatureInfoAtCoordinate = (coordinate_1, layers_1, ...args_1) => __awaiter(void 0, [coordinate_1, layers_1, ...args_1], void 0, function* (coordinate, layers, hitTolerance = 5) {\n    // Kill all previous requests\n    Object.values(abortControllers).forEach((abortController) => {\n        abortController === null || abortController === void 0 ? void 0 : abortController.abort();\n    });\n    abortControllers = {};\n    const flatLayers = getLayersAsFlatArray(layers);\n    const promises = flatLayers.map((layer) => {\n        var _a, _b, _c, _d;\n        const map = layer.getMapInternal();\n        const projection = (_b = (_a = map === null || map === void 0 ? void 0 : map.getView()) === null || _a === void 0 ? void 0 : _a.getProjection()) === null || _b === void 0 ? void 0 : _b.getCode();\n        const emptyResponse = { coordinate, features: [], layer };\n        if (!projection) {\n            return Promise.resolve(emptyResponse);\n        }\n        // For backward compatibility\n        if (layer.getFeatureInfoAtCoordinate) {\n            return layer.getFeatureInfoAtCoordinate(coordinate);\n        }\n        // WMS sources\n        // Here we don't use instanceof, to be able to use this function if a layer comes from 2 different ol versions.\n        const source = layer === null || layer === void 0 ? void 0 : layer.getSource();\n        if (source === null || source === void 0 ? void 0 : source.getFeatureInfoUrl) {\n            const id = getUid(layer);\n            // Abort and recreates one controller per layer\n            (_c = abortControllers[id]) === null || _c === void 0 ? void 0 : _c.abort();\n            abortControllers[id] = new AbortController();\n            const resolution = (_d = map === null || map === void 0 ? void 0 : map.getView()) === null || _d === void 0 ? void 0 : _d.getResolution();\n            return getFeaturesFromWMS(source, {\n                coordinate,\n                params: {\n                    info_format: 'application/json',\n                    query_layers: source.getParams().layers,\n                },\n                projection,\n                resolution,\n            }, abortControllers[id])\n                .then((features) => {\n                return {\n                    coordinate,\n                    features,\n                    layer,\n                };\n            })\n                .catch(() => {\n                return {\n                    coordinate,\n                    features: [],\n                    layer,\n                };\n            });\n        }\n        // Other layers\n        // For last resort we try the map function to get the features from the map\n        const pixel = map === null || map === void 0 ? void 0 : map.getPixelFromCoordinate(coordinate);\n        if (!pixel) {\n            return Promise.resolve(emptyResponse);\n        }\n        const features = map === null || map === void 0 ? void 0 : map.getFeaturesAtPixel(pixel, {\n            hitTolerance: layer.get('hitTolerance') || hitTolerance || 5,\n            layerFilter: (l) => l === layer,\n        });\n        return Promise.resolve({\n            coordinate,\n            features,\n            layer,\n        });\n    });\n    return Promise.all(promises);\n});\nexport default getFeatureInfoAtCoordinate;\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/utils/getFeatureInfoAtCoordinate.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 743,
    "kind": "variable",
    "name": "__awaiter",
    "memberof": "build/ol/utils/getFeatureInfoAtCoordinate.js",
    "static": true,
    "longname": "build/ol/utils/getFeatureInfoAtCoordinate.js~__awaiter",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/utils/getFeatureInfoAtCoordinate.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 744,
    "kind": "variable",
    "name": "format",
    "memberof": "build/ol/utils/getFeatureInfoAtCoordinate.js",
    "static": true,
    "longname": "build/ol/utils/getFeatureInfoAtCoordinate.js~format",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/utils/getFeatureInfoAtCoordinate.js",
    "importStyle": null,
    "description": "",
    "lineNumber": 16,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 745,
    "kind": "function",
    "name": "getFeaturesFromWMS",
    "memberof": "build/ol/utils/getFeatureInfoAtCoordinate.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/ol/utils/getFeatureInfoAtCoordinate.js~getFeaturesFromWMS",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/utils/getFeatureInfoAtCoordinate.js",
    "importStyle": null,
    "description": "",
    "lineNumber": 20,
    "params": [
      {
        "name": "source",
        "types": [
          "*"
        ]
      },
      {
        "name": "options",
        "types": [
          "*"
        ]
      },
      {
        "name": "abortController",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 746,
    "kind": "variable",
    "name": "abortControllers",
    "memberof": "build/ol/utils/getFeatureInfoAtCoordinate.js",
    "static": true,
    "longname": "build/ol/utils/getFeatureInfoAtCoordinate.js~abortControllers",
    "access": "private",
    "export": false,
    "importPath": "mobility-toolbox-js/build/ol/utils/getFeatureInfoAtCoordinate.js",
    "importStyle": null,
    "description": "",
    "lineNumber": 35,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 747,
    "kind": "function",
    "name": "getFeatureInfoAtCoordinate",
    "memberof": "build/ol/utils/getFeatureInfoAtCoordinate.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "build/ol/utils/getFeatureInfoAtCoordinate.js~getFeatureInfoAtCoordinate",
    "access": "private",
    "export": true,
    "importPath": "mobility-toolbox-js/build/ol/utils/getFeatureInfoAtCoordinate.js",
    "importStyle": "getFeatureInfoAtCoordinate",
    "description": "",
    "lineNumber": 39,
    "params": [
      {
        "name": "coordinate_1",
        "types": [
          "*"
        ]
      },
      {
        "name": "layers_1",
        "types": [
          "*"
        ]
      },
      {
        "name": "args_1",
        "types": [
          "...*"
        ],
        "spread": true
      }
    ],
    "return": null
  },
  {
    "__docId__": 748,
    "kind": "file",
    "name": "build/ol/utils/index.js",
    "content": "// eslint-disable-next-line import/prefer-default-export\nexport { default as getFeatureInfoAtCoordinate } from './getFeatureInfoAtCoordinate';\n",
    "static": true,
    "longname": "/home/olivier/GIT/mobility-toolbox-js/build/ol/utils/index.js",
    "access": "private",
    "description": null,
    "lineNumber": 1
  },
  {
    "kind": "index",
    "content": "# mobility-toolbox-js\n\nToolbox for JavaScript applications in the domains of mobility and logistics.\nThe tools in this library have been inspired by many projects realized for public transport agencies, mobility providers and logistics companies.\n\n[![npm](https://img.shields.io/npm/v/mobility-toolbox-js.svg?style=flat-square)](https://www.npmjs.com/package/mobility-toolbox-js)\n[![Build](https://github.com/geops/mobility-toolbox-js/workflows/Build/badge.svg)](https://github.com/geops/mobility-toolbox-js/actions?query=workflow%3ABuild)\n[![Lint / Unit tests](https://github.com/geops/mobility-toolbox-js/workflows/Lint%20/%20Unit%20tests/badge.svg)](https://github.com/geops/mobility-toolbox-js/actions?query=workflow%3ALint%20/%20Unit%20tests)\n![Vercel](https://vercelbadge.vercel.app/api/geops/mobility-toolbox-js)\n\n## Documentation and examples\n\nVisit https://mobility-toolbox-js.geops.io/\n\n## Demos\n\n* Display [real-time vehicle positions and prognosis data](https://mobility.portal.geops.io) on a map.\n* Search for [stops and stations](https://maps.trafimage.ch) all over the world.\n* Get [precise geographic courses](https://routing-demo.geops.io/) for all modes of transport.\n* Generate beautiful [schematic](https://mobility.portal.geops.io/world.geops.networkplans) or [topographic](https://mobility.portal.geops.io) maps for public transport, mobility and logistics.\n\n## Install\n\nInstall the library and the peer dependencies:\n\n```bash\nyarn add ol maplibre-gl mobility-toolbox-js\n```\n\n## Development\n\n```bash\nyarn install\nyarn dev\n```\n\n`yarn dev` starts a vite server using the `index.html` file at the root of the project.\nThis html file loads the `dev.js` file. Use this file to develop the library.\nEach time you modifiy the library code you have to run `yarn build:tsc` to see the changes.\n\n## Development documentation\n\nThe documentations website is located in the `doc/`  folder.\nIt's a nextJS website that use the mobility-toolbox-js library built from the `build/` folder.\n\n## Deploy\n\nThis library website is deployed automatically using [Vercel](https://vercel.com/geops).\nFor Vercel we have to add the nextjs and raw-loader modules in the dev dependencies of the main package.json.\nBut those 2 librairies are not needed to build the library.\n",
    "longname": "/home/olivier/GIT/mobility-toolbox-js/README.md",
    "name": "./README.md",
    "static": true,
    "access": "public"
  },
  {
    "kind": "packageJSON",
    "content": "{\n  \"name\": \"mobility-toolbox-js\",\n  \"license\": \"MIT\",\n  \"description\": \"Toolbox for JavaScript applications in the domains of mobility and logistics.\",\n  \"version\": \"3.1.0-beta.2\",\n  \"homepage\": \"https://mobility-toolbox-js.geops.io/\",\n  \"exports\": {\n    \".\": \"./index.js\",\n    \"./api\": \"./api/index.js\",\n    \"./maplibre\": \"./maplibre/index.js\",\n    \"./ol\": \"./ol/index.js\",\n    \"./types\": \"./types/index.d.ts\"\n  },\n  \"dependencies\": {\n    \"@geoblocks/ol-maplibre-layer\": \"^1.0.2\",\n    \"@turf/helpers\": \"7.1.0\",\n    \"@turf/transform-rotate\": \"7.1.0\",\n    \"lodash.debounce\": \"4.0.8\",\n    \"lodash.throttle\": \"4.1.1\",\n    \"uuid\": \"11.0.3\"\n  },\n  \"peerDependencies\": {\n    \"maplibre-gl\": \">=4\",\n    \"ol\": \">=9\"\n  },\n  \"devDependencies\": {\n    \"@babel/preset-env\": \"^7.26.0\",\n    \"@babel/preset-typescript\": \"^7.26.0\",\n    \"@commitlint/cli\": \"19.6.0\",\n    \"@commitlint/config-conventional\": \"19.6.0\",\n    \"@geops/eslint-config-react\": \"^1.3.2\",\n    \"@types/geojson\": \"7946.0.15\",\n    \"@types/lodash\": \"^4.17.13\",\n    \"@types/lodash.debounce\": \"4.0.9\",\n    \"@types/lodash.throttle\": \"4.1.9\",\n    \"@types/mapbox-gl\": \"3.4.1\",\n    \"@types/offscreencanvas\": \"2019.7.3\",\n    \"@types/topojson\": \"3.2.6\",\n    \"@types/uuid\": \"10.0.0\",\n    \"@typescript-eslint/eslint-plugin\": \"8.18.0\",\n    \"@typescript-eslint/parser\": \"8.18.0\",\n    \"cypress\": \"13.16.1\",\n    \"esbuild\": \"0.24.0\",\n    \"esdoc\": \"1.1.0\",\n    \"esdoc-ecmascript-proposal-plugin\": \"1.0.0\",\n    \"esdoc-publish-html-plugin\": \"1.1.2\",\n    \"esdoc-standard-plugin\": \"1.0.0\",\n    \"esdoc-typescript-plugin\": \"1.0.1\",\n    \"eslint\": \"8.57.0\",\n    \"eslint-config-airbnb\": \"19.0.4\",\n    \"eslint-config-airbnb-typescript\": \"18.0.0\",\n    \"eslint-config-prettier\": \"9.1.0\",\n    \"eslint-plugin-cypress\": \"3.5.0\",\n    \"eslint-plugin-import\": \"2.31.0\",\n    \"eslint-plugin-jsx-a11y\": \"6.10.2\",\n    \"eslint-plugin-prettier\": \"5.2.1\",\n    \"eslint-plugin-react\": \"7.37.2\",\n    \"fixpack\": \"4.0.0\",\n    \"husky\": \"9.1.7\",\n    \"is-ci\": \"4.1.0\",\n    \"jest\": \"29.7.0\",\n    \"jest-canvas-mock\": \"2.5.2\",\n    \"jest-environment-jsdom\": \"29.7.0\",\n    \"jest-fetch-mock\": \"3.0.3\",\n    \"jest-serializer-html\": \"7.1.0\",\n    \"jest-transformer-svg\": \"2.0.2\",\n    \"jest-websocket-mock\": \"2.5.0\",\n    \"lint-staged\": \"15.2.11\",\n    \"maplibre-gl\": \"4.7.1\",\n    \"mock-socket\": \"9.3.1\",\n    \"next\": \"15.0.3\",\n    \"next-transpile-modules\": \"10.0.1\",\n    \"ol\": \"10.3.1\",\n    \"openapi-typescript\": \"6.7.5\",\n    \"prettier\": \"3.4.2\",\n    \"raw-loader\": \"4.0.2\",\n    \"sort-json\": \"2.0.1\",\n    \"standard-version\": \"9.5.0\",\n    \"start-server-and-test\": \"2.0.9\",\n    \"stylelint\": \"16.11.0\",\n    \"stylelint-config-recommended-scss\": \"14.1.0\",\n    \"stylelint-config-standard\": \"36.0.1\",\n    \"stylelint-scss\": \"6.10.0\",\n    \"ts-jest\": \"^29.2.5\",\n    \"typescript\": \"5.7.2\",\n    \"vite\": \"^6.0.3\"\n  },\n  \"scripts\": {\n    \"apidoc\": \"esdoc && cp apidoc/index.json doc/src/components/Esdoc\",\n    \"build\": \"yarn build:tsc && yarn esbuild:iife\",\n    \"build:tsc\": \"rm -rf build && yarn tsc && cp package.json build/ && cp README.md build/ && cp LICENSE build/  && cp -R src/types build/ && find build -type f -name '*.test.*' -delete\",\n    \"clean\": \"rm -rf .next && rm -rf doc/.next\",\n    \"coverage\": \"yarn test  --watchAll=false  --coverage --coverageDirectory=coverage\",\n    \"cy:open\": \"cypress open\",\n    \"cy:test\": \"start-server-and-test dev http://localhost:3000 'cypress run --browser chrome'\",\n    \"cy:test:chrome\": \"yarn build && start-server-and-test start http://localhost:3000 'cypress run --browser chrome'\",\n    \"cy:test:edge\": \"yarn build && start-server-and-test start http://localhost:3000 'cypress run --browser edge'\",\n    \"cy:test:firefox\": \"yarn build && start-server-and-test start http://localhost:3000 'cypress run --browser firefox'\",\n    \"dev\": \"vite\",\n    \"doc\": \"yarn build && yarn apidoc && cd doc && rm -rf node_modules/mobility-toolbox-js && yarn install --force && yarn build\",\n    \"doc:dev\": \"yarn clean && yarn build && yarn apidoc && yarn doc:dev:examples\",\n    \"doc:dev:examples\": \"yarn clean && yarn build && cd doc && rm -rf node_modules/mobility-toolbox-js && yarn install --force && yarn dev\",\n    \"esbuild\": \"yarn esbuild:all && yarn esbuild:iife\",\n    \"esbuild:all\": \"esbuild src/index.js src/**/*.js src/**/*.ts src/**/**/*.js src/**/**/*.ts --target=chrome100 --outdir=build/ --loader:.js=jsx\",\n    \"esbuild:iife\": \"yarn esbuild:iife:unminify && yarn esbuild:iife:minify\",\n    \"esbuild:iife:base\": \"esbuild src/iife.js --bundle --sourcemap --target=chrome100\",\n    \"esbuild:iife:minify\": \"yarn esbuild:iife:base --minify --outfile=build/mbt.min.js\",\n    \"esbuild:iife:unminify\": \"yarn esbuild:iife:base --outfile=build/mbt.js\",\n    \"format\": \"prettier --write 'src/**/*.js' 'src/**/*.test.js' && eslint src/**/*.js src/**/*.test.js src/**/*.ts --fix && stylelint 'src/**/*.css' 'src/**/*.scss' --fix --allow-empty-input\",\n    \"lint\": \"eslint src/**/*.js src/**/*.ts && stylelint src/**/*.css src/**/*.scss --allow-empty-input\",\n    \"prepare\": \"is-ci || husky\",\n    \"publish:beta\": \"HUSKY=0 yarn release -- --prerelease beta --skip.changelog  && yarn run build && cd build && HUSKY=0 yarn publish --tag beta && git push origin HEAD && git push --tags \",\n    \"publish:beta:dryrun\": \"yarn release -- --prerelease beta --dry-run --skip.changelog\",\n    \"publish:public\": \"yarn release  && yarn run build && cd build && HUSKY=0 yarn publish && git push origin HEAD && git push --tags \",\n    \"publish:public:dryrun\": \"yarn release --dry-run\",\n    \"release\": \"standard-version\",\n    \"start\": \"yarn doc && cd doc && yarn start\",\n    \"start:examples\": \"cd doc && yarn build && yarn start\",\n    \"test\": \"TZ='UTC' jest \",\n    \"test:watch\": \"yarn test --watchAll\",\n    \"tsc\": \"tsc\",\n    \"types:backend\": \"openapi-typescript https://developer.geops.io/swagger/routing.json --output src/types/routing.d.ts && openapi-typescript  https://developer.geops.io/swagger/stops.json --output src/types/stops.d.ts\",\n    \"up\": \"yarn upgrade-interactive --latest\"\n  },\n  \"browserslist\": [\n    \">0.2%\",\n    \"not dead\",\n    \"not op_mini all\",\n    \"not ie <= 11\",\n    \"not android < 5\"\n  ],\n  \"keywords\": [\n    \"mobility\",\n    \"realtime\",\n    \"routing\",\n    \"stops\",\n    \"toolbox\"\n  ],\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/geops/mobility-toolbox-js\"\n  },\n  \"sideEffects\": false\n}\n",
    "longname": "/home/olivier/GIT/mobility-toolbox-js/package.json",
    "name": "package.json",
    "static": true,
    "access": "public"
  },
  {
    "kind": "member",
    "name": "filter",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#filter",
    "access": "public",
    "description": "Filter out a train. This function must be fast, it is executed for every trajectory on every render frame.",
    "lineNumber": 56,
    "type": {
      "types": [
        "function"
      ]
    }
  },
  {
    "kind": "member",
    "name": "mode",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#mode",
    "access": "public",
    "description": "The realtime mode to use.",
    "lineNumber": 56,
    "type": {
      "types": [
        "RealtimeMode"
      ]
    }
  },
  {
    "kind": "member",
    "name": "mots",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#mots",
    "access": "public",
    "description": "Filter trains by its mode of transportation. It filters trains on backend side.",
    "lineNumber": 56,
    "type": {
      "types": [
        "RealtimeMot[]"
      ]
    }
  },
  {
    "kind": "member",
    "name": "tenant",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#tenant",
    "access": "public",
    "description": "Filter trains by its tenant. It filters trains on backend side.",
    "lineNumber": 56,
    "type": {
      "types": [
        "RealtimeTenant"
      ]
    }
  },
  {
    "kind": "member",
    "name": "sort",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#sort",
    "access": "public",
    "description": "Sort trains. This function must be fast, it is executed on every render frame.",
    "lineNumber": 56,
    "type": {
      "types": [
        "function"
      ]
    }
  },
  {
    "kind": "member",
    "name": "style",
    "memberof": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/maplibre/layers/RealtimeLayer.js~RealtimeLayer#style",
    "access": "public",
    "description": "Function to style the vehicles.",
    "lineNumber": 56,
    "type": {
      "types": [
        "function"
      ]
    }
  },
  {
    "kind": "member",
    "name": "mot",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#mot",
    "access": "public",
    "description": "Mean of transport to be used for routing.",
    "lineNumber": 70,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "kind": "member",
    "name": "routingLayer",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#routingLayer",
    "access": "public",
    "description": "Layer for adding route features.",
    "lineNumber": 70,
    "type": {
      "types": [
        "VectorLayer"
      ]
    }
  },
  {
    "kind": "member",
    "name": "loading",
    "memberof": "build/ol/controls/RoutingControl.js~RoutingControl",
    "static": false,
    "longname": "build/ol/controls/RoutingControl.js~RoutingControl#loading",
    "access": "public",
    "description": "True if the control is requesting the backend.",
    "lineNumber": 70,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "kind": "member",
    "name": "mapLibreMap",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#mapLibreMap",
    "access": "public",
    "description": "The Maplibre map object. Readonly.",
    "lineNumber": 50,
    "type": {
      "types": [
        "maplibregl.Map"
      ]
    }
  },
  {
    "kind": "member",
    "name": "style",
    "memberof": "build/ol/layers/MaplibreLayer.js~MaplibreLayer",
    "static": false,
    "longname": "build/ol/layers/MaplibreLayer.js~MaplibreLayer#style",
    "access": "public",
    "description": "The [geOps Maps API](https://developer.geops.io/apis/maps) style.",
    "lineNumber": 50,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "kind": "member",
    "name": "allowRenderWhenAnimating",
    "memberof": "build/ol/layers/RealtimeLayer.js~RealtimeLayer",
    "static": false,
    "longname": "build/ol/layers/RealtimeLayer.js~RealtimeLayer#allowRenderWhenAnimating",
    "access": "public",
    "description": "Allow rendering of the layer when the map is animating.",
    "lineNumber": 45,
    "type": {
      "types": [
        "boolean"
      ]
    }
  }
]